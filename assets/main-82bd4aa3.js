var si=Object.defineProperty;var ai=(t,e,n)=>e in t?si(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var B=(t,e,n)=>(ai(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function Ot(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ui(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function vn(t){let e,n,i;t.length!==2?(e=Ot,n=(a,c)=>Ot(t(a),c),i=(a,c)=>t(a)-c):(e=t===Ot||t===ui?t:ci,n=t,i=t);function r(a,c,u=0,l=a.length){if(u<l){if(e(c,c)!==0)return l;do{const h=u+l>>>1;n(a[h],c)<0?u=h+1:l=h}while(u<l)}return u}function o(a,c,u=0,l=a.length){if(u<l){if(e(c,c)!==0)return l;do{const h=u+l>>>1;n(a[h],c)<=0?u=h+1:l=h}while(u<l)}return u}function s(a,c,u=0,l=a.length){const h=r(a,c,u,l-1);return h>u&&i(a[h-1],c)>-i(a[h],c)?h-1:h}return{left:r,center:s,right:o}}function ci(){return 0}function li(t){return t===null?NaN:+t}const fi=vn(Ot),hi=fi.right;vn(li).center;const di=hi,gi=Math.sqrt(50),pi=Math.sqrt(10),mi=Math.sqrt(2);function Bt(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),s=o>=gi?10:o>=pi?5:o>=mi?2:1;let a,c,u;return r<0?(u=Math.pow(10,-r)/s,a=Math.round(t*u),c=Math.round(e*u),a/u<t&&++a,c/u>e&&--c,u=-u):(u=Math.pow(10,r)*s,a=Math.round(t/u),c=Math.round(e/u),a*u<t&&++a,c*u>e&&--c),c<a&&.5<=n&&n<2?Bt(t,e,n*2):[a,c,u]}function yi(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,o,s]=i?Bt(e,t,n):Bt(t,e,n);if(!(o>=r))return[];const a=o-r+1,c=new Array(a);if(i)if(s<0)for(let u=0;u<a;++u)c[u]=(o-u)/-s;else for(let u=0;u<a;++u)c[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)c[u]=(r+u)/-s;else for(let u=0;u<a;++u)c[u]=(r+u)*s;return c}function le(t,e,n){return e=+e,t=+t,n=+n,Bt(t,e,n)[2]}function vi(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?le(e,t,n):le(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function _i(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function xi(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}var wi={value:()=>{}};function Et(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new qt(n)}function qt(t){this._=t}function bi(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}qt.prototype=Et.prototype={constructor:qt,on:function(t,e){var n=this._,i=bi(t+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(t=i[o]).type)&&(r=Mi(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(r=(t=i[o]).type)n[r]=Ce(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Ce(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new qt(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function Mi(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Ce(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=wi,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var fe="http://www.w3.org/1999/xhtml";const $e={svg:"http://www.w3.org/2000/svg",xhtml:fe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function te(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),$e.hasOwnProperty(e)?{space:$e[e],local:t}:t}function Ni(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===fe&&e.documentElement.namespaceURI===fe?e.createElement(t):e.createElementNS(n,t)}}function Ai(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function _n(t){var e=te(t);return(e.local?Ai:Ni)(e)}function ki(){}function xe(t){return t==null?ki:function(){return this.querySelector(t)}}function Ei(t){typeof t!="function"&&(t=xe(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=new Array(s),c,u,l=0;l<s;++l)(c=o[l])&&(u=t.call(c,c.__data__,l,o))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new V(i,this._parents)}function Si(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function zi(){return[]}function xn(t){return t==null?zi:function(){return this.querySelectorAll(t)}}function Ti(t){return function(){return Si(t.apply(this,arguments))}}function Di(t){typeof t=="function"?t=Ti(t):t=xn(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s=e[o],a=s.length,c,u=0;u<a;++u)(c=s[u])&&(i.push(t.call(c,c.__data__,u,s)),r.push(c));return new V(i,r)}function wn(t){return function(){return this.matches(t)}}function bn(t){return function(e){return e.matches(t)}}var Ii=Array.prototype.find;function Ci(t){return function(){return Ii.call(this.children,t)}}function $i(){return this.firstElementChild}function Li(t){return this.select(t==null?$i:Ci(typeof t=="function"?t:bn(t)))}var Pi=Array.prototype.filter;function Ri(){return Array.from(this.children)}function Oi(t){return function(){return Pi.call(this.children,t)}}function qi(t){return this.selectAll(t==null?Ri:Oi(typeof t=="function"?t:bn(t)))}function Fi(t){typeof t!="function"&&(t=wn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=[],c,u=0;u<s;++u)(c=o[u])&&t.call(c,c.__data__,u,o)&&a.push(c);return new V(i,this._parents)}function Mn(t){return new Array(t.length)}function Xi(){return new V(this._enter||this._groups.map(Mn),this._parents)}function Yt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Yt.prototype={constructor:Yt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Hi(t){return function(){return t}}function Bi(t,e,n,i,r,o){for(var s=0,a,c=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],i[s]=a):n[s]=new Yt(t,o[s]);for(;s<c;++s)(a=e[s])&&(r[s]=a)}function Yi(t,e,n,i,r,o,s){var a,c,u=new Map,l=e.length,h=o.length,f=new Array(l),d;for(a=0;a<l;++a)(c=e[a])&&(f[a]=d=s.call(c,c.__data__,a,e)+"",u.has(d)?r[a]=c:u.set(d,c));for(a=0;a<h;++a)d=s.call(t,o[a],a,o)+"",(c=u.get(d))?(i[a]=c,c.__data__=o[a],u.delete(d)):n[a]=new Yt(t,o[a]);for(a=0;a<l;++a)(c=e[a])&&u.get(f[a])===c&&(r[a]=c)}function Vi(t){return t.__data__}function Ki(t,e){if(!arguments.length)return Array.from(this,Vi);var n=e?Yi:Bi,i=this._parents,r=this._groups;typeof t!="function"&&(t=Hi(t));for(var o=r.length,s=new Array(o),a=new Array(o),c=new Array(o),u=0;u<o;++u){var l=i[u],h=r[u],f=h.length,d=Wi(t.call(l,l&&l.__data__,u,i)),_=d.length,v=a[u]=new Array(_),y=s[u]=new Array(_),g=c[u]=new Array(f);n(l,h,v,y,g,d,e);for(var w=0,M=0,m,b;w<_;++w)if(m=v[w]){for(w>=M&&(M=w+1);!(b=y[M])&&++M<_;);m._next=b||null}}return s=new V(s,i),s._enter=a,s._exit=c,s}function Wi(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Gi(){return new V(this._exit||this._groups.map(Mn),this._parents)}function Ui(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function Zi(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),c=0;c<s;++c)for(var u=n[c],l=i[c],h=u.length,f=a[c]=new Array(h),d,_=0;_<h;++_)(d=u[_]||l[_])&&(f[_]=d);for(;c<r;++c)a[c]=n[c];return new V(a,this._parents)}function Qi(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function ji(t){t||(t=Ji);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],a=s.length,c=r[o]=new Array(a),u,l=0;l<a;++l)(u=s[l])&&(c[l]=u);c.sort(e)}return new V(r,this._parents).order()}function Ji(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function tr(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function er(){return Array.from(this)}function nr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function ir(){let t=0;for(const e of this)++t;return t}function rr(){return!this.node()}function or(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,s=r.length,a;o<s;++o)(a=r[o])&&t.call(a,a.__data__,o,r);return this}function sr(t){return function(){this.removeAttribute(t)}}function ar(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ur(t,e){return function(){this.setAttribute(t,e)}}function cr(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function lr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function fr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function hr(t,e){var n=te(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?ar:sr:typeof e=="function"?n.local?fr:lr:n.local?cr:ur)(n,e))}function Nn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function dr(t){return function(){this.style.removeProperty(t)}}function gr(t,e,n){return function(){this.style.setProperty(t,e,n)}}function pr(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function mr(t,e,n){return arguments.length>1?this.each((e==null?dr:typeof e=="function"?pr:gr)(t,e,n??"")):pt(this.node(),t)}function pt(t,e){return t.style.getPropertyValue(e)||Nn(t).getComputedStyle(t,null).getPropertyValue(e)}function yr(t){return function(){delete this[t]}}function vr(t,e){return function(){this[t]=e}}function _r(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function xr(t,e){return arguments.length>1?this.each((e==null?yr:typeof e=="function"?_r:vr)(t,e)):this.node()[t]}function An(t){return t.trim().split(/^|\s+/)}function we(t){return t.classList||new kn(t)}function kn(t){this._node=t,this._names=An(t.getAttribute("class")||"")}kn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function En(t,e){for(var n=we(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Sn(t,e){for(var n=we(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function wr(t){return function(){En(this,t)}}function br(t){return function(){Sn(this,t)}}function Mr(t,e){return function(){(e.apply(this,arguments)?En:Sn)(this,t)}}function Nr(t,e){var n=An(t+"");if(arguments.length<2){for(var i=we(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?Mr:e?wr:br)(n,e))}function Ar(){this.textContent=""}function kr(t){return function(){this.textContent=t}}function Er(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Sr(t){return arguments.length?this.each(t==null?Ar:(typeof t=="function"?Er:kr)(t)):this.node().textContent}function zr(){this.innerHTML=""}function Tr(t){return function(){this.innerHTML=t}}function Dr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ir(t){return arguments.length?this.each(t==null?zr:(typeof t=="function"?Dr:Tr)(t)):this.node().innerHTML}function Cr(){this.nextSibling&&this.parentNode.appendChild(this)}function $r(){return this.each(Cr)}function Lr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pr(){return this.each(Lr)}function Rr(t){var e=typeof t=="function"?t:_n(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Or(){return null}function qr(t,e){var n=typeof t=="function"?t:_n(t),i=e==null?Or:typeof e=="function"?e:xe(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Fr(){var t=this.parentNode;t&&t.removeChild(this)}function Xr(){return this.each(Fr)}function Hr(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Br(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Yr(t){return this.select(t?Br:Hr)}function Vr(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Kr(t){return function(e){t.call(this,e,this.__data__)}}function Wr(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Gr(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function Ur(t,e,n){return function(){var i=this.__on,r,o=Kr(e);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Zr(t,e,n){var i=Wr(t+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(r=0,l=a[c];r<o;++r)if((s=i[r]).type===l.type&&s.name===l.name)return l.value}return}for(a=e?Ur:Gr,r=0;r<o;++r)this.each(a(i[r],e,n));return this}function zn(t,e,n){var i=Nn(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Qr(t,e){return function(){return zn(this,t,e)}}function jr(t,e){return function(){return zn(this,t,e.apply(this,arguments))}}function Jr(t,e){return this.each((typeof e=="function"?jr:Qr)(t,e))}function*to(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var Tn=[null];function V(t,e){this._groups=t,this._parents=e}function St(){return new V([[document.documentElement]],Tn)}function eo(){return this}V.prototype=St.prototype={constructor:V,select:Ei,selectAll:Di,selectChild:Li,selectChildren:qi,filter:Fi,data:Ki,enter:Xi,exit:Gi,join:Ui,merge:Zi,selection:eo,order:Qi,sort:ji,call:tr,nodes:er,node:nr,size:ir,empty:rr,each:or,attr:hr,style:mr,property:xr,classed:Nr,text:Sr,html:Ir,raise:$r,lower:Pr,append:Rr,insert:qr,remove:Xr,clone:Yr,datum:Vr,on:Zr,dispatch:Jr,[Symbol.iterator]:to};function Y(t){return typeof t=="string"?new V([[document.querySelector(t)]],[document.documentElement]):new V([[t]],Tn)}function no(t){let e;for(;e=t.sourceEvent;)t=e;return t}function rt(t,e){if(t=no(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const io={passive:!1},Mt={capture:!0,passive:!1};function re(t){t.stopImmediatePropagation()}function dt(t){t.preventDefault(),t.stopImmediatePropagation()}function Dn(t){var e=t.document.documentElement,n=Y(t).on("dragstart.drag",dt,Mt);"onselectstart"in e?n.on("selectstart.drag",dt,Mt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function In(t,e){var n=t.document.documentElement,i=Y(t).on("dragstart.drag",null);e&&(i.on("click.drag",dt,Mt),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Tt=t=>()=>t;function he(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:c,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}he.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ro(t){return!t.ctrlKey&&!t.button}function oo(){return this.parentNode}function so(t,e){return e??{x:t.x,y:t.y}}function ao(){return navigator.maxTouchPoints||"ontouchstart"in this}function uo(){var t=ro,e=oo,n=so,i=ao,r={},o=Et("start","drag","end"),s=0,a,c,u,l,h=0;function f(m){m.on("mousedown.drag",d).filter(i).on("touchstart.drag",y).on("touchmove.drag",g,io).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(m,b){if(!(l||!t.call(this,m,b))){var E=M(this,e.call(this,m,b),m,b,"mouse");E&&(Y(m.view).on("mousemove.drag",_,Mt).on("mouseup.drag",v,Mt),Dn(m.view),re(m),u=!1,a=m.clientX,c=m.clientY,E("start",m))}}function _(m){if(dt(m),!u){var b=m.clientX-a,E=m.clientY-c;u=b*b+E*E>h}r.mouse("drag",m)}function v(m){Y(m.view).on("mousemove.drag mouseup.drag",null),In(m.view,u),dt(m),r.mouse("end",m)}function y(m,b){if(t.call(this,m,b)){var E=m.changedTouches,T=e.call(this,m,b),D=E.length,$,C;for($=0;$<D;++$)(C=M(this,T,m,b,E[$].identifier,E[$]))&&(re(m),C("start",m,E[$]))}}function g(m){var b=m.changedTouches,E=b.length,T,D;for(T=0;T<E;++T)(D=r[b[T].identifier])&&(dt(m),D("drag",m,b[T]))}function w(m){var b=m.changedTouches,E=b.length,T,D;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),T=0;T<E;++T)(D=r[b[T].identifier])&&(re(m),D("end",m,b[T]))}function M(m,b,E,T,D,$){var C=o.copy(),k=rt($||E,b),R,L,p;if((p=n.call(m,new he("beforestart",{sourceEvent:E,target:f,identifier:D,active:s,x:k[0],y:k[1],dx:0,dy:0,dispatch:C}),T))!=null)return R=p.x-k[0]||0,L=p.y-k[1]||0,function N(x,A,z){var S=k,I;switch(x){case"start":r[D]=N,I=s++;break;case"end":delete r[D],--s;case"drag":k=rt(z||A,b),I=s;break}C.call(x,m,new he(x,{sourceEvent:A,subject:p,target:f,identifier:D,active:I,x:k[0]+R,y:k[1]+L,dx:k[0]-S[0],dy:k[1]-S[1],dispatch:C}),T)}}return f.filter=function(m){return arguments.length?(t=typeof m=="function"?m:Tt(!!m),f):t},f.container=function(m){return arguments.length?(e=typeof m=="function"?m:Tt(m),f):e},f.subject=function(m){return arguments.length?(n=typeof m=="function"?m:Tt(m),f):n},f.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:Tt(!!m),f):i},f.on=function(){var m=o.on.apply(o,arguments);return m===o?f:m},f.clickDistance=function(m){return arguments.length?(h=(m=+m)*m,f):Math.sqrt(h)},f}function be(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Cn(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function zt(){}var Nt=.7,Vt=1/Nt,gt="\\s*([+-]?\\d+)\\s*",At="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",J="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",co=/^#([0-9a-f]{3,8})$/,lo=new RegExp(`^rgb\\(${gt},${gt},${gt}\\)$`),fo=new RegExp(`^rgb\\(${J},${J},${J}\\)$`),ho=new RegExp(`^rgba\\(${gt},${gt},${gt},${At}\\)$`),go=new RegExp(`^rgba\\(${J},${J},${J},${At}\\)$`),po=new RegExp(`^hsl\\(${At},${J},${J}\\)$`),mo=new RegExp(`^hsla\\(${At},${J},${J},${At}\\)$`),Le={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};be(zt,ft,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Pe,formatHex:Pe,formatHex8:yo,formatHsl:vo,formatRgb:Re,toString:Re});function Pe(){return this.rgb().formatHex()}function yo(){return this.rgb().formatHex8()}function vo(){return $n(this).formatHsl()}function Re(){return this.rgb().formatRgb()}function ft(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=co.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Oe(e):n===3?new H(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Dt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Dt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=lo.exec(t))?new H(e[1],e[2],e[3],1):(e=fo.exec(t))?new H(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ho.exec(t))?Dt(e[1],e[2],e[3],e[4]):(e=go.exec(t))?Dt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=po.exec(t))?Xe(e[1],e[2]/100,e[3]/100,1):(e=mo.exec(t))?Xe(e[1],e[2]/100,e[3]/100,e[4]):Le.hasOwnProperty(t)?Oe(Le[t]):t==="transparent"?new H(NaN,NaN,NaN,0):null}function Oe(t){return new H(t>>16&255,t>>8&255,t&255,1)}function Dt(t,e,n,i){return i<=0&&(t=e=n=NaN),new H(t,e,n,i)}function _o(t){return t instanceof zt||(t=ft(t)),t?(t=t.rgb(),new H(t.r,t.g,t.b,t.opacity)):new H}function de(t,e,n,i){return arguments.length===1?_o(t):new H(t,e,n,i??1)}function H(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}be(H,de,Cn(zt,{brighter(t){return t=t==null?Vt:Math.pow(Vt,t),new H(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Nt:Math.pow(Nt,t),new H(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new H(ct(this.r),ct(this.g),ct(this.b),Kt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qe,formatHex:qe,formatHex8:xo,formatRgb:Fe,toString:Fe}));function qe(){return`#${ut(this.r)}${ut(this.g)}${ut(this.b)}`}function xo(){return`#${ut(this.r)}${ut(this.g)}${ut(this.b)}${ut((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fe(){const t=Kt(this.opacity);return`${t===1?"rgb(":"rgba("}${ct(this.r)}, ${ct(this.g)}, ${ct(this.b)}${t===1?")":`, ${t})`}`}function Kt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ct(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ut(t){return t=ct(t),(t<16?"0":"")+t.toString(16)}function Xe(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new U(t,e,n,i)}function $n(t){if(t instanceof U)return new U(t.h,t.s,t.l,t.opacity);if(t instanceof zt||(t=ft(t)),!t)return new U;if(t instanceof U)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,c=(o+r)/2;return a?(e===o?s=(n-i)/a+(n<i)*6:n===o?s=(i-e)/a+2:s=(e-n)/a+4,a/=c<.5?o+r:2-o-r,s*=60):a=c>0&&c<1?0:s,new U(s,a,c,t.opacity)}function wo(t,e,n,i){return arguments.length===1?$n(t):new U(t,e,n,i??1)}function U(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}be(U,wo,Cn(zt,{brighter(t){return t=t==null?Vt:Math.pow(Vt,t),new U(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Nt:Math.pow(Nt,t),new U(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new H(oe(t>=240?t-240:t+120,r,i),oe(t,r,i),oe(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new U(He(this.h),It(this.s),It(this.l),Kt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Kt(this.opacity);return`${t===1?"hsl(":"hsla("}${He(this.h)}, ${It(this.s)*100}%, ${It(this.l)*100}%${t===1?")":`, ${t})`}`}}));function He(t){return t=(t||0)%360,t<0?t+360:t}function It(t){return Math.max(0,Math.min(1,t||0))}function oe(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Me=t=>()=>t;function bo(t,e){return function(n){return t+n*e}}function Mo(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function No(t){return(t=+t)==1?Ln:function(e,n){return n-e?Mo(e,n,t):Me(isNaN(e)?n:e)}}function Ln(t,e){var n=e-t;return n?bo(t,n):Me(isNaN(t)?e:t)}const Wt=function t(e){var n=No(e);function i(r,o){var s=n((r=de(r)).r,(o=de(o)).r),a=n(r.g,o.g),c=n(r.b,o.b),u=Ln(r.opacity,o.opacity);return function(l){return r.r=s(l),r.g=a(l),r.b=c(l),r.opacity=u(l),r+""}}return i.gamma=t,i}(1);function Ao(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}}function ko(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Eo(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),o=new Array(n),s;for(s=0;s<i;++s)r[s]=Ne(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<i;++s)o[s]=r[s](a);return o}}function So(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function G(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function zo(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Ne(t[r],e[r]):i[r]=e[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var ge=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,se=new RegExp(ge.source,"g");function To(t){return function(){return t}}function Do(t){return function(e){return t(e)+""}}function Pn(t,e){var n=ge.lastIndex=se.lastIndex=0,i,r,o,s=-1,a=[],c=[];for(t=t+"",e=e+"";(i=ge.exec(t))&&(r=se.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,c.push({i:s,x:G(i,r)})),n=se.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?Do(c[0].x):To(e):(e=c.length,function(u){for(var l=0,h;l<e;++l)a[(h=c[l]).i]=h.x(u);return a.join("")})}function Ne(t,e){var n=typeof e,i;return e==null||n==="boolean"?Me(e):(n==="number"?G:n==="string"?(i=ft(e))?(e=i,Wt):Pn:e instanceof ft?Wt:e instanceof Date?So:ko(e)?Ao:Array.isArray(e)?Eo:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?zo:G)(t,e)}function Io(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Be=180/Math.PI,pe={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Rn(t,e,n,i,r,o){var s,a,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*i)&&(n-=t*c,i-=e*c),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,c/=a),t*i<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Be,skewX:Math.atan(c)*Be,scaleX:s,scaleY:a}}var Ct;function Co(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?pe:Rn(e.a,e.b,e.c,e.d,e.e,e.f)}function $o(t){return t==null||(Ct||(Ct=document.createElementNS("http://www.w3.org/2000/svg","g")),Ct.setAttribute("transform",t),!(t=Ct.transform.baseVal.consolidate()))?pe:(t=t.matrix,Rn(t.a,t.b,t.c,t.d,t.e,t.f))}function On(t,e,n,i){function r(u){return u.length?u.pop()+" ":""}function o(u,l,h,f,d,_){if(u!==h||l!==f){var v=d.push("translate(",null,e,null,n);_.push({i:v-4,x:G(u,h)},{i:v-2,x:G(l,f)})}else(h||f)&&d.push("translate("+h+e+f+n)}function s(u,l,h,f){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),f.push({i:h.push(r(h)+"rotate(",null,i)-2,x:G(u,l)})):l&&h.push(r(h)+"rotate("+l+i)}function a(u,l,h,f){u!==l?f.push({i:h.push(r(h)+"skewX(",null,i)-2,x:G(u,l)}):l&&h.push(r(h)+"skewX("+l+i)}function c(u,l,h,f,d,_){if(u!==h||l!==f){var v=d.push(r(d)+"scale(",null,",",null,")");_.push({i:v-4,x:G(u,h)},{i:v-2,x:G(l,f)})}else(h!==1||f!==1)&&d.push(r(d)+"scale("+h+","+f+")")}return function(u,l){var h=[],f=[];return u=t(u),l=t(l),o(u.translateX,u.translateY,l.translateX,l.translateY,h,f),s(u.rotate,l.rotate,h,f),a(u.skewX,l.skewX,h,f),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,h,f),u=l=null,function(d){for(var _=-1,v=f.length,y;++_<v;)h[(y=f[_]).i]=y.x(d);return h.join("")}}}var Lo=On(Co,"px, ","px)","deg)"),Po=On($o,", ",")",")"),Ro=1e-12;function Ye(t){return((t=Math.exp(t))+1/t)/2}function Oo(t){return((t=Math.exp(t))-1/t)/2}function qo(t){return((t=Math.exp(2*t))-1)/(t+1)}const qn=function t(e,n,i){function r(o,s){var a=o[0],c=o[1],u=o[2],l=s[0],h=s[1],f=s[2],d=l-a,_=h-c,v=d*d+_*_,y,g;if(v<Ro)g=Math.log(f/u)/e,y=function(T){return[a+T*d,c+T*_,u*Math.exp(e*T*g)]};else{var w=Math.sqrt(v),M=(f*f-u*u+i*v)/(2*u*n*w),m=(f*f-u*u-i*v)/(2*f*n*w),b=Math.log(Math.sqrt(M*M+1)-M),E=Math.log(Math.sqrt(m*m+1)-m);g=(E-b)/e,y=function(T){var D=T*g,$=Ye(b),C=u/(n*w)*($*qo(e*D+b)-Oo(b));return[a+C*d,c+C*_,u*$/Ye(e*D+b)]}}return y.duration=g*1e3*e/Math.SQRT2,y}return r.rho=function(o){var s=Math.max(.001,+o),a=s*s,c=a*a;return t(s,a,c)},r}(Math.SQRT2,2,4);var mt=0,xt=0,vt=0,Fn=1e3,Gt,wt,Ut=0,ht=0,ee=0,kt=typeof performance=="object"&&performance.now?performance:Date,Xn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ae(){return ht||(Xn(Fo),ht=kt.now()+ee)}function Fo(){ht=0}function Zt(){this._call=this._time=this._next=null}Zt.prototype=ke.prototype={constructor:Zt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ae():+n)+(e==null?0:+e),!this._next&&wt!==this&&(wt?wt._next=this:Gt=this,wt=this),this._call=t,this._time=n,me()},stop:function(){this._call&&(this._call=null,this._time=1/0,me())}};function ke(t,e,n){var i=new Zt;return i.restart(t,e,n),i}function Xo(){Ae(),++mt;for(var t=Gt,e;t;)(e=ht-t._time)>=0&&t._call.call(void 0,e),t=t._next;--mt}function Ve(){ht=(Ut=kt.now())+ee,mt=xt=0;try{Xo()}finally{mt=0,Bo(),ht=0}}function Ho(){var t=kt.now(),e=t-Ut;e>Fn&&(ee-=e,Ut=t)}function Bo(){for(var t,e=Gt,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Gt=n);wt=t,me(i)}function me(t){if(!mt){xt&&(xt=clearTimeout(xt));var e=t-ht;e>24?(t<1/0&&(xt=setTimeout(Ve,t-kt.now()-ee)),vt&&(vt=clearInterval(vt))):(vt||(Ut=kt.now(),vt=setInterval(Ho,Fn)),mt=1,Xn(Ve))}}function Ke(t,e,n){var i=new Zt;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var Yo=Et("start","end","cancel","interrupt"),Vo=[],Hn=0,We=1,ye=2,Ft=3,Ge=4,ve=5,Xt=6;function ne(t,e,n,i,r,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Ko(t,n,{name:e,index:i,group:r,on:Yo,tween:Vo,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Hn})}function Ee(t,e){var n=Z(t,e);if(n.state>Hn)throw new Error("too late; already scheduled");return n}function tt(t,e){var n=Z(t,e);if(n.state>Ft)throw new Error("too late; already running");return n}function Z(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ko(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=ke(o,0,n.time);function o(u){n.state=We,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var l,h,f,d;if(n.state!==We)return c();for(l in i)if(d=i[l],d.name===n.name){if(d.state===Ft)return Ke(s);d.state===Ge?(d.state=Xt,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[l]):+l<e&&(d.state=Xt,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[l])}if(Ke(function(){n.state===Ft&&(n.state=Ge,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=ye,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ye){for(n.state=Ft,r=new Array(f=n.tween.length),l=0,h=-1;l<f;++l)(d=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++h]=d);r.length=h+1}}function a(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=ve,1),h=-1,f=r.length;++h<f;)r[h].call(t,l);n.state===ve&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Xt,n.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function Ht(t,e){var n=t.__transition,i,r,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){o=!1;continue}r=i.state>ye&&i.state<ve,i.state=Xt,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}o&&delete t.__transition}}function Wo(t){return this.each(function(){Ht(this,t)})}function Go(t,e){var n,i;return function(){var r=tt(this,t),o=r.tween;if(o!==n){i=n=o;for(var s=0,a=i.length;s<a;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function Uo(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=tt(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:e,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===e){r[c]=a;break}c===u&&r.push(a)}o.tween=r}}function Zo(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=Z(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((e==null?Go:Uo)(n,t,e))}function Se(t,e,n){var i=t._id;return t.each(function(){var r=tt(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Z(r,i).value[e]}}function Bn(t,e){var n;return(typeof e=="number"?G:e instanceof ft?Wt:(n=ft(e))?(e=n,Wt):Pn)(t,e)}function Qo(t){return function(){this.removeAttribute(t)}}function jo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Jo(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=e(i=s,n)}}function ts(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=e(i=s,n)}}function es(t,e,n){var i,r,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=a+"",s===c?null:s===i&&c===r?o:(r=c,o=e(i=s,a)))}}function ns(t,e,n){var i,r,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=a+"",s===c?null:s===i&&c===r?o:(r=c,o=e(i=s,a)))}}function is(t,e){var n=te(t),i=n==="transform"?Po:Bn;return this.attrTween(t,typeof e=="function"?(n.local?ns:es)(n,i,Se(this,"attr."+t,e)):e==null?(n.local?jo:Qo)(n):(n.local?ts:Jo)(n,i,e))}function rs(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function os(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ss(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&os(t,o)),n}return r._value=e,r}function as(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&rs(t,o)),n}return r._value=e,r}function us(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=te(t);return this.tween(n,(i.local?ss:as)(i,e))}function cs(t,e){return function(){Ee(this,t).delay=+e.apply(this,arguments)}}function ls(t,e){return e=+e,function(){Ee(this,t).delay=e}}function fs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?cs:ls)(e,t)):Z(this.node(),e).delay}function hs(t,e){return function(){tt(this,t).duration=+e.apply(this,arguments)}}function ds(t,e){return e=+e,function(){tt(this,t).duration=e}}function gs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?hs:ds)(e,t)):Z(this.node(),e).duration}function ps(t,e){if(typeof e!="function")throw new Error;return function(){tt(this,t).ease=e}}function ms(t){var e=this._id;return arguments.length?this.each(ps(e,t)):Z(this.node(),e).ease}function ys(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;tt(this,t).ease=n}}function vs(t){if(typeof t!="function")throw new Error;return this.each(ys(this._id,t))}function _s(t){typeof t!="function"&&(t=wn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=[],c,u=0;u<s;++u)(c=o[u])&&t.call(c,c.__data__,u,o)&&a.push(c);return new st(i,this._parents,this._name,this._id)}function xs(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var c=e[a],u=n[a],l=c.length,h=s[a]=new Array(l),f,d=0;d<l;++d)(f=c[d]||u[d])&&(h[d]=f);for(;a<i;++a)s[a]=e[a];return new st(s,this._parents,this._name,this._id)}function ws(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function bs(t,e,n){var i,r,o=ws(e)?Ee:tt;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(e,n),s.on=r}}function Ms(t,e){var n=this._id;return arguments.length<2?Z(this.node(),n).on.on(t):this.each(bs(n,t,e))}function Ns(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function As(){return this.on("end.remove",Ns(this._id))}function ks(t){var e=this._name,n=this._id;typeof t!="function"&&(t=xe(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a=i[s],c=a.length,u=o[s]=new Array(c),l,h,f=0;f<c;++f)(l=a[f])&&(h=t.call(l,l.__data__,f,a))&&("__data__"in l&&(h.__data__=l.__data__),u[f]=h,ne(u[f],e,n,f,u,Z(l,n)));return new st(o,this._parents,e,n)}function Es(t){var e=this._name,n=this._id;typeof t!="function"&&(t=xn(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var c=i[a],u=c.length,l,h=0;h<u;++h)if(l=c[h]){for(var f=t.call(l,l.__data__,h,c),d,_=Z(l,n),v=0,y=f.length;v<y;++v)(d=f[v])&&ne(d,e,n,v,f,_);o.push(f),s.push(l)}return new st(o,s,e,n)}var Ss=St.prototype.constructor;function zs(){return new Ss(this._groups,this._parents)}function Ts(t,e){var n,i,r;return function(){var o=pt(this,t),s=(this.style.removeProperty(t),pt(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}function Yn(t){return function(){this.style.removeProperty(t)}}function Ds(t,e,n){var i,r=n+"",o;return function(){var s=pt(this,t);return s===r?null:s===i?o:o=e(i=s,n)}}function Is(t,e,n){var i,r,o;return function(){var s=pt(this,t),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(t),pt(this,t))),s===c?null:s===i&&c===r?o:(r=c,o=e(i=s,a))}}function Cs(t,e){var n,i,r,o="style."+e,s="end."+o,a;return function(){var c=tt(this,t),u=c.on,l=c.value[o]==null?a||(a=Yn(e)):void 0;(u!==n||r!==l)&&(i=(n=u).copy()).on(s,r=l),c.on=i}}function $s(t,e,n){var i=(t+="")=="transform"?Lo:Bn;return e==null?this.styleTween(t,Ts(t,i)).on("end.style."+t,Yn(t)):typeof e=="function"?this.styleTween(t,Is(t,i,Se(this,"style."+t,e))).each(Cs(this._id,t)):this.styleTween(t,Ds(t,i,e),n).on("end.style."+t,null)}function Ls(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Ps(t,e,n){var i,r;function o(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&Ls(t,s,n)),i}return o._value=e,o}function Rs(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Ps(t,e,n??""))}function Os(t){return function(){this.textContent=t}}function qs(t){return function(){var e=t(this);this.textContent=e??""}}function Fs(t){return this.tween("text",typeof t=="function"?qs(Se(this,"text",t)):Os(t==null?"":t+""))}function Xs(t){return function(e){this.textContent=t.call(this,e)}}function Hs(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Xs(r)),e}return i._value=t,i}function Bs(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Hs(t))}function Ys(){for(var t=this._name,e=this._id,n=Vn(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,c,u=0;u<a;++u)if(c=s[u]){var l=Z(c,e);ne(c,t,n,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new st(i,this._parents,t,n)}function Vs(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--r===0&&o()}};n.each(function(){var u=tt(this,i),l=u.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),u.on=e}),r===0&&o()})}var Ks=0;function st(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Vn(){return++Ks}var it=St.prototype;st.prototype={constructor:st,select:ks,selectAll:Es,selectChild:it.selectChild,selectChildren:it.selectChildren,filter:_s,merge:xs,selection:zs,transition:Ys,call:it.call,nodes:it.nodes,node:it.node,size:it.size,empty:it.empty,each:it.each,on:Ms,attr:is,attrTween:us,style:$s,styleTween:Rs,text:Fs,textTween:Bs,remove:As,tween:Zo,delay:fs,duration:gs,ease:ms,easeVarying:vs,end:Vs,[Symbol.iterator]:it[Symbol.iterator]};function Ws(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Gs={time:null,delay:0,duration:250,ease:Ws};function Us(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Zs(t){var e,n;t instanceof st?(e=t._id,t=t._name):(e=Vn(),(n=Gs).time=Ae(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,c,u=0;u<a;++u)(c=s[u])&&ne(c,t,e,u,s,n||Us(c,e));return new st(i,this._parents,t,e)}St.prototype.interrupt=Wo;St.prototype.transition=Zs;function Qs(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function Kn(t,e){return fetch(t,e).then(Qs)}function js(t,e){var n,i=1;t==null&&(t=0),e==null&&(e=0);function r(){var o,s=n.length,a,c=0,u=0;for(o=0;o<s;++o)a=n[o],c+=a.x,u+=a.y;for(c=(c/s-t)*i,u=(u/s-e)*i,o=0;o<s;++o)a=n[o],a.x-=c,a.y-=u}return r.initialize=function(o){n=o},r.x=function(o){return arguments.length?(t=+o,r):t},r.y=function(o){return arguments.length?(e=+o,r):e},r.strength=function(o){return arguments.length?(i=+o,r):i},r}function Js(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Wn(this.cover(e,n),e,n,t)}function Wn(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,o=t._root,s={data:i},a=t._x0,c=t._y0,u=t._x1,l=t._y1,h,f,d,_,v,y,g,w;if(!o)return t._root=s,t;for(;o.length;)if((v=e>=(h=(a+u)/2))?a=h:u=h,(y=n>=(f=(c+l)/2))?c=f:l=f,r=o,!(o=o[g=y<<1|v]))return r[g]=s,t;if(d=+t._x.call(null,o.data),_=+t._y.call(null,o.data),e===d&&n===_)return s.next=o,r?r[g]=s:t._root=s,t;do r=r?r[g]=new Array(4):t._root=new Array(4),(v=e>=(h=(a+u)/2))?a=h:u=h,(y=n>=(f=(c+l)/2))?c=f:l=f;while((g=y<<1|v)===(w=(_>=f)<<1|d>=h));return r[w]=o,r[g]=s,t}function ta(t){var e,n,i=t.length,r,o,s=new Array(i),a=new Array(i),c=1/0,u=1/0,l=-1/0,h=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=r,a[n]=o,r<c&&(c=r),r>l&&(l=r),o<u&&(u=o),o>h&&(h=o));if(c>l||u>h)return this;for(this.cover(c,u).cover(l,h),n=0;n<i;++n)Wn(this,s[n],a[n],t[n]);return this}function ea(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{for(var s=r-n||1,a=this._root,c,u;n>t||t>=r||i>e||e>=o;)switch(u=(e<i)<<1|t<n,c=new Array(4),c[u]=a,a=c,s*=2,u){case 0:r=n+s,o=i+s;break;case 1:n=r-s,o=i+s;break;case 2:r=n+s,i=o-s;break;case 3:n=r-s,i=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this}function na(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function ia(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function F(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function ra(t,e,n){var i,r=this._x0,o=this._y0,s,a,c,u,l=this._x1,h=this._y1,f=[],d=this._root,_,v;for(d&&f.push(new F(d,r,o,l,h)),n==null?n=1/0:(r=t-n,o=e-n,l=t+n,h=e+n,n*=n);_=f.pop();)if(!(!(d=_.node)||(s=_.x0)>l||(a=_.y0)>h||(c=_.x1)<r||(u=_.y1)<o))if(d.length){var y=(s+c)/2,g=(a+u)/2;f.push(new F(d[3],y,g,c,u),new F(d[2],s,g,y,u),new F(d[1],y,a,c,g),new F(d[0],s,a,y,g)),(v=(e>=g)<<1|t>=y)&&(_=f[f.length-1],f[f.length-1]=f[f.length-1-v],f[f.length-1-v]=_)}else{var w=t-+this._x.call(null,d.data),M=e-+this._y.call(null,d.data),m=w*w+M*M;if(m<n){var b=Math.sqrt(n=m);r=t-b,o=e-b,l=t+b,h=e+b,i=d.data}}return i}function oa(t){if(isNaN(l=+this._x.call(null,t))||isNaN(h=+this._y.call(null,t)))return this;var e,n=this._root,i,r,o,s=this._x0,a=this._y0,c=this._x1,u=this._y1,l,h,f,d,_,v,y,g;if(!n)return this;if(n.length)for(;;){if((_=l>=(f=(s+c)/2))?s=f:c=f,(v=h>=(d=(a+u)/2))?a=d:u=d,e=n,!(n=n[y=v<<1|_]))return this;if(!n.length)break;(e[y+1&3]||e[y+2&3]||e[y+3&3])&&(i=e,g=y)}for(;n.data!==t;)if(r=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,r?(o?r.next=o:delete r.next,this):e?(o?e[y]=o:delete e[y],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[g]=n:this._root=n),this):(this._root=o,this)}function sa(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function aa(){return this._root}function ua(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function ca(t){var e=[],n,i=this._root,r,o,s,a,c;for(i&&e.push(new F(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,o=n.x0,s=n.y0,a=n.x1,c=n.y1)&&i.length){var u=(o+a)/2,l=(s+c)/2;(r=i[3])&&e.push(new F(r,u,l,a,c)),(r=i[2])&&e.push(new F(r,o,l,u,c)),(r=i[1])&&e.push(new F(r,u,s,a,l)),(r=i[0])&&e.push(new F(r,o,s,u,l))}return this}function la(t){var e=[],n=[],i;for(this._root&&e.push(new F(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var r=i.node;if(r.length){var o,s=i.x0,a=i.y0,c=i.x1,u=i.y1,l=(s+c)/2,h=(a+u)/2;(o=r[0])&&e.push(new F(o,s,a,l,h)),(o=r[1])&&e.push(new F(o,l,a,c,h)),(o=r[2])&&e.push(new F(o,s,h,l,u)),(o=r[3])&&e.push(new F(o,l,h,c,u))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function fa(t){return t[0]}function ha(t){return arguments.length?(this._x=t,this):this._x}function da(t){return t[1]}function ga(t){return arguments.length?(this._y=t,this):this._y}function ze(t,e,n){var i=new Te(e??fa,n??da,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function Te(t,e,n,i,r,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function Ue(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var X=ze.prototype=Te.prototype;X.copy=function(){var t=new Te(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=Ue(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var r=0;r<4;++r)(i=e.source[r])&&(i.length?n.push({source:i,target:e.target[r]=new Array(4)}):e.target[r]=Ue(i));return t};X.add=Js;X.addAll=ta;X.cover=ea;X.data=na;X.extent=ia;X.find=ra;X.remove=oa;X.removeAll=sa;X.root=aa;X.size=ua;X.visit=ca;X.visitAfter=la;X.x=ha;X.y=ga;function lt(t){return function(){return t}}function at(t){return(t()-.5)*1e-6}function pa(t){return t.x+t.vx}function ma(t){return t.y+t.vy}function ya(t){var e,n,i,r=1,o=1;typeof t!="function"&&(t=lt(t==null?1:+t));function s(){for(var u,l=e.length,h,f,d,_,v,y,g=0;g<o;++g)for(h=ze(e,pa,ma).visitAfter(a),u=0;u<l;++u)f=e[u],v=n[f.index],y=v*v,d=f.x+f.vx,_=f.y+f.vy,h.visit(w);function w(M,m,b,E,T){var D=M.data,$=M.r,C=v+$;if(D){if(D.index>f.index){var k=d-D.x-D.vx,R=_-D.y-D.vy,L=k*k+R*R;L<C*C&&(k===0&&(k=at(i),L+=k*k),R===0&&(R=at(i),L+=R*R),L=(C-(L=Math.sqrt(L)))/L*r,f.vx+=(k*=L)*(C=($*=$)/(y+$)),f.vy+=(R*=L)*C,D.vx-=k*(C=1-C),D.vy-=R*C)}return}return m>d+C||E<d-C||b>_+C||T<_-C}}function a(u){if(u.data)return u.r=n[u.data.index];for(var l=u.r=0;l<4;++l)u[l]&&u[l].r>u.r&&(u.r=u[l].r)}function c(){if(e){var u,l=e.length,h;for(n=new Array(l),u=0;u<l;++u)h=e[u],n[h.index]=+t(h,u,e)}}return s.initialize=function(u,l){e=u,i=l,c()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(r=+u,s):r},s.radius=function(u){return arguments.length?(t=typeof u=="function"?u:lt(+u),c(),s):t},s}function va(t){return t.index}function Ze(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function _a(t){var e=va,n=h,i,r=lt(30),o,s,a,c,u,l=1;t==null&&(t=[]);function h(y){return 1/Math.min(a[y.source.index],a[y.target.index])}function f(y){for(var g=0,w=t.length;g<l;++g)for(var M=0,m,b,E,T,D,$,C;M<w;++M)m=t[M],b=m.source,E=m.target,T=E.x+E.vx-b.x-b.vx||at(u),D=E.y+E.vy-b.y-b.vy||at(u),$=Math.sqrt(T*T+D*D),$=($-o[M])/$*y*i[M],T*=$,D*=$,E.vx-=T*(C=c[M]),E.vy-=D*C,b.vx+=T*(C=1-C),b.vy+=D*C}function d(){if(s){var y,g=s.length,w=t.length,M=new Map(s.map((b,E)=>[e(b,E,s),b])),m;for(y=0,a=new Array(g);y<w;++y)m=t[y],m.index=y,typeof m.source!="object"&&(m.source=Ze(M,m.source)),typeof m.target!="object"&&(m.target=Ze(M,m.target)),a[m.source.index]=(a[m.source.index]||0)+1,a[m.target.index]=(a[m.target.index]||0)+1;for(y=0,c=new Array(w);y<w;++y)m=t[y],c[y]=a[m.source.index]/(a[m.source.index]+a[m.target.index]);i=new Array(w),_(),o=new Array(w),v()}}function _(){if(s)for(var y=0,g=t.length;y<g;++y)i[y]=+n(t[y],y,t)}function v(){if(s)for(var y=0,g=t.length;y<g;++y)o[y]=+r(t[y],y,t)}return f.initialize=function(y,g){s=y,u=g,d()},f.links=function(y){return arguments.length?(t=y,d(),f):t},f.id=function(y){return arguments.length?(e=y,f):e},f.iterations=function(y){return arguments.length?(l=+y,f):l},f.strength=function(y){return arguments.length?(n=typeof y=="function"?y:lt(+y),_(),f):n},f.distance=function(y){return arguments.length?(r=typeof y=="function"?y:lt(+y),v(),f):r},f}const xa=1664525,wa=1013904223,Qe=4294967296;function ba(){let t=1;return()=>(t=(xa*t+wa)%Qe)/Qe}function Ma(t){return t.x}function Na(t){return t.y}var Aa=10,ka=Math.PI*(3-Math.sqrt(5));function Ea(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,s=.6,a=new Map,c=ke(h),u=Et("tick","end"),l=ba();t==null&&(t=[]);function h(){f(),u.call("tick",e),n<i&&(c.stop(),u.call("end",e))}function f(v){var y,g=t.length,w;v===void 0&&(v=1);for(var M=0;M<v;++M)for(n+=(o-n)*r,a.forEach(function(m){m(n)}),y=0;y<g;++y)w=t[y],w.fx==null?w.x+=w.vx*=s:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=s:(w.y=w.fy,w.vy=0);return e}function d(){for(var v=0,y=t.length,g;v<y;++v){if(g=t[v],g.index=v,g.fx!=null&&(g.x=g.fx),g.fy!=null&&(g.y=g.fy),isNaN(g.x)||isNaN(g.y)){var w=Aa*Math.sqrt(.5+v),M=v*ka;g.x=w*Math.cos(M),g.y=w*Math.sin(M)}(isNaN(g.vx)||isNaN(g.vy))&&(g.vx=g.vy=0)}}function _(v){return v.initialize&&v.initialize(t,l),v}return d(),e={tick:f,restart:function(){return c.restart(h),e},stop:function(){return c.stop(),e},nodes:function(v){return arguments.length?(t=v,d(),a.forEach(_),e):t},alpha:function(v){return arguments.length?(n=+v,e):n},alphaMin:function(v){return arguments.length?(i=+v,e):i},alphaDecay:function(v){return arguments.length?(r=+v,e):+r},alphaTarget:function(v){return arguments.length?(o=+v,e):o},velocityDecay:function(v){return arguments.length?(s=1-v,e):1-s},randomSource:function(v){return arguments.length?(l=v,a.forEach(_),e):l},force:function(v,y){return arguments.length>1?(y==null?a.delete(v):a.set(v,_(y)),e):a.get(v)},find:function(v,y,g){var w=0,M=t.length,m,b,E,T,D;for(g==null?g=1/0:g*=g,w=0;w<M;++w)T=t[w],m=v-T.x,b=y-T.y,E=m*m+b*b,E<g&&(D=T,g=E);return D},on:function(v,y){return arguments.length>1?(u.on(v,y),e):u.on(v)}}}function Sa(){var t,e,n,i,r=lt(-30),o,s=1,a=1/0,c=.81;function u(d){var _,v=t.length,y=ze(t,Ma,Na).visitAfter(h);for(i=d,_=0;_<v;++_)e=t[_],y.visit(f)}function l(){if(t){var d,_=t.length,v;for(o=new Array(_),d=0;d<_;++d)v=t[d],o[v.index]=+r(v,d,t)}}function h(d){var _=0,v,y,g=0,w,M,m;if(d.length){for(w=M=m=0;m<4;++m)(v=d[m])&&(y=Math.abs(v.value))&&(_+=v.value,g+=y,w+=y*v.x,M+=y*v.y);d.x=w/g,d.y=M/g}else{v=d,v.x=v.data.x,v.y=v.data.y;do _+=o[v.data.index];while(v=v.next)}d.value=_}function f(d,_,v,y){if(!d.value)return!0;var g=d.x-e.x,w=d.y-e.y,M=y-_,m=g*g+w*w;if(M*M/c<m)return m<a&&(g===0&&(g=at(n),m+=g*g),w===0&&(w=at(n),m+=w*w),m<s&&(m=Math.sqrt(s*m)),e.vx+=g*d.value*i/m,e.vy+=w*d.value*i/m),!0;if(d.length||m>=a)return;(d.data!==e||d.next)&&(g===0&&(g=at(n),m+=g*g),w===0&&(w=at(n),m+=w*w),m<s&&(m=Math.sqrt(s*m)));do d.data!==e&&(M=o[d.data.index]*i/m,e.vx+=g*M,e.vy+=w*M);while(d=d.next)}return u.initialize=function(d,_){t=d,n=_,l()},u.strength=function(d){return arguments.length?(r=typeof d=="function"?d:lt(+d),l(),u):r},u.distanceMin=function(d){return arguments.length?(s=d*d,u):Math.sqrt(s)},u.distanceMax=function(d){return arguments.length?(a=d*d,u):Math.sqrt(a)},u.theta=function(d){return arguments.length?(c=d*d,u):Math.sqrt(c)},u}function za(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Qt(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function yt(t){return t=Qt(Math.abs(t)),t?t[1]:NaN}function Ta(t,e){return function(n,i){for(var r=n.length,o=[],s=0,a=t[0],c=0;r>0&&a>0&&(c+a+1>i&&(a=Math.max(1,i-c)),o.push(n.substring(r-=a,r+a)),!((c+=a+1)>i));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function Da(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Ia=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jt(t){if(!(e=Ia.exec(t)))throw new Error("invalid format: "+t);var e;return new De({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}jt.prototype=De.prototype;function De(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}De.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ca(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var Gn;function $a(t,e){var n=Qt(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(Gn=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Qt(t,Math.max(0,e+o-1))[0]}function je(t,e){var n=Qt(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const Je={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:za,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>je(t*100,e),r:je,s:$a,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function tn(t){return t}var en=Array.prototype.map,nn=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function La(t){var e=t.grouping===void 0||t.thousands===void 0?tn:Ta(en.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?tn:Da(en.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=jt(h);var f=h.fill,d=h.align,_=h.sign,v=h.symbol,y=h.zero,g=h.width,w=h.comma,M=h.precision,m=h.trim,b=h.type;b==="n"?(w=!0,b="g"):Je[b]||(M===void 0&&(M=12),m=!0,b="g"),(y||f==="0"&&d==="=")&&(y=!0,f="0",d="=");var E=v==="$"?n:v==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",T=v==="$"?i:/[%p]/.test(b)?s:"",D=Je[b],$=/[defgprs%]/.test(b);M=M===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function C(k){var R=E,L=T,p,N,x;if(b==="c")L=D(k)+L,k="";else{k=+k;var A=k<0||1/k<0;if(k=isNaN(k)?c:D(Math.abs(k),M),m&&(k=Ca(k)),A&&+k==0&&_!=="+"&&(A=!1),R=(A?_==="("?_:a:_==="-"||_==="("?"":_)+R,L=(b==="s"?nn[8+Gn/3]:"")+L+(A&&_==="("?")":""),$){for(p=-1,N=k.length;++p<N;)if(x=k.charCodeAt(p),48>x||x>57){L=(x===46?r+k.slice(p+1):k.slice(p))+L,k=k.slice(0,p);break}}}w&&!y&&(k=e(k,1/0));var z=R.length+k.length+L.length,S=z<g?new Array(g-z+1).join(f):"";switch(w&&y&&(k=e(S+k,S.length?g-L.length:1/0),S=""),d){case"<":k=R+k+L+S;break;case"=":k=R+S+k+L;break;case"^":k=S.slice(0,z=S.length>>1)+R+k+L+S.slice(z);break;default:k=S+R+k+L;break}return o(k)}return C.toString=function(){return h+""},C}function l(h,f){var d=u((h=jt(h),h.type="f",h)),_=Math.max(-8,Math.min(8,Math.floor(yt(f)/3)))*3,v=Math.pow(10,-_),y=nn[8+_/3];return function(g){return d(v*g)+y}}return{format:u,formatPrefix:l}}var $t,Un,Zn;Pa({thousands:",",grouping:[3],currency:["$",""]});function Pa(t){return $t=La(t),Un=$t.format,Zn=$t.formatPrefix,$t}function Ra(t){return Math.max(0,-yt(Math.abs(t)))}function Oa(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yt(e)/3)))*3-yt(Math.abs(t)))}function qa(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,yt(e)-yt(t))+1}function Fa(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function Xa(){return this.eachAfter(Fa)}function Ha(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this}function Ba(t,e){for(var n=this,i=[n],r,o,s=-1;n=i.pop();)if(t.call(e,n,++s,this),r=n.children)for(o=r.length-1;o>=0;--o)i.push(r[o]);return this}function Ya(t,e){for(var n=this,i=[n],r=[],o,s,a,c=-1;n=i.pop();)if(r.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)i.push(o[s]);for(;n=r.pop();)t.call(e,n,++c,this);return this}function Va(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i}function Ka(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})}function Wa(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Ga(t){for(var e=this,n=Ua(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i}function Ua(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}function Za(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Qa(){return Array.from(this)}function ja(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Ja(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*tu(){var t=this,e,n=[t],i,r,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,i=t.children)for(r=0,o=i.length;r<o;++r)n.push(i[r]);while(n.length)}function Ie(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=iu)):e===void 0&&(e=nu);for(var n=new Jt(t),i,r=[n],o,s,a,c;i=r.pop();)if((s=e(i.data))&&(c=(s=Array.from(s)).length))for(i.children=s,a=c-1;a>=0;--a)r.push(o=s[a]=new Jt(s[a])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(ou)}function eu(){return Ie(this).eachBefore(ru)}function nu(t){return t.children}function iu(t){return Array.isArray(t)?t[1]:null}function ru(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function ou(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Jt(t){this.data=t,this.depth=this.height=0,this.parent=null}Jt.prototype=Ie.prototype={constructor:Jt,count:Xa,each:Ha,eachAfter:Ya,eachBefore:Ba,find:Va,sum:Ka,sort:Wa,path:Ga,ancestors:Za,descendants:Qa,leaves:ja,links:Ja,copy:eu,[Symbol.iterator]:tu};function su(t){return t==null?null:au(t)}function au(t){if(typeof t!="function")throw new Error;return t}function rn(){return 0}function uu(t){return function(){return t}}const cu=1664525,lu=1013904223,on=4294967296;function fu(){let t=1;return()=>(t=(cu*t+lu)%on)/on}function hu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function du(t,e){let n=t.length,i,r;for(;n;)r=e()*n--|0,i=t[n],t[n]=t[r],t[r]=i;return t}function gu(t,e){for(var n=0,i=(t=du(Array.from(t),e)).length,r=[],o,s;n<i;)o=t[n],s&&Qn(s,o)?++n:(s=mu(r=pu(r,o)),n=0);return s}function pu(t,e){var n,i;if(ae(e,t))return[e];for(n=0;n<t.length;++n)if(Lt(e,t[n])&&ae(bt(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(Lt(bt(t[n],t[i]),e)&&Lt(bt(t[n],e),t[i])&&Lt(bt(t[i],e),t[n])&&ae(jn(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function Lt(t,e){var n=t.r-e.r,i=e.x-t.x,r=e.y-t.y;return n<0||n*n<i*i+r*r}function Qn(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function ae(t,e){for(var n=0;n<e.length;++n)if(!Qn(t,e[n]))return!1;return!0}function mu(t){switch(t.length){case 1:return yu(t[0]);case 2:return bt(t[0],t[1]);case 3:return jn(t[0],t[1],t[2])}}function yu(t){return{x:t.x,y:t.y,r:t.r}}function bt(t,e){var n=t.x,i=t.y,r=t.r,o=e.x,s=e.y,a=e.r,c=o-n,u=s-i,l=a-r,h=Math.sqrt(c*c+u*u);return{x:(n+o+c/h*l)/2,y:(i+s+u/h*l)/2,r:(h+r+a)/2}}function jn(t,e,n){var i=t.x,r=t.y,o=t.r,s=e.x,a=e.y,c=e.r,u=n.x,l=n.y,h=n.r,f=i-s,d=i-u,_=r-a,v=r-l,y=c-o,g=h-o,w=i*i+r*r-o*o,M=w-s*s-a*a+c*c,m=w-u*u-l*l+h*h,b=d*_-f*v,E=(_*m-v*M)/(b*2)-i,T=(v*y-_*g)/b,D=(d*M-f*m)/(b*2)-r,$=(f*g-d*y)/b,C=T*T+$*$-1,k=2*(o+E*T+D*$),R=E*E+D*D-o*o,L=-(Math.abs(C)>1e-6?(k+Math.sqrt(k*k-4*C*R))/(2*C):R/k);return{x:i+E+T*L,y:r+D+$*L,r:L}}function sn(t,e,n){var i=t.x-e.x,r,o,s=t.y-e.y,a,c,u=i*i+s*s;u?(o=e.r+n.r,o*=o,c=t.r+n.r,c*=c,o>c?(r=(u+c-o)/(2*u),a=Math.sqrt(Math.max(0,c/u-r*r)),n.x=t.x-r*i-a*s,n.y=t.y-r*s+a*i):(r=(u+o-c)/(2*u),a=Math.sqrt(Math.max(0,o/u-r*r)),n.x=e.x+r*i-a*s,n.y=e.y+r*s+a*i)):(n.x=e.x+n.r,n.y=e.y)}function an(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function un(t){var e=t._,n=t.next._,i=e.r+n.r,r=(e.x*n.r+n.x*e.r)/i,o=(e.y*n.r+n.y*e.r)/i;return r*r+o*o}function Pt(t){this._=t,this.next=null,this.previous=null}function vu(t,e){if(!(o=(t=hu(t)).length))return 0;var n,i,r,o,s,a,c,u,l,h,f;if(n=t[0],n.x=0,n.y=0,!(o>1))return n.r;if(i=t[1],n.x=-i.r,i.x=n.r,i.y=0,!(o>2))return n.r+i.r;sn(i,n,r=t[2]),n=new Pt(n),i=new Pt(i),r=new Pt(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;t:for(c=3;c<o;++c){sn(n._,i._,r=t[c]),r=new Pt(r),u=i.next,l=n.previous,h=i._.r,f=n._.r;do if(h<=f){if(an(u._,r._)){i=u,n.next=i,i.previous=n,--c;continue t}h+=u._.r,u=u.next}else{if(an(l._,r._)){n=l,n.next=i,i.previous=n,--c;continue t}f+=l._.r,l=l.previous}while(u!==l.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=un(n);(r=r.next)!==i;)(a=un(r))<s&&(n=r,s=a);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=gu(n,e),c=0;c<o;++c)n=t[c],n.x-=r.x,n.y-=r.y;return r.r}function _u(t){return Math.sqrt(t.value)}function xu(){var t=null,e=1,n=1,i=rn;function r(o){const s=fu();return o.x=e/2,o.y=n/2,t?o.eachBefore(cn(t)).eachAfter(ue(i,.5,s)).eachBefore(ln(1)):o.eachBefore(cn(_u)).eachAfter(ue(rn,1,s)).eachAfter(ue(i,o.r/Math.min(e,n),s)).eachBefore(ln(Math.min(e,n)/(2*o.r))),o}return r.radius=function(o){return arguments.length?(t=su(o),r):t},r.size=function(o){return arguments.length?(e=+o[0],n=+o[1],r):[e,n]},r.padding=function(o){return arguments.length?(i=typeof o=="function"?o:uu(+o),r):i},r}function cn(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function ue(t,e,n){return function(i){if(r=i.children){var r,o,s=r.length,a=t(i)*e||0,c;if(a)for(o=0;o<s;++o)r[o].r+=a;if(c=vu(r,n),a)for(o=0;o<s;++o)r[o].r-=a;i.r=c+a}}}function ln(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Jn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function wu(t){return function(){return t}}function bu(t){return+t}var fn=[0,1];function j(t){return t}function _e(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:wu(isNaN(e)?NaN:.5)}function Mu(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function Nu(t,e,n){var i=t[0],r=t[1],o=e[0],s=e[1];return r<i?(i=_e(r,i),o=n(s,o)):(i=_e(i,r),o=n(o,s)),function(a){return o(i(a))}}function Au(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=_e(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var c=di(t,a,1,i)-1;return o[c](r[c](a))}}function ti(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ei(){var t=fn,e=fn,n=Ne,i,r,o,s=j,a,c,u;function l(){var f=Math.min(t.length,e.length);return s!==j&&(s=Mu(t[0],t[f-1])),a=f>2?Au:Nu,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?o:(c||(c=a(t.map(i),e,n)))(i(s(f)))}return h.invert=function(f){return s(r((u||(u=a(e,t.map(i),G)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,bu),l()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),l()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=Io,l()},h.clamp=function(f){return arguments.length?(s=f?!0:j,l()):s!==j},h.interpolate=function(f){return arguments.length?(n=f,l()):n},h.unknown=function(f){return arguments.length?(o=f,h):o},function(f,d){return i=f,r=d,l()}}function ku(){return ei()(j,j)}function Eu(t,e,n,i){var r=vi(t,e,n),o;switch(i=jt(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=Oa(r,s))&&(i.precision=o),Zn(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=qa(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=Ra(r))&&(i.precision=o-(i.type==="%")*2);break}}return Un(i)}function ni(t){var e=t.domain;return t.ticks=function(n){var i=e();return yi(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return Eu(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,o=i.length-1,s=i[r],a=i[o],c,u,l=10;for(a<s&&(u=s,s=a,a=u,u=r,r=o,o=u);l-- >0;){if(u=le(s,a,n),u===c)return i[r]=s,i[o]=a,e(i);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;c=u}return t},t}function ii(){var t=ku();return t.copy=function(){return ti(t,ii())},Jn.apply(t,arguments),ni(t)}function hn(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Su(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function zu(t){return t<0?-t*t:t*t}function Tu(t){var e=t(j,j),n=1;function i(){return n===1?t(j,j):n===.5?t(Su,zu):t(hn(n),hn(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},ni(e)}function ri(){var t=Tu(ei());return t.copy=function(){return ti(t,ri()).exponent(t.exponent())},Jn.apply(t,arguments),t}function Du(){return ri.apply(null,arguments).exponent(.5)}const Rt=t=>()=>t;function Iu(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function ot(t,e,n){this.k=t,this.x=e,this.y=n}ot.prototype={constructor:ot,scale:function(t){return t===1?this:new ot(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ot(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var oi=new ot(1,0,0);ot.prototype;function ce(t){t.stopImmediatePropagation()}function _t(t){t.preventDefault(),t.stopImmediatePropagation()}function Cu(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function $u(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function dn(){return this.__zoom||oi}function Lu(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Pu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ru(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Ou(){var t=Cu,e=$u,n=Ru,i=Lu,r=Pu,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=qn,u=Et("start","zoom","end"),l,h,f,d=500,_=150,v=0,y=10;function g(p){p.property("__zoom",dn).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",C).filter(r).on("touchstart.zoom",k).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(p,N,x,A){var z=p.selection?p.selection():p;z.property("__zoom",dn),p!==z?b(p,N,x,A):z.interrupt().each(function(){E(this,arguments).event(A).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},g.scaleBy=function(p,N,x,A){g.scaleTo(p,function(){var z=this.__zoom.k,S=typeof N=="function"?N.apply(this,arguments):N;return z*S},x,A)},g.scaleTo=function(p,N,x,A){g.transform(p,function(){var z=e.apply(this,arguments),S=this.__zoom,I=x==null?m(z):typeof x=="function"?x.apply(this,arguments):x,P=S.invert(I),O=typeof N=="function"?N.apply(this,arguments):N;return n(M(w(S,O),I,P),z,s)},x,A)},g.translateBy=function(p,N,x,A){g.transform(p,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof x=="function"?x.apply(this,arguments):x),e.apply(this,arguments),s)},null,A)},g.translateTo=function(p,N,x,A,z){g.transform(p,function(){var S=e.apply(this,arguments),I=this.__zoom,P=A==null?m(S):typeof A=="function"?A.apply(this,arguments):A;return n(oi.translate(P[0],P[1]).scale(I.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof x=="function"?-x.apply(this,arguments):-x),S,s)},A,z)};function w(p,N){return N=Math.max(o[0],Math.min(o[1],N)),N===p.k?p:new ot(N,p.x,p.y)}function M(p,N,x){var A=N[0]-x[0]*p.k,z=N[1]-x[1]*p.k;return A===p.x&&z===p.y?p:new ot(p.k,A,z)}function m(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function b(p,N,x,A){p.on("start.zoom",function(){E(this,arguments).event(A).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(A).end()}).tween("zoom",function(){var z=this,S=arguments,I=E(z,S).event(A),P=e.apply(z,S),O=x==null?m(P):typeof x=="function"?x.apply(z,S):x,Q=Math.max(P[1][0]-P[0][0],P[1][1]-P[0][1]),q=z.__zoom,K=typeof N=="function"?N.apply(z,S):N,et=c(q.invert(O).concat(Q/q.k),K.invert(O).concat(Q/K.k));return function(W){if(W===1)W=K;else{var nt=et(W),ie=Q/nt[2];W=new ot(ie,O[0]-nt[0]*ie,O[1]-nt[1]*ie)}I.zoom(null,W)}})}function E(p,N,x){return!x&&p.__zooming||new T(p,N)}function T(p,N){this.that=p,this.args=N,this.active=0,this.sourceEvent=null,this.extent=e.apply(p,N),this.taps=0}T.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,N){return this.mouse&&p!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var N=Y(this.that).datum();u.call(p,this.that,new Iu(p,{sourceEvent:this.sourceEvent,target:g,type:p,transform:this.that.__zoom,dispatch:u}),N)}};function D(p,...N){if(!t.apply(this,arguments))return;var x=E(this,N).event(p),A=this.__zoom,z=Math.max(o[0],Math.min(o[1],A.k*Math.pow(2,i.apply(this,arguments)))),S=rt(p);if(x.wheel)(x.mouse[0][0]!==S[0]||x.mouse[0][1]!==S[1])&&(x.mouse[1]=A.invert(x.mouse[0]=S)),clearTimeout(x.wheel);else{if(A.k===z)return;x.mouse=[S,A.invert(S)],Ht(this),x.start()}_t(p),x.wheel=setTimeout(I,_),x.zoom("mouse",n(M(w(A,z),x.mouse[0],x.mouse[1]),x.extent,s));function I(){x.wheel=null,x.end()}}function $(p,...N){if(f||!t.apply(this,arguments))return;var x=p.currentTarget,A=E(this,N,!0).event(p),z=Y(p.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",Q,!0),S=rt(p,x),I=p.clientX,P=p.clientY;Dn(p.view),ce(p),A.mouse=[S,this.__zoom.invert(S)],Ht(this),A.start();function O(q){if(_t(q),!A.moved){var K=q.clientX-I,et=q.clientY-P;A.moved=K*K+et*et>v}A.event(q).zoom("mouse",n(M(A.that.__zoom,A.mouse[0]=rt(q,x),A.mouse[1]),A.extent,s))}function Q(q){z.on("mousemove.zoom mouseup.zoom",null),In(q.view,A.moved),_t(q),A.event(q).end()}}function C(p,...N){if(t.apply(this,arguments)){var x=this.__zoom,A=rt(p.changedTouches?p.changedTouches[0]:p,this),z=x.invert(A),S=x.k*(p.shiftKey?.5:2),I=n(M(w(x,S),A,z),e.apply(this,N),s);_t(p),a>0?Y(this).transition().duration(a).call(b,I,A,p):Y(this).call(g.transform,I,A,p)}}function k(p,...N){if(t.apply(this,arguments)){var x=p.touches,A=x.length,z=E(this,N,p.changedTouches.length===A).event(p),S,I,P,O;for(ce(p),I=0;I<A;++I)P=x[I],O=rt(P,this),O=[O,this.__zoom.invert(O),P.identifier],z.touch0?!z.touch1&&z.touch0[2]!==O[2]&&(z.touch1=O,z.taps=0):(z.touch0=O,S=!0,z.taps=1+!!l);l&&(l=clearTimeout(l)),S&&(z.taps<2&&(h=O[0],l=setTimeout(function(){l=null},d)),Ht(this),z.start())}}function R(p,...N){if(this.__zooming){var x=E(this,N).event(p),A=p.changedTouches,z=A.length,S,I,P,O;for(_t(p),S=0;S<z;++S)I=A[S],P=rt(I,this),x.touch0&&x.touch0[2]===I.identifier?x.touch0[0]=P:x.touch1&&x.touch1[2]===I.identifier&&(x.touch1[0]=P);if(I=x.that.__zoom,x.touch1){var Q=x.touch0[0],q=x.touch0[1],K=x.touch1[0],et=x.touch1[1],W=(W=K[0]-Q[0])*W+(W=K[1]-Q[1])*W,nt=(nt=et[0]-q[0])*nt+(nt=et[1]-q[1])*nt;I=w(I,Math.sqrt(W/nt)),P=[(Q[0]+K[0])/2,(Q[1]+K[1])/2],O=[(q[0]+et[0])/2,(q[1]+et[1])/2]}else if(x.touch0)P=x.touch0[0],O=x.touch0[1];else return;x.zoom("touch",n(M(I,P,O),x.extent,s))}}function L(p,...N){if(this.__zooming){var x=E(this,N).event(p),A=p.changedTouches,z=A.length,S,I;for(ce(p),f&&clearTimeout(f),f=setTimeout(function(){f=null},d),S=0;S<z;++S)I=A[S],x.touch0&&x.touch0[2]===I.identifier?delete x.touch0:x.touch1&&x.touch1[2]===I.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(I=rt(I,this),Math.hypot(h[0]-I[0],h[1]-I[1])<y)){var P=Y(this).on("dblclick.zoom");P&&P.apply(this,arguments)}}}return g.wheelDelta=function(p){return arguments.length?(i=typeof p=="function"?p:Rt(+p),g):i},g.filter=function(p){return arguments.length?(t=typeof p=="function"?p:Rt(!!p),g):t},g.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:Rt(!!p),g):r},g.extent=function(p){return arguments.length?(e=typeof p=="function"?p:Rt([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),g):e},g.scaleExtent=function(p){return arguments.length?(o[0]=+p[0],o[1]=+p[1],g):[o[0],o[1]]},g.translateExtent=function(p){return arguments.length?(s[0][0]=+p[0][0],s[1][0]=+p[1][0],s[0][1]=+p[0][1],s[1][1]=+p[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(p){return arguments.length?(n=p,g):n},g.duration=function(p){return arguments.length?(a=+p,g):a},g.interpolate=function(p){return arguments.length?(c=p,g):c},g.on=function(){var p=u.on.apply(u,arguments);return p===u?g:p},g.clickDistance=function(p){return arguments.length?(v=(p=+p)*p,g):Math.sqrt(v)},g.tapDistance=function(p){return arguments.length?(y=+p,g):y},g}const qu="data/circle_packing_data.json",gn="circle-packing-plot",Fu="circle-packing-title",Xu="circle-packing-text",pn="#f4efda",Hu="#9e2846",Bu="#000000",Yu=3,Vu=5,Ku=100,Wu="",Gu={"1-2":"Division 1-2",3:"Division 3",4:"Division 4",5:"Division 5",6:"Division 6",7:"Division 7","7-8":"Division 7-8",9:"Division 9",10:"Division 10",11:"Division 11",12:"Division 12",13:"Division 13",14:"Division 14",15:"Division 15",16:"Division 16",17:"Division 17",18:"Division 18",19:"Division 19",20:"Division 20"},Uu="Cliquez sur les diffrentes sections du diagramme pour explorer ces relations en dtail. Vous dcouvrirez comment la diversit des origines et des professions a contribu  la richesse et  la complexit de Lausanne au XIX<sup>me</sup> sicle, et comment ces facteurs ont jou un rle dterminant dans la formation des communauts urbaines.",Zu={"1-2":"Division 1-2",3:"Division 3",4:"Division 4",5:"Division 5",6:"Division 6",7:"Division 7","7-8":"Division 7-8",9:"Division 9",10:"Division 10",11:"Division 11",12:"Division 12",13:"Division 13",14:"Division 14",15:"Division 15",16:"Division 16",17:"Division 17",18:"Division 18",19:"Division 19",20:"Division 20"};class Qu{constructor(){B(this,"data");B(this,"width");B(this,"height");this.loadData().then(()=>{this.initDimensions(),this.initPacking()})}async loadData(){return new Promise(e=>{Kn(qu).then(n=>{this.data=n,e()})})}initDimensions(){const e=document.getElementById(gn);if(e){const n=Math.min(e.clientWidth,e.clientHeight);this.width=n,this.height=n}}initPacking(){const n=(f=>xu().size([this.width,this.height]).padding(Yu)(Ie(f).sum(d=>d.value).sort((d,_)=>_.value-d.value)))(this.data);let i=n;const r=ii().domain([0,1]).range([pn,Hu]),o=Du().domain([xi(n.descendants(),f=>f.r),_i(n.descendants(),f=>f.r)]).range([Vu,Ku]),s=Y(`#${gn}`).append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox",`-${this.width/2} -${this.height/2} ${this.width} ${this.height}`).style("display","block").style("background",r(0)).style("cursor","pointer").on("click",f=>h(f,n)),a=s.append("g").selectAll("circle").data(n.descendants().slice(1)).join("circle").attr("fill",f=>f.children?r(f.depth):pn).attr("pointer-events",f=>f.children?null:"none").on("mouseover",function(){Y(this).attr("stroke",Bu)}).on("mouseout",function(){Y(this).attr("stroke",null)}).on("click",(f,d)=>i!==d&&(h(f,d),f.stopPropagation())),c=s.append("g").style("font-family","var(--default-font-family)").attr("pointer-events","none").attr("text-anchor","middle").selectAll("text").data(n.descendants()).join("text").attr("dy","0.3em").style("font-size",f=>`${o(f.r)}px`).style("fill-opacity",f=>f.parent===n?1:0).style("display",f=>f.parent===n?"inline":"none").text(f=>f.data.name);let u;const l=f=>{const d=this.width/f[2];u=f,c.attr("transform",_=>`translate(${(_.x-f[0])*d},${(_.y-f[1])*d})`),a.attr("transform",_=>`translate(${(_.x-f[0])*d},${(_.y-f[1])*d})`),a.attr("r",_=>_.r*d)};l([n.x,n.y,n.r*2]);function h(f,d){const _=document.getElementById(Fu);if(_){const g=Gu[d.data.name]||Wu;_.innerHTML=g}const v=document.getElementById(Xu);if(v){const g=Zu[d.data.name]||Uu;v.innerHTML=g}i=d;const y=s.transition().duration(f.altKey?7500:750).tween("zoom",()=>{const g=qn(u,[i.x,i.y,i.r*2]);return w=>l(g(w))});c.filter(function(g){return g.parent===i||this.style.display==="inline"}).transition(y).style("fill-opacity",g=>g.parent===i?1:0).on("start",function(g){g.parent===i&&(this.style.display="inline")}).on("end",function(g){g.parent!==i&&(this.style.display="none")})}}}document.addEventListener("DOMContentLoaded",()=>{new Qu});const mn=2e3;document.addEventListener("DOMContentLoaded",()=>{function t(s){const a=s.getBoundingClientRect(),c=window.innerHeight||document.documentElement.clientHeight,u=window.innerWidth||document.documentElement.clientWidth;return a.top>=0&&a.left>=0&&a.bottom<=c+1&&a.right<=u+1}function e(s,a){const c=window.pageYOffset,u=s.getBoundingClientRect().top,l=performance.now();function h(f){const d=f-l,_=Math.min(d/a,1);window.scrollTo({top:c+u*n(_)}),d<a&&window.requestAnimationFrame(h)}window.requestAnimationFrame(h)}function n(s){return s<.5?2*s*s:-1+(4-2*s)*s}function i(s){return s.deltaY>0?"down":"up"}function r(s){s.preventDefault();const a=["title-container","p1-container","p2-container","p3-container","p4-container","p5-container","p6-container","p7-container","final-container"];for(let c=0;c<a.length;c++){const u=c>=1?document.getElementById(a[c-1]):null,l=document.getElementById(a[c]),h=c<a.length-1?document.getElementById(a[c+1]):null;u&&t(l)&&i(s)==="up"&&e(u,mn),h&&t(l)&&i(s)==="down"&&e(h,mn)}}document.addEventListener("wheel",r,{passive:!1}),document.addEventListener("touchmove",r,{passive:!1});const o=document.getElementById("title-container");e(o,0)});const ju="data/networks",Ju="road_vocation_data",tc="vocation",ec="#network-graph",nc="network-chart",ic="#network-title",rc="#network-text",oc="#979487",yn="#aaaaaa",sc={road_vocation_data:{road:"#289e61",vocation:"#9e2846"},bipartite_division_type_metiers:{division:"#289e61",job_category:"#9e2846"},bipartite_origine_category_type_metiers:{origine_category:"#289e61",job_category:"#9e2846"},bipartite_street_type_metiers:{street:"#289e61",job_category:"#9e2846"},bipartite_rue_origines:{street:"#289e61",origine_category:"#9e2846"},bipartite_divisions_origines:{division:"#289e61",origine_category:"#9e2846"}},ac={road_vocation_data:{title:"Vocations Voisines",text:"Ce premier graphe tisse un lien entre les vocations et les rues. Chaque mtier est connect  une rue, la taille de chaque nud refltant le nombre de personnes concernes. Les liens entre les rues et les mtiers mettent en lumire des proximits intressantes : par exemple, les rues de <i>Chavannes</i> et de <i>La Sallaz</i> se retrouvent proches dans notre graphe, illustrant la forte prsence de paysans parmi leurs habitants, comme l'indiquent les liens avec les nuds 'laboureur' et 'fermier'. De plus, des rues gographiquement voisines comme <i>Rue Saint Franois</i> et <i>Place Saint Franois</i> se retrouvent galement proches dans notre rseau, rvlant une similarit dans la composition professionnelle de leurs rsidents."},bipartite_division_type_metiers:{title:"Mtiers Mapps",text:"Ce graphe met en lumire les liens entre les divisions de la ville de Lausanne et les classes de mtiers. Il offre une vue claire sur la rpartition des professions  travers la ville. Par exemple, il est vident que la majorit des rentiers proviennent des divisions 17 et 1-2, qui correspondent respectivement  la campagne vers le sud de Lausanne et au quartier de Marterey et ses environs."},bipartite_origine_category_type_metiers:{title:"Origines Occupes",text:"Cete visualization dvoile les interactions entre les classes d'origine et les classes de vocations On observe une distribution plutt homogne des mtiers pour chaque origine. Par ailleurs, Yverdon se distingue par une plus grande concentration de constructeurs et d'artisans. Le Lavaux, rgion connue pour son paysage viticole et agricole, prsente une majorit de personnes engages dans l'agriculture."},bipartite_street_type_metiers:{title:"Rues Rvles",text:"Ce graphe lie les classes de mtiers aux rues, offrant une perspective encore plus granulaire de la vie  Lausanne au XIX<sup>me</sup> sicle. Certaines petites rues prsentent une faible diversit de vocations, comme Vidy, Paleyres, et Petit Ouchy, o prdomine l'agriculture en priphrie de la ville."},bipartite_rue_origines:{title:"Rues Racines",text:"Cette nouvelle visualisation lie les rues de Lausanne  leurs classes d'origine, offrant une comprhension encore plus nuance des dynamiques sociales de la ville. Chaque rue se voit attribuer un spectre d'origines, rvlant la diversit et la complexit de la composition dmographique de la ville. De cette manire, on peut mieux apprcier l'histoire multiculturelle de Lausanne, o chaque rue porte en elle les traces de nombreuses origines diffrentes, formant un patchwork unique de cultures et de traditions."},bipartite_divisions_origines:{title:"Origines Organises",text:"Cette dernire visualisation tablit un lien direct entre les divisions de la ville et les origines de ses habitants. Elle offre une vue panoramique de la diversit culturelle, illustrant comment les diffrentes origines ont contribu  la formation de chaque division.  travers ce graphe, nous pouvons voir comment Lausanne, mme  cette poque, tait un creuset de cultures, o chaque division a t faonne par une mosaque d'origines diffrentes, contribuant  l'identit unique de la ville."}},uc=.1,cc=10;class lc{constructor(e=.7,n=.7,i=.1,r=7,o=40,s=1,a=8,c=5,u=5,l=5,h=-700,f=2,d=200){B(this,"svg");B(this,"gnodes");B(this,"glinks");B(this,"simulation");B(this,"data");B(this,"container");B(this,"dragActive",!1);B(this,"networkName",tc);B(this,"linkedById");this.expNodeSizeScale=e,this.expLinkWeightScale=n,this.transparency=i,this.minNodeSize=r,this.maxNodeSize=o,this.minLinkWeight=s,this.maxLinkWeight=a,this.labelSizeAdd=c,this.nodeSizeInc=u,this.labelSizeInc=l,this.chargeStrength=h,this.collideSizeAdd=f,this.transitionDuration=d,this.initDimensions(),this.initStaticElements(),this.initEvents(),this.updatePlot(Ju)}async loadData(e){const n=`${ju}/${e}.json`;return new Promise(i=>{Kn(n).then(r=>{i(r)})})}initDimensions(){this.container=Y(ec);const e=document.getElementById(nc);e&&(this.width=e.clientWidth,this.height=e.clientHeight)}initStaticElements(){this.svg=this.container.append("svg").attr("width",this.width).attr("height",this.height),this.glinks=this.svg.append("g").attr("class","links"),this.gnodes=this.svg.append("g").attr("class","nodes")}initEvents(){const e=document.getElementById("graph-selector");e&&e.addEventListener("change",n=>{const i=n.target.value;this.updatePlot(i)})}get_scaled_size(e,n,i,r,o){return i-n==0?(r+o)/2:r+(e-n)*(o-r)/(i-n)}isConnected(e,n){return this.linkedById[e].indexOf(n)>-1||this.linkedById[n].indexOf(e)>-1||e==n}drag(e){const n=o=>{this.dragActive=!0,o.active||e.alphaTarget(.3).restart(),o.subject.fx=o.subject.x,o.subject.fy=o.subject.y},i=o=>{o.subject.fx=o.x,o.subject.fy=o.y},r=o=>{this.dragActive=!1,o.active||e.alphaTarget(0),o.subject.fx=null,o.subject.fy=null};return uo().on("start",n).on("drag",i).on("end",r)}initData(){let e=this.data.nodes.reduce((o,s)=>Math.max(o,s.size),0),n=this.data.nodes.reduce((o,s)=>Math.min(o,s.size),1/0);e=Math.pow(e,this.expNodeSizeScale),n=Math.pow(n,this.expNodeSizeScale),this.data.nodes.forEach(o=>o.size=this.get_scaled_size(Math.pow(o.size,this.expNodeSizeScale),n,e,this.minNodeSize,this.maxNodeSize));let i=this.data.links.reduce((o,s)=>Math.max(o,s.weight),0),r=this.data.links.reduce((o,s)=>Math.min(o,s.weight),1/0);i=Math.pow(i,this.expLinkWeightScale),r=Math.pow(r,this.expLinkWeightScale),this.data.links.forEach(o=>o.weight=this.get_scaled_size(Math.pow(o.weight,this.expLinkWeightScale),r,i,this.minLinkWeight,this.maxLinkWeight)),this.linkedById={},this.data.links.forEach(o=>{this.linkedById[o.source]=[],this.linkedById[o.target]=[]}),this.data.links.forEach(o=>{this.linkedById[o.source].push(o.target),this.linkedById[o.target].push(o.source)})}createLinks(){this.glinks.attr("stroke",oc).attr("stroke-opacity",1).selectAll("line").data(this.data.links).enter().append("line").attr("stroke-width",function(e){return e.weight})}createNodes(){const e=this.gnodes.selectAll(".node").data(this.data.nodes).enter().append("g").attr("class","node");e.append("circle").attr("class","node-circle").attr("r",function(n){return n.size}).attr("fill",n=>{const i=sc[this.networkName],r=i?i[n.type]:yn;return r||yn}).call(this.drag(this.simulation)).on("mouseover",(n,i)=>{if(this.dragActive)return;const r=i.id;this.gnodes.selectAll(".node-circle").transition().duration(this.transitionDuration).attr("fill-opacity",o=>this.isConnected(r,o.id)||o.id==r?1:this.transparency).attr("r",o=>{if(o.id==r)return o.size+this.nodeSizeInc;if(this.isConnected(r,o.id)){let s=this.data.links.find(h=>h.source.id==o.id&&h.target.id==r||h.source.id==r&&h.target.id==o.id).weight;this.linkedById[r];const a=this.data.links.filter(h=>h.source.id==r||h.target.id==r),c=a.reduce((h,f)=>Math.min(h,f.weight),1/0),u=a.reduce((h,f)=>Math.max(h,f.weight),-1/0);return this.get_scaled_size(s,c,u,this.minNodeSize,this.maxNodeSize)}return o.size}),this.glinks.selectAll("line").transition().duration(this.transitionDuration).attr("stroke-opacity",o=>o.source.id==r||o.target.id==r?1:this.transparency),this.gnodes.selectAll(".node-text").transition().duration(this.transitionDuration).attr("fill-opacity",o=>this.isConnected(r,o.id)||o.id==r?1:this.transparency).attr("font-size",o=>{if(o.id==r)return o.size+this.labelSizeInc+this.labelSizeAdd;if(this.isConnected(r,o.id)){let s=this.data.links.find(h=>h.source.id==o.id&&h.target.id==r||h.source.id==r&&h.target.id==o.id).weight;this.linkedById[r];const a=this.data.links.filter(h=>h.source.id==r||h.target.id==r),c=a.reduce((h,f)=>Math.min(h,f.weight),1/0),u=a.reduce((h,f)=>Math.max(h,f.weight),-1/0);return this.get_scaled_size(s,c,u,this.minNodeSize,this.maxNodeSize)+this.labelSizeAdd}return o.size+this.labelSizeAdd})}).on("mouseout",n=>{this.dragActive||(this.gnodes.selectAll(".node-circle").transition().duration(this.transitionDuration).attr("fill-opacity",1).attr("r",function(i){return i.size}),this.glinks.selectAll("line").transition().duration(this.transitionDuration).attr("stroke-opacity",1),this.gnodes.selectAll(".node-text").transition().duration(this.transitionDuration).attr("fill-opacity",1).attr("font-size",i=>i.size+this.labelSizeAdd))}),e.append("text").attr("class","node-text").text(function(n){return n.label}).attr("font-size",n=>n.size+this.labelSizeAdd).attr("font-family","sans-serif").attr("font-weight","bold").attr("text-anchor","middle").attr("alignment-baseline","middle").style("pointer-events","none")}initZoom(){const e=Ou().scaleExtent([uc,cc]).on("zoom",({transform:n})=>{this.gnodes.attr("transform",n),this.glinks.attr("transform",n)});this.svg.call(e)}initSimulation(){this.simulation=Ea().force("link",_a().id(function(n){return n.id})).force("charge",Sa().strength(this.chargeStrength)).force("center",js(this.width/2,this.height/2)).force("collide",ya().radius(n=>n.size+this.collideSizeAdd));const e=()=>{this.glinks.selectAll("line").attr("x1",n=>n.source.x).attr("y1",n=>n.source.y).attr("x2",n=>n.target.x).attr("y2",n=>n.target.y),this.gnodes.selectAll(".node-circle").attr("cx",n=>n.x).attr("cy",n=>n.y),this.gnodes.selectAll(".node-text").attr("x",n=>n.x+10).attr("y",n=>n.y+4).attr("dx",-9).attr("dy",".1em")};this.simulation.nodes(this.data.nodes).on("tick",e),this.simulation.force("link").links(this.data.links)}async updatePlot(e){return new Promise(n=>{this.loadData(e).then(i=>{this.networkName=e,this.deletePlot(),this.data=i,this.initData(),this.initSimulation(),this.createLinks(),this.createNodes(),this.initZoom();const r=document.querySelector(ic),o=document.querySelector(rc),s=ac[e];r&&o&&(r.innerHTML=s.title,o.innerHTML=s.text)}),n()})}deletePlot(){this.gnodes.selectAll("*").remove(),this.glinks.selectAll("*").remove()}}document.addEventListener("DOMContentLoaded",()=>{console.log("Loading networks..."),new lc,console.log("Networks loaded.")});
