var oo=Object.defineProperty;var ao=(t,n,e)=>n in t?oo(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var J=(t,n,e)=>(ao(t,typeof n!="symbol"?n+"":n,e),e);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function yn(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function so(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function nr(t){let n,e,i;t.length!==2?(n=yn,e=(s,l)=>yn(t(s),l),i=(s,l)=>t(s)-l):(n=t===yn||t===so?t:uo,e=t,i=t);function r(s,l,u=0,c=s.length){if(u<c){if(n(l,l)!==0)return c;do{const h=u+c>>>1;e(s[h],l)<0?u=h+1:c=h}while(u<c)}return u}function o(s,l,u=0,c=s.length){if(u<c){if(n(l,l)!==0)return c;do{const h=u+c>>>1;e(s[h],l)<=0?u=h+1:c=h}while(u<c)}return u}function a(s,l,u=0,c=s.length){const h=r(s,l,u,c-1);return h>u&&i(s[h-1],l)>-i(s[h],l)?h-1:h}return{left:r,center:a,right:o}}function uo(){return 0}function lo(t){return t===null?NaN:+t}const co=nr(yn),fo=co.right;nr(lo).center;const ho=fo;class Nt{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=e[r],a=n+o,s=Math.abs(n)<Math.abs(o)?n-(a-o):o-(a-n);s&&(e[i++]=s),n=a}return e[i]=n,this._n=i+1,this}valueOf(){const n=this._partials;let e=this._n,i,r,o,a=0;if(e>0){for(a=n[--e];e>0&&(i=a,r=n[--e],a=i+r,o=r-(a-i),!o););e>0&&(o<0&&n[e-1]<0||o>0&&n[e-1]>0)&&(r=o*2,i=a+r,r==i-a&&(a=i))}return a}}const po=Math.sqrt(50),go=Math.sqrt(10),mo=Math.sqrt(2);function Sn(t,n,e){const i=(n-t)/Math.max(0,e),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=po?10:o>=go?5:o>=mo?2:1;let s,l,u;return r<0?(u=Math.pow(10,-r)/a,s=Math.round(t*u),l=Math.round(n*u),s/u<t&&++s,l/u>n&&--l,u=-u):(u=Math.pow(10,r)*a,s=Math.round(t/u),l=Math.round(n/u),s*u<t&&++s,l*u>n&&--l),l<s&&.5<=e&&e<2?Sn(t,n,e*2):[s,l,u]}function vo(t,n,e){if(n=+n,t=+t,e=+e,!(e>0))return[];if(t===n)return[t];const i=n<t,[r,o,a]=i?Sn(n,t,e):Sn(t,n,e);if(!(o>=r))return[];const s=o-r+1,l=new Array(s);if(i)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(r+u)/-a;else for(let u=0;u<s;++u)l[u]=(r+u)*a;return l}function ae(t,n,e){return n=+n,t=+t,e=+e,Sn(t,n,e)[2]}function yo(t,n,e){n=+n,t=+t,e=+e;const i=n<t,r=i?ae(n,t,e):ae(t,n,e);return(i?-1:1)*(r<0?1/-r:r)}function _o(t,n){let e;if(n===void 0)for(const i of t)i!=null&&(e<i||e===void 0&&i>=i)&&(e=i);else{let i=-1;for(let r of t)(r=n(r,++i,t))!=null&&(e<r||e===void 0&&r>=r)&&(e=r)}return e}function xo(t,n){let e;if(n===void 0)for(const i of t)i!=null&&(e>i||e===void 0&&i>=i)&&(e=i);else{let i=-1;for(let r of t)(r=n(r,++i,t))!=null&&(e>r||e===void 0&&r>=r)&&(e=r)}return e}function*wo(t){for(const n of t)yield*n}function er(t){return Array.from(wo(t))}var Mo={value:()=>{}};function en(){for(var t=0,n=arguments.length,e={},i;t<n;++t){if(!(i=arguments[t]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new _n(e)}function _n(t){this._=t}function Eo(t,n){return t.trim().split(/^|\s+/).map(function(e){var i="",r=e.indexOf(".");if(r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}_n.prototype=en.prototype={constructor:_n,on:function(t,n){var e=this._,i=Eo(t+"",e),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(t=i[o]).type)&&(r=So(e[r],t.name)))return r;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<a;)if(r=(t=i[o]).type)e[r]=We(e[r],t.name,n);else if(n==null)for(r in e)e[r]=We(e[r],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new _n(t)},call:function(t,n){if((r=arguments.length-2)>0)for(var e=new Array(r),i=0,r,o;i<r;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(n,e)}};function So(t,n){for(var e=0,i=t.length,r;e<i;++e)if((r=t[e]).name===n)return r.value}function We(t,n,e){for(var i=0,r=t.length;i<r;++i)if(t[i].name===n){t[i]=Mo,t=t.slice(0,i).concat(t.slice(i+1));break}return e!=null&&t.push({name:n,value:e}),t}var se="http://www.w3.org/1999/xhtml";const Ke={svg:"http://www.w3.org/2000/svg",xhtml:se,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vn(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),Ke.hasOwnProperty(n)?{space:Ke[n],local:t}:t}function No(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===se&&n.documentElement.namespaceURI===se?n.createElement(t):n.createElementNS(e,t)}}function Ao(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ir(t){var n=Vn(t);return(n.local?Ao:No)(n)}function bo(){}function Ce(t){return t==null?bo:function(){return this.querySelector(t)}}function ko(t){typeof t!="function"&&(t=Ce(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],a=o.length,s=i[r]=new Array(a),l,u,c=0;c<a;++c)(l=o[c])&&(u=t.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new nt(i,this._parents)}function zo(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function To(){return[]}function rr(t){return t==null?To:function(){return this.querySelectorAll(t)}}function Co(t){return function(){return zo(t.apply(this,arguments))}}function $o(t){typeof t=="function"?t=Co(t):t=rr(t);for(var n=this._groups,e=n.length,i=[],r=[],o=0;o<e;++o)for(var a=n[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(i.push(t.call(l,l.__data__,u,a)),r.push(l));return new nt(i,r)}function or(t){return function(){return this.matches(t)}}function ar(t){return function(n){return n.matches(t)}}var Io=Array.prototype.find;function Lo(t){return function(){return Io.call(this.children,t)}}function Po(){return this.firstElementChild}function Ro(t){return this.select(t==null?Po:Lo(typeof t=="function"?t:ar(t)))}var Do=Array.prototype.filter;function qo(){return Array.from(this.children)}function Oo(t){return function(){return Do.call(this.children,t)}}function Fo(t){return this.selectAll(t==null?qo:Oo(typeof t=="function"?t:ar(t)))}function Bo(t){typeof t!="function"&&(t=or(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],a=o.length,s=i[r]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new nt(i,this._parents)}function sr(t){return new Array(t.length)}function Xo(){return new nt(this._enter||this._groups.map(sr),this._parents)}function Nn(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Nn.prototype={constructor:Nn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ho(t){return function(){return t}}function Yo(t,n,e,i,r,o){for(var a=0,s,l=n.length,u=o.length;a<u;++a)(s=n[a])?(s.__data__=o[a],i[a]=s):e[a]=new Nn(t,o[a]);for(;a<l;++a)(s=n[a])&&(r[a]=s)}function Zo(t,n,e,i,r,o,a){var s,l,u=new Map,c=n.length,h=o.length,f=new Array(c),d;for(s=0;s<c;++s)(l=n[s])&&(f[s]=d=a.call(l,l.__data__,s,n)+"",u.has(d)?r[s]=l:u.set(d,l));for(s=0;s<h;++s)d=a.call(t,o[s],s,o)+"",(l=u.get(d))?(i[s]=l,l.__data__=o[s],u.delete(d)):e[s]=new Nn(t,o[s]);for(s=0;s<c;++s)(l=n[s])&&u.get(f[s])===l&&(r[s]=l)}function Vo(t){return t.__data__}function Go(t,n){if(!arguments.length)return Array.from(this,Vo);var e=n?Zo:Yo,i=this._parents,r=this._groups;typeof t!="function"&&(t=Ho(t));for(var o=r.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=i[u],h=r[u],f=h.length,d=Wo(t.call(c,c&&c.__data__,u,i)),g=d.length,_=s[u]=new Array(g),v=a[u]=new Array(g),m=l[u]=new Array(f);e(c,h,_,v,m,d,n);for(var M=0,S=0,p,E;M<g;++M)if(p=_[M]){for(M>=S&&(S=M+1);!(E=v[S])&&++S<g;);p._next=E||null}}return a=new nt(a,i),a._enter=s,a._exit=l,a}function Wo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ko(){return new nt(this._exit||this._groups.map(sr),this._parents)}function Uo(t,n,e){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),n!=null&&(r=n(r),r&&(r=r.selection())),e==null?o.remove():e(o),i&&r?i.merge(r).order():r}function jo(t){for(var n=t.selection?t.selection():t,e=this._groups,i=n._groups,r=e.length,o=i.length,a=Math.min(r,o),s=new Array(r),l=0;l<a;++l)for(var u=e[l],c=i[l],h=u.length,f=s[l]=new Array(h),d,g=0;g<h;++g)(d=u[g]||c[g])&&(f[g]=d);for(;l<r;++l)s[l]=e[l];return new nt(s,this._parents)}function Qo(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var i=t[n],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Jo(t){t||(t=ta);function n(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var e=this._groups,i=e.length,r=new Array(i),o=0;o<i;++o){for(var a=e[o],s=a.length,l=r[o]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(n)}return new nt(r,this._parents).order()}function ta(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function na(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ea(){return Array.from(this)}function ia(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function ra(){let t=0;for(const n of this)++t;return t}function oa(){return!this.node()}function aa(t){for(var n=this._groups,e=0,i=n.length;e<i;++e)for(var r=n[e],o=0,a=r.length,s;o<a;++o)(s=r[o])&&t.call(s,s.__data__,o,r);return this}function sa(t){return function(){this.removeAttribute(t)}}function ua(t){return function(){this.removeAttributeNS(t.space,t.local)}}function la(t,n){return function(){this.setAttribute(t,n)}}function ca(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function fa(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function ha(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function da(t,n){var e=Vn(t);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((n==null?e.local?ua:sa:typeof n=="function"?e.local?ha:fa:e.local?ca:la)(e,n))}function ur(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function pa(t){return function(){this.style.removeProperty(t)}}function ga(t,n,e){return function(){this.style.setProperty(t,n,e)}}function ma(t,n,e){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,e)}}function va(t,n,e){return arguments.length>1?this.each((n==null?pa:typeof n=="function"?ma:ga)(t,n,e??"")):Lt(this.node(),t)}function Lt(t,n){return t.style.getPropertyValue(n)||ur(t).getComputedStyle(t,null).getPropertyValue(n)}function ya(t){return function(){delete this[t]}}function _a(t,n){return function(){this[t]=n}}function xa(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function wa(t,n){return arguments.length>1?this.each((n==null?ya:typeof n=="function"?xa:_a)(t,n)):this.node()[t]}function lr(t){return t.trim().split(/^|\s+/)}function $e(t){return t.classList||new cr(t)}function cr(t){this._node=t,this._names=lr(t.getAttribute("class")||"")}cr.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function fr(t,n){for(var e=$e(t),i=-1,r=n.length;++i<r;)e.add(n[i])}function hr(t,n){for(var e=$e(t),i=-1,r=n.length;++i<r;)e.remove(n[i])}function Ma(t){return function(){fr(this,t)}}function Ea(t){return function(){hr(this,t)}}function Sa(t,n){return function(){(n.apply(this,arguments)?fr:hr)(this,t)}}function Na(t,n){var e=lr(t+"");if(arguments.length<2){for(var i=$e(this.node()),r=-1,o=e.length;++r<o;)if(!i.contains(e[r]))return!1;return!0}return this.each((typeof n=="function"?Sa:n?Ma:Ea)(e,n))}function Aa(){this.textContent=""}function ba(t){return function(){this.textContent=t}}function ka(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function za(t){return arguments.length?this.each(t==null?Aa:(typeof t=="function"?ka:ba)(t)):this.node().textContent}function Ta(){this.innerHTML=""}function Ca(t){return function(){this.innerHTML=t}}function $a(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function Ia(t){return arguments.length?this.each(t==null?Ta:(typeof t=="function"?$a:Ca)(t)):this.node().innerHTML}function La(){this.nextSibling&&this.parentNode.appendChild(this)}function Pa(){return this.each(La)}function Ra(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Da(){return this.each(Ra)}function qa(t){var n=typeof t=="function"?t:ir(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Oa(){return null}function Fa(t,n){var e=typeof t=="function"?t:ir(t),i=n==null?Oa:typeof n=="function"?n:Ce(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function Ba(){var t=this.parentNode;t&&t.removeChild(this)}function Xa(){return this.each(Ba)}function Ha(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Ya(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Za(t){return this.select(t?Ya:Ha)}function Va(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ga(t){return function(n){t.call(this,n,this.__data__)}}function Wa(t){return t.trim().split(/^|\s+/).map(function(n){var e="",i=n.indexOf(".");return i>=0&&(e=n.slice(i+1),n=n.slice(0,i)),{type:n,name:e}})}function Ka(t){return function(){var n=this.__on;if(n){for(var e=0,i=-1,r=n.length,o;e<r;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++i]=o;++i?n.length=i:delete this.__on}}}function Ua(t,n,e){return function(){var i=this.__on,r,o=Ga(n);if(i){for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),r.value=n;return}}this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function ja(t,n,e){var i=Wa(t+""),r,o=i.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(r=0,c=s[l];r<o;++r)if((a=i[r]).type===c.type&&a.name===c.name)return c.value}return}for(s=n?Ua:Ka,r=0;r<o;++r)this.each(s(i[r],n,e));return this}function dr(t,n,e){var i=ur(t),r=i.CustomEvent;typeof r=="function"?r=new r(n,e):(r=i.document.createEvent("Event"),e?(r.initEvent(n,e.bubbles,e.cancelable),r.detail=e.detail):r.initEvent(n,!1,!1)),t.dispatchEvent(r)}function Qa(t,n){return function(){return dr(this,t,n)}}function Ja(t,n){return function(){return dr(this,t,n.apply(this,arguments))}}function ts(t,n){return this.each((typeof n=="function"?Ja:Qa)(t,n))}function*ns(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var pr=[null];function nt(t,n){this._groups=t,this._parents=n}function rn(){return new nt([[document.documentElement]],pr)}function es(){return this}nt.prototype=rn.prototype={constructor:nt,select:ko,selectAll:$o,selectChild:Ro,selectChildren:Fo,filter:Bo,data:Go,enter:Xo,exit:Ko,join:Uo,merge:jo,selection:es,order:Qo,sort:Jo,call:na,nodes:ea,node:ia,size:ra,empty:oa,each:aa,attr:da,style:va,property:wa,classed:Na,text:za,html:Ia,raise:Pa,lower:Da,append:qa,insert:Fa,remove:Xa,clone:Za,datum:Va,on:ja,dispatch:ts,[Symbol.iterator]:ns};function B(t){return typeof t=="string"?new nt([[document.querySelector(t)]],[document.documentElement]):new nt([[t]],pr)}function is(t){let n;for(;n=t.sourceEvent;)t=n;return t}function vt(t,n){if(t=is(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[t.clientX-r.left-n.clientLeft,t.clientY-r.top-n.clientTop]}}return[t.pageX,t.pageY]}const rs={passive:!1},Kt={capture:!0,passive:!1};function Un(t){t.stopImmediatePropagation()}function $t(t){t.preventDefault(),t.stopImmediatePropagation()}function gr(t){var n=t.document.documentElement,e=B(t).on("dragstart.drag",$t,Kt);"onselectstart"in n?e.on("selectstart.drag",$t,Kt):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function mr(t,n){var e=t.document.documentElement,i=B(t).on("dragstart.drag",null);n&&(i.on("click.drag",$t,Kt),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const an=t=>()=>t;function ue(t,{sourceEvent:n,subject:e,target:i,identifier:r,active:o,x:a,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}ue.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function os(t){return!t.ctrlKey&&!t.button}function as(){return this.parentNode}function ss(t,n){return n??{x:t.x,y:t.y}}function us(){return navigator.maxTouchPoints||"ontouchstart"in this}function ls(){var t=os,n=as,e=ss,i=us,r={},o=en("start","drag","end"),a=0,s,l,u,c,h=0;function f(p){p.on("mousedown.drag",d).filter(i).on("touchstart.drag",v).on("touchmove.drag",m,rs).on("touchend.drag touchcancel.drag",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(p,E){if(!(c||!t.call(this,p,E))){var A=S(this,n.call(this,p,E),p,E,"mouse");A&&(B(p.view).on("mousemove.drag",g,Kt).on("mouseup.drag",_,Kt),gr(p.view),Un(p),u=!1,s=p.clientX,l=p.clientY,A("start",p))}}function g(p){if($t(p),!u){var E=p.clientX-s,A=p.clientY-l;u=E*E+A*A>h}r.mouse("drag",p)}function _(p){B(p.view).on("mousemove.drag mouseup.drag",null),mr(p.view,u),$t(p),r.mouse("end",p)}function v(p,E){if(t.call(this,p,E)){var A=p.changedTouches,z=n.call(this,p,E),k=A.length,T,C;for(T=0;T<k;++T)(C=S(this,z,p,E,A[T].identifier,A[T]))&&(Un(p),C("start",p,A[T]))}}function m(p){var E=p.changedTouches,A=E.length,z,k;for(z=0;z<A;++z)(k=r[E[z].identifier])&&($t(p),k("drag",p,E[z]))}function M(p){var E=p.changedTouches,A=E.length,z,k;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),z=0;z<A;++z)(k=r[E[z].identifier])&&(Un(p),k("end",p,E[z]))}function S(p,E,A,z,k,T){var C=o.copy(),N=vt(T||A,E),R,L,y;if((y=e.call(p,new ue("beforestart",{sourceEvent:A,target:f,identifier:k,active:a,x:N[0],y:N[1],dx:0,dy:0,dispatch:C}),z))!=null)return R=y.x-N[0]||0,L=y.y-N[1]||0,function x(w,b,$){var I=N,P;switch(w){case"start":r[k]=x,P=a++;break;case"end":delete r[k],--a;case"drag":N=vt($||b,E),P=a;break}C.call(w,p,new ue(w,{sourceEvent:b,subject:y,target:f,identifier:k,active:P,x:N[0]+R,y:N[1]+L,dx:N[0]-I[0],dy:N[1]-I[1],dispatch:C}),z)}}return f.filter=function(p){return arguments.length?(t=typeof p=="function"?p:an(!!p),f):t},f.container=function(p){return arguments.length?(n=typeof p=="function"?p:an(p),f):n},f.subject=function(p){return arguments.length?(e=typeof p=="function"?p:an(p),f):e},f.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:an(!!p),f):i},f.on=function(){var p=o.on.apply(o,arguments);return p===o?f:p},f.clickDistance=function(p){return arguments.length?(h=(p=+p)*p,f):Math.sqrt(h)},f}function Ie(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function vr(t,n){var e=Object.create(t.prototype);for(var i in n)e[i]=n[i];return e}function on(){}var Ut=.7,An=1/Ut,It="\\s*([+-]?\\d+)\\s*",jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cs=/^#([0-9a-f]{3,8})$/,fs=new RegExp(`^rgb\\(${It},${It},${It}\\)$`),hs=new RegExp(`^rgb\\(${ht},${ht},${ht}\\)$`),ds=new RegExp(`^rgba\\(${It},${It},${It},${jt}\\)$`),ps=new RegExp(`^rgba\\(${ht},${ht},${ht},${jt}\\)$`),gs=new RegExp(`^hsl\\(${jt},${ht},${ht}\\)$`),ms=new RegExp(`^hsla\\(${jt},${ht},${ht},${jt}\\)$`),Ue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ie(on,At,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:je,formatHex:je,formatHex8:vs,formatHsl:ys,formatRgb:Qe,toString:Qe});function je(){return this.rgb().formatHex()}function vs(){return this.rgb().formatHex8()}function ys(){return yr(this).formatHsl()}function Qe(){return this.rgb().formatRgb()}function At(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=cs.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?Je(n):e===3?new j(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?sn(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?sn(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=fs.exec(t))?new j(n[1],n[2],n[3],1):(n=hs.exec(t))?new j(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=ds.exec(t))?sn(n[1],n[2],n[3],n[4]):(n=ps.exec(t))?sn(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=gs.exec(t))?ei(n[1],n[2]/100,n[3]/100,1):(n=ms.exec(t))?ei(n[1],n[2]/100,n[3]/100,n[4]):Ue.hasOwnProperty(t)?Je(Ue[t]):t==="transparent"?new j(NaN,NaN,NaN,0):null}function Je(t){return new j(t>>16&255,t>>8&255,t&255,1)}function sn(t,n,e,i){return i<=0&&(t=n=e=NaN),new j(t,n,e,i)}function _s(t){return t instanceof on||(t=At(t)),t?(t=t.rgb(),new j(t.r,t.g,t.b,t.opacity)):new j}function le(t,n,e,i){return arguments.length===1?_s(t):new j(t,n,e,i??1)}function j(t,n,e,i){this.r=+t,this.g=+n,this.b=+e,this.opacity=+i}Ie(j,le,vr(on,{brighter(t){return t=t==null?An:Math.pow(An,t),new j(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ut:Math.pow(Ut,t),new j(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new j(Et(this.r),Et(this.g),Et(this.b),bn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ti,formatHex:ti,formatHex8:xs,formatRgb:ni,toString:ni}));function ti(){return`#${Mt(this.r)}${Mt(this.g)}${Mt(this.b)}`}function xs(){return`#${Mt(this.r)}${Mt(this.g)}${Mt(this.b)}${Mt((isNaN(this.opacity)?1:this.opacity)*255)}`}function ni(){const t=bn(this.opacity);return`${t===1?"rgb(":"rgba("}${Et(this.r)}, ${Et(this.g)}, ${Et(this.b)}${t===1?")":`, ${t})`}`}function bn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Et(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Mt(t){return t=Et(t),(t<16?"0":"")+t.toString(16)}function ei(t,n,e,i){return i<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new at(t,n,e,i)}function yr(t){if(t instanceof at)return new at(t.h,t.s,t.l,t.opacity);if(t instanceof on||(t=At(t)),!t)return new at;if(t instanceof at)return t;t=t.rgb();var n=t.r/255,e=t.g/255,i=t.b/255,r=Math.min(n,e,i),o=Math.max(n,e,i),a=NaN,s=o-r,l=(o+r)/2;return s?(n===o?a=(e-i)/s+(e<i)*6:e===o?a=(i-n)/s+2:a=(n-e)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new at(a,s,l,t.opacity)}function ws(t,n,e,i){return arguments.length===1?yr(t):new at(t,n,e,i??1)}function at(t,n,e,i){this.h=+t,this.s=+n,this.l=+e,this.opacity=+i}Ie(at,ws,vr(on,{brighter(t){return t=t==null?An:Math.pow(An,t),new at(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ut:Math.pow(Ut,t),new at(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*n,r=2*e-i;return new j(jn(t>=240?t-240:t+120,r,i),jn(t,r,i),jn(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new at(ii(this.h),un(this.s),un(this.l),bn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=bn(this.opacity);return`${t===1?"hsl(":"hsla("}${ii(this.h)}, ${un(this.s)*100}%, ${un(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ii(t){return t=(t||0)%360,t<0?t+360:t}function un(t){return Math.max(0,Math.min(1,t||0))}function jn(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}const Le=t=>()=>t;function Ms(t,n){return function(e){return t+e*n}}function Es(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(i){return Math.pow(t+i*n,e)}}function Ss(t){return(t=+t)==1?_r:function(n,e){return e-n?Es(n,e,t):Le(isNaN(n)?e:n)}}function _r(t,n){var e=n-t;return e?Ms(t,e):Le(isNaN(t)?n:t)}const kn=function t(n){var e=Ss(n);function i(r,o){var a=e((r=le(r)).r,(o=le(o)).r),s=e(r.g,o.g),l=e(r.b,o.b),u=_r(r.opacity,o.opacity);return function(c){return r.r=a(c),r.g=s(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=t,i}(1);function Ns(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,i=n.slice(),r;return function(o){for(r=0;r<e;++r)i[r]=t[r]*(1-o)+n[r]*o;return i}}function As(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function bs(t,n){var e=n?n.length:0,i=t?Math.min(e,t.length):0,r=new Array(i),o=new Array(e),a;for(a=0;a<i;++a)r[a]=Pe(t[a],n[a]);for(;a<e;++a)o[a]=n[a];return function(s){for(a=0;a<i;++a)o[a]=r[a](s);return o}}function ks(t,n){var e=new Date;return t=+t,n=+n,function(i){return e.setTime(t*(1-i)+n*i),e}}function ot(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function zs(t,n){var e={},i={},r;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(r in n)r in t?e[r]=Pe(t[r],n[r]):i[r]=n[r];return function(o){for(r in e)i[r]=e[r](o);return i}}var ce=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qn=new RegExp(ce.source,"g");function Ts(t){return function(){return t}}function Cs(t){return function(n){return t(n)+""}}function xr(t,n){var e=ce.lastIndex=Qn.lastIndex=0,i,r,o,a=-1,s=[],l=[];for(t=t+"",n=n+"";(i=ce.exec(t))&&(r=Qn.exec(n));)(o=r.index)>e&&(o=n.slice(e,o),s[a]?s[a]+=o:s[++a]=o),(i=i[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:ot(i,r)})),e=Qn.lastIndex;return e<n.length&&(o=n.slice(e),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?Cs(l[0].x):Ts(n):(n=l.length,function(u){for(var c=0,h;c<n;++c)s[(h=l[c]).i]=h.x(u);return s.join("")})}function Pe(t,n){var e=typeof n,i;return n==null||e==="boolean"?Le(n):(e==="number"?ot:e==="string"?(i=At(n))?(n=i,kn):xr:n instanceof At?kn:n instanceof Date?ks:As(n)?Ns:Array.isArray(n)?bs:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?zs:ot)(t,n)}function $s(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var ri=180/Math.PI,fe={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wr(t,n,e,i,r,o){var a,s,l;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(l=t*e+n*i)&&(e-=t*l,i-=n*l),(s=Math.sqrt(e*e+i*i))&&(e/=s,i/=s,l/=s),t*i<n*e&&(t=-t,n=-n,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(n,t)*ri,skewX:Math.atan(l)*ri,scaleX:a,scaleY:s}}var ln;function Is(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?fe:wr(n.a,n.b,n.c,n.d,n.e,n.f)}function Ls(t){return t==null||(ln||(ln=document.createElementNS("http://www.w3.org/2000/svg","g")),ln.setAttribute("transform",t),!(t=ln.transform.baseVal.consolidate()))?fe:(t=t.matrix,wr(t.a,t.b,t.c,t.d,t.e,t.f))}function Mr(t,n,e,i){function r(u){return u.length?u.pop()+" ":""}function o(u,c,h,f,d,g){if(u!==h||c!==f){var _=d.push("translate(",null,n,null,e);g.push({i:_-4,x:ot(u,h)},{i:_-2,x:ot(c,f)})}else(h||f)&&d.push("translate("+h+n+f+e)}function a(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(r(h)+"rotate(",null,i)-2,x:ot(u,c)})):c&&h.push(r(h)+"rotate("+c+i)}function s(u,c,h,f){u!==c?f.push({i:h.push(r(h)+"skewX(",null,i)-2,x:ot(u,c)}):c&&h.push(r(h)+"skewX("+c+i)}function l(u,c,h,f,d,g){if(u!==h||c!==f){var _=d.push(r(d)+"scale(",null,",",null,")");g.push({i:_-4,x:ot(u,h)},{i:_-2,x:ot(c,f)})}else(h!==1||f!==1)&&d.push(r(d)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=t(u),c=t(c),o(u.translateX,u.translateY,c.translateX,c.translateY,h,f),a(u.rotate,c.rotate,h,f),s(u.skewX,c.skewX,h,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(d){for(var g=-1,_=f.length,v;++g<_;)h[(v=f[g]).i]=v.x(d);return h.join("")}}}var Ps=Mr(Is,"px, ","px)","deg)"),Rs=Mr(Ls,", ",")",")"),Ds=1e-12;function oi(t){return((t=Math.exp(t))+1/t)/2}function qs(t){return((t=Math.exp(t))-1/t)/2}function Os(t){return((t=Math.exp(2*t))-1)/(t+1)}const Er=function t(n,e,i){function r(o,a){var s=o[0],l=o[1],u=o[2],c=a[0],h=a[1],f=a[2],d=c-s,g=h-l,_=d*d+g*g,v,m;if(_<Ds)m=Math.log(f/u)/n,v=function(z){return[s+z*d,l+z*g,u*Math.exp(n*z*m)]};else{var M=Math.sqrt(_),S=(f*f-u*u+i*_)/(2*u*e*M),p=(f*f-u*u-i*_)/(2*f*e*M),E=Math.log(Math.sqrt(S*S+1)-S),A=Math.log(Math.sqrt(p*p+1)-p);m=(A-E)/n,v=function(z){var k=z*m,T=oi(E),C=u/(e*M)*(T*Os(n*k+E)-qs(E));return[s+C*d,l+C*g,u*T/oi(n*k+E)]}}return v.duration=m*1e3*n/Math.SQRT2,v}return r.rho=function(o){var a=Math.max(.001,+o),s=a*a,l=s*s;return t(a,s,l)},r}(Math.SQRT2,2,4);var Pt=0,Bt=0,Ot=0,Sr=1e3,zn,Xt,Tn=0,bt=0,Gn=0,Qt=typeof performance=="object"&&performance.now?performance:Date,Nr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Re(){return bt||(Nr(Fs),bt=Qt.now()+Gn)}function Fs(){bt=0}function Cn(){this._call=this._time=this._next=null}Cn.prototype=De.prototype={constructor:Cn,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?Re():+e)+(n==null?0:+n),!this._next&&Xt!==this&&(Xt?Xt._next=this:zn=this,Xt=this),this._call=t,this._time=e,he()},stop:function(){this._call&&(this._call=null,this._time=1/0,he())}};function De(t,n,e){var i=new Cn;return i.restart(t,n,e),i}function Bs(){Re(),++Pt;for(var t=zn,n;t;)(n=bt-t._time)>=0&&t._call.call(void 0,n),t=t._next;--Pt}function ai(){bt=(Tn=Qt.now())+Gn,Pt=Bt=0;try{Bs()}finally{Pt=0,Hs(),bt=0}}function Xs(){var t=Qt.now(),n=t-Tn;n>Sr&&(Gn-=n,Tn=t)}function Hs(){for(var t,n=zn,e,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:zn=e);Xt=t,he(i)}function he(t){if(!Pt){Bt&&(Bt=clearTimeout(Bt));var n=t-bt;n>24?(t<1/0&&(Bt=setTimeout(ai,t-Qt.now()-Gn)),Ot&&(Ot=clearInterval(Ot))):(Ot||(Tn=Qt.now(),Ot=setInterval(Xs,Sr)),Pt=1,Nr(ai))}}function si(t,n,e){var i=new Cn;return n=n==null?0:+n,i.restart(r=>{i.stop(),t(r+n)},n,e),i}var Ys=en("start","end","cancel","interrupt"),Zs=[],Ar=0,ui=1,de=2,xn=3,li=4,pe=5,wn=6;function Wn(t,n,e,i,r,o){var a=t.__transition;if(!a)t.__transition={};else if(e in a)return;Vs(t,e,{name:n,index:i,group:r,on:Ys,tween:Zs,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ar})}function qe(t,n){var e=ut(t,n);if(e.state>Ar)throw new Error("too late; already scheduled");return e}function dt(t,n){var e=ut(t,n);if(e.state>xn)throw new Error("too late; already running");return e}function ut(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Vs(t,n,e){var i=t.__transition,r;i[n]=e,e.timer=De(o,0,e.time);function o(u){e.state=ui,e.timer.restart(a,e.delay,e.time),e.delay<=u&&a(u-e.delay)}function a(u){var c,h,f,d;if(e.state!==ui)return l();for(c in i)if(d=i[c],d.name===e.name){if(d.state===xn)return si(a);d.state===li?(d.state=wn,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[c]):+c<n&&(d.state=wn,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[c])}if(si(function(){e.state===xn&&(e.state=li,e.timer.restart(s,e.delay,e.time),s(u))}),e.state=de,e.on.call("start",t,t.__data__,e.index,e.group),e.state===de){for(e.state=xn,r=new Array(f=e.tween.length),c=0,h=-1;c<f;++c)(d=e.tween[c].value.call(t,t.__data__,e.index,e.group))&&(r[++h]=d);r.length=h+1}}function s(u){for(var c=u<e.duration?e.ease.call(null,u/e.duration):(e.timer.restart(l),e.state=pe,1),h=-1,f=r.length;++h<f;)r[h].call(t,c);e.state===pe&&(e.on.call("end",t,t.__data__,e.index,e.group),l())}function l(){e.state=wn,e.timer.stop(),delete i[n];for(var u in i)return;delete t.__transition}}function Mn(t,n){var e=t.__transition,i,r,o=!0,a;if(e){n=n==null?null:n+"";for(a in e){if((i=e[a]).name!==n){o=!1;continue}r=i.state>de&&i.state<pe,i.state=wn,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete e[a]}o&&delete t.__transition}}function Gs(t){return this.each(function(){Mn(this,t)})}function Ws(t,n){var e,i;return function(){var r=dt(this,t),o=r.tween;if(o!==e){i=e=o;for(var a=0,s=i.length;a<s;++a)if(i[a].name===n){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function Ks(t,n,e){var i,r;if(typeof e!="function")throw new Error;return function(){var o=dt(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:n,value:e},l=0,u=r.length;l<u;++l)if(r[l].name===n){r[l]=s;break}l===u&&r.push(s)}o.tween=r}}function Us(t,n){var e=this._id;if(t+="",arguments.length<2){for(var i=ut(this.node(),e).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((n==null?Ws:Ks)(e,t,n))}function Oe(t,n,e){var i=t._id;return t.each(function(){var r=dt(this,i);(r.value||(r.value={}))[n]=e.apply(this,arguments)}),function(r){return ut(r,i).value[n]}}function br(t,n){var e;return(typeof n=="number"?ot:n instanceof At?kn:(e=At(n))?(n=e,kn):xr)(t,n)}function js(t){return function(){this.removeAttribute(t)}}function Qs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Js(t,n,e){var i,r=e+"",o;return function(){var a=this.getAttribute(t);return a===r?null:a===i?o:o=n(i=a,e)}}function tu(t,n,e){var i,r=e+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?o:o=n(i=a,e)}}function nu(t,n,e){var i,r,o;return function(){var a,s=e(this),l;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=n(i=a,s)))}}function eu(t,n,e){var i,r,o;return function(){var a,s=e(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=n(i=a,s)))}}function iu(t,n){var e=Vn(t),i=e==="transform"?Rs:br;return this.attrTween(t,typeof n=="function"?(e.local?eu:nu)(e,i,Oe(this,"attr."+t,n)):n==null?(e.local?Qs:js)(e):(e.local?tu:Js)(e,i,n))}function ru(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function ou(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function au(t,n){var e,i;function r(){var o=n.apply(this,arguments);return o!==i&&(e=(i=o)&&ou(t,o)),e}return r._value=n,r}function su(t,n){var e,i;function r(){var o=n.apply(this,arguments);return o!==i&&(e=(i=o)&&ru(t,o)),e}return r._value=n,r}function uu(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var i=Vn(t);return this.tween(e,(i.local?au:su)(i,n))}function lu(t,n){return function(){qe(this,t).delay=+n.apply(this,arguments)}}function cu(t,n){return n=+n,function(){qe(this,t).delay=n}}function fu(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?lu:cu)(n,t)):ut(this.node(),n).delay}function hu(t,n){return function(){dt(this,t).duration=+n.apply(this,arguments)}}function du(t,n){return n=+n,function(){dt(this,t).duration=n}}function pu(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?hu:du)(n,t)):ut(this.node(),n).duration}function gu(t,n){if(typeof n!="function")throw new Error;return function(){dt(this,t).ease=n}}function mu(t){var n=this._id;return arguments.length?this.each(gu(n,t)):ut(this.node(),n).ease}function vu(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;dt(this,t).ease=e}}function yu(t){if(typeof t!="function")throw new Error;return this.each(vu(this._id,t))}function _u(t){typeof t!="function"&&(t=or(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],a=o.length,s=i[r]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new _t(i,this._parents,this._name,this._id)}function xu(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,i=n.length,r=e.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l=n[s],u=e[s],c=l.length,h=a[s]=new Array(c),f,d=0;d<c;++d)(f=l[d]||u[d])&&(h[d]=f);for(;s<i;++s)a[s]=n[s];return new _t(a,this._parents,this._name,this._id)}function wu(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function Mu(t,n,e){var i,r,o=wu(n)?qe:dt;return function(){var a=o(this,t),s=a.on;s!==i&&(r=(i=s).copy()).on(n,e),a.on=r}}function Eu(t,n){var e=this._id;return arguments.length<2?ut(this.node(),e).on.on(t):this.each(Mu(e,t,n))}function Su(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function Nu(){return this.on("end.remove",Su(this._id))}function Au(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Ce(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var s=i[a],l=s.length,u=o[a]=new Array(l),c,h,f=0;f<l;++f)(c=s[f])&&(h=t.call(c,c.__data__,f,s))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,Wn(u[f],n,e,f,u,ut(c,e)));return new _t(o,this._parents,n,e)}function bu(t){var n=this._name,e=this._id;typeof t!="function"&&(t=rr(t));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l=i[s],u=l.length,c,h=0;h<u;++h)if(c=l[h]){for(var f=t.call(c,c.__data__,h,l),d,g=ut(c,e),_=0,v=f.length;_<v;++_)(d=f[_])&&Wn(d,n,e,_,f,g);o.push(f),a.push(c)}return new _t(o,a,n,e)}var ku=rn.prototype.constructor;function zu(){return new ku(this._groups,this._parents)}function Tu(t,n){var e,i,r;return function(){var o=Lt(this,t),a=(this.style.removeProperty(t),Lt(this,t));return o===a?null:o===e&&a===i?r:r=n(e=o,i=a)}}function kr(t){return function(){this.style.removeProperty(t)}}function Cu(t,n,e){var i,r=e+"",o;return function(){var a=Lt(this,t);return a===r?null:a===i?o:o=n(i=a,e)}}function $u(t,n,e){var i,r,o;return function(){var a=Lt(this,t),s=e(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),Lt(this,t))),a===l?null:a===i&&l===r?o:(r=l,o=n(i=a,s))}}function Iu(t,n){var e,i,r,o="style."+n,a="end."+o,s;return function(){var l=dt(this,t),u=l.on,c=l.value[o]==null?s||(s=kr(n)):void 0;(u!==e||r!==c)&&(i=(e=u).copy()).on(a,r=c),l.on=i}}function Lu(t,n,e){var i=(t+="")=="transform"?Ps:br;return n==null?this.styleTween(t,Tu(t,i)).on("end.style."+t,kr(t)):typeof n=="function"?this.styleTween(t,$u(t,i,Oe(this,"style."+t,n))).each(Iu(this._id,t)):this.styleTween(t,Cu(t,i,n),e).on("end.style."+t,null)}function Pu(t,n,e){return function(i){this.style.setProperty(t,n.call(this,i),e)}}function Ru(t,n,e){var i,r;function o(){var a=n.apply(this,arguments);return a!==r&&(i=(r=a)&&Pu(t,a,e)),i}return o._value=n,o}function Du(t,n,e){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,Ru(t,n,e??""))}function qu(t){return function(){this.textContent=t}}function Ou(t){return function(){var n=t(this);this.textContent=n??""}}function Fu(t){return this.tween("text",typeof t=="function"?Ou(Oe(this,"text",t)):qu(t==null?"":t+""))}function Bu(t){return function(n){this.textContent=t.call(this,n)}}function Xu(t){var n,e;function i(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&Bu(r)),n}return i._value=t,i}function Hu(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Xu(t))}function Yu(){for(var t=this._name,n=this._id,e=zr(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=ut(l,n);Wn(l,t,e,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new _t(i,this._parents,t,e)}function Zu(){var t,n,e=this,i=e._id,r=e.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--r===0&&o()}};e.each(function(){var u=dt(this,i),c=u.on;c!==t&&(n=(t=c).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(l)),u.on=n}),r===0&&o()})}var Vu=0;function _t(t,n,e,i){this._groups=t,this._parents=n,this._name=e,this._id=i}function zr(){return++Vu}var mt=rn.prototype;_t.prototype={constructor:_t,select:Au,selectAll:bu,selectChild:mt.selectChild,selectChildren:mt.selectChildren,filter:_u,merge:xu,selection:zu,transition:Yu,call:mt.call,nodes:mt.nodes,node:mt.node,size:mt.size,empty:mt.empty,each:mt.each,on:Eu,attr:iu,attrTween:uu,style:Lu,styleTween:Du,text:Fu,textTween:Hu,remove:Nu,tween:Us,delay:fu,duration:pu,ease:mu,easeVarying:yu,end:Zu,[Symbol.iterator]:mt[Symbol.iterator]};function Gu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Wu={time:null,delay:0,duration:250,ease:Gu};function Ku(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function Uu(t){var n,e;t instanceof _t?(n=t._id,t=t._name):(n=zr(),(e=Wu).time=Re(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&Wn(l,t,n,u,a,e||Ku(l,n));return new _t(i,this._parents,t,n)}rn.prototype.interrupt=Gs;rn.prototype.transition=Uu;function ju(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function $n(t,n){return fetch(t,n).then(ju)}function Qu(t,n){var e,i=1;t==null&&(t=0),n==null&&(n=0);function r(){var o,a=e.length,s,l=0,u=0;for(o=0;o<a;++o)s=e[o],l+=s.x,u+=s.y;for(l=(l/a-t)*i,u=(u/a-n)*i,o=0;o<a;++o)s=e[o],s.x-=l,s.y-=u}return r.initialize=function(o){e=o},r.x=function(o){return arguments.length?(t=+o,r):t},r.y=function(o){return arguments.length?(n=+o,r):n},r.strength=function(o){return arguments.length?(i=+o,r):i},r}function Ju(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return Tr(this.cover(n,e),n,e,t)}function Tr(t,n,e,i){if(isNaN(n)||isNaN(e))return t;var r,o=t._root,a={data:i},s=t._x0,l=t._y0,u=t._x1,c=t._y1,h,f,d,g,_,v,m,M;if(!o)return t._root=a,t;for(;o.length;)if((_=n>=(h=(s+u)/2))?s=h:u=h,(v=e>=(f=(l+c)/2))?l=f:c=f,r=o,!(o=o[m=v<<1|_]))return r[m]=a,t;if(d=+t._x.call(null,o.data),g=+t._y.call(null,o.data),n===d&&e===g)return a.next=o,r?r[m]=a:t._root=a,t;do r=r?r[m]=new Array(4):t._root=new Array(4),(_=n>=(h=(s+u)/2))?s=h:u=h,(v=e>=(f=(l+c)/2))?l=f:c=f;while((m=v<<1|_)===(M=(g>=f)<<1|d>=h));return r[M]=o,r[m]=a,t}function tl(t){var n,e,i=t.length,r,o,a=new Array(i),s=new Array(i),l=1/0,u=1/0,c=-1/0,h=-1/0;for(e=0;e<i;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(o=+this._y.call(null,n))||(a[e]=r,s[e]=o,r<l&&(l=r),r>c&&(c=r),o<u&&(u=o),o>h&&(h=o));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),e=0;e<i;++e)Tr(this,a[e],s[e],t[e]);return this}function nl(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(e))r=(e=Math.floor(t))+1,o=(i=Math.floor(n))+1;else{for(var a=r-e||1,s=this._root,l,u;e>t||t>=r||i>n||n>=o;)switch(u=(n<i)<<1|t<e,l=new Array(4),l[u]=s,s=l,a*=2,u){case 0:r=e+a,o=i+a;break;case 1:e=r-a,o=i+a;break;case 2:r=e+a,i=o-a;break;case 3:e=r-a,i=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._y0=i,this._x1=r,this._y1=o,this}function el(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function il(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function K(t,n,e,i,r){this.node=t,this.x0=n,this.y0=e,this.x1=i,this.y1=r}function rl(t,n,e){var i,r=this._x0,o=this._y0,a,s,l,u,c=this._x1,h=this._y1,f=[],d=this._root,g,_;for(d&&f.push(new K(d,r,o,c,h)),e==null?e=1/0:(r=t-e,o=n-e,c=t+e,h=n+e,e*=e);g=f.pop();)if(!(!(d=g.node)||(a=g.x0)>c||(s=g.y0)>h||(l=g.x1)<r||(u=g.y1)<o))if(d.length){var v=(a+l)/2,m=(s+u)/2;f.push(new K(d[3],v,m,l,u),new K(d[2],a,m,v,u),new K(d[1],v,s,l,m),new K(d[0],a,s,v,m)),(_=(n>=m)<<1|t>=v)&&(g=f[f.length-1],f[f.length-1]=f[f.length-1-_],f[f.length-1-_]=g)}else{var M=t-+this._x.call(null,d.data),S=n-+this._y.call(null,d.data),p=M*M+S*S;if(p<e){var E=Math.sqrt(e=p);r=t-E,o=n-E,c=t+E,h=n+E,i=d.data}}return i}function ol(t){if(isNaN(c=+this._x.call(null,t))||isNaN(h=+this._y.call(null,t)))return this;var n,e=this._root,i,r,o,a=this._x0,s=this._y0,l=this._x1,u=this._y1,c,h,f,d,g,_,v,m;if(!e)return this;if(e.length)for(;;){if((g=c>=(f=(a+l)/2))?a=f:l=f,(_=h>=(d=(s+u)/2))?s=d:u=d,n=e,!(e=e[v=_<<1|g]))return this;if(!e.length)break;(n[v+1&3]||n[v+2&3]||n[v+3&3])&&(i=n,m=v)}for(;e.data!==t;)if(r=e,!(e=e.next))return this;return(o=e.next)&&delete e.next,r?(o?r.next=o:delete r.next,this):n?(o?n[v]=o:delete n[v],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(i?i[m]=e:this._root=e),this):(this._root=o,this)}function al(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function sl(){return this._root}function ul(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function ll(t){var n=[],e,i=this._root,r,o,a,s,l;for(i&&n.push(new K(i,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(i=e.node,o=e.x0,a=e.y0,s=e.x1,l=e.y1)&&i.length){var u=(o+s)/2,c=(a+l)/2;(r=i[3])&&n.push(new K(r,u,c,s,l)),(r=i[2])&&n.push(new K(r,o,c,u,l)),(r=i[1])&&n.push(new K(r,u,a,s,c)),(r=i[0])&&n.push(new K(r,o,a,u,c))}return this}function cl(t){var n=[],e=[],i;for(this._root&&n.push(new K(this._root,this._x0,this._y0,this._x1,this._y1));i=n.pop();){var r=i.node;if(r.length){var o,a=i.x0,s=i.y0,l=i.x1,u=i.y1,c=(a+l)/2,h=(s+u)/2;(o=r[0])&&n.push(new K(o,a,s,c,h)),(o=r[1])&&n.push(new K(o,c,s,l,h)),(o=r[2])&&n.push(new K(o,a,h,c,u)),(o=r[3])&&n.push(new K(o,c,h,l,u))}e.push(i)}for(;i=e.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function fl(t){return t[0]}function hl(t){return arguments.length?(this._x=t,this):this._x}function dl(t){return t[1]}function pl(t){return arguments.length?(this._y=t,this):this._y}function Fe(t,n,e){var i=new Be(n??fl,e??dl,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function Be(t,n,e,i,r,o){this._x=t,this._y=n,this._x0=e,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function ci(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var U=Fe.prototype=Be.prototype;U.copy=function(){var t=new Be(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,i;if(!n)return t;if(!n.length)return t._root=ci(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var r=0;r<4;++r)(i=n.source[r])&&(i.length?e.push({source:i,target:n.target[r]=new Array(4)}):n.target[r]=ci(i));return t};U.add=Ju;U.addAll=tl;U.cover=nl;U.data=el;U.extent=il;U.find=rl;U.remove=ol;U.removeAll=al;U.root=sl;U.size=ul;U.visit=ll;U.visitAfter=cl;U.x=hl;U.y=pl;function St(t){return function(){return t}}function wt(t){return(t()-.5)*1e-6}function gl(t){return t.x+t.vx}function ml(t){return t.y+t.vy}function vl(t){var n,e,i,r=1,o=1;typeof t!="function"&&(t=St(t==null?1:+t));function a(){for(var u,c=n.length,h,f,d,g,_,v,m=0;m<o;++m)for(h=Fe(n,gl,ml).visitAfter(s),u=0;u<c;++u)f=n[u],_=e[f.index],v=_*_,d=f.x+f.vx,g=f.y+f.vy,h.visit(M);function M(S,p,E,A,z){var k=S.data,T=S.r,C=_+T;if(k){if(k.index>f.index){var N=d-k.x-k.vx,R=g-k.y-k.vy,L=N*N+R*R;L<C*C&&(N===0&&(N=wt(i),L+=N*N),R===0&&(R=wt(i),L+=R*R),L=(C-(L=Math.sqrt(L)))/L*r,f.vx+=(N*=L)*(C=(T*=T)/(v+T)),f.vy+=(R*=L)*C,k.vx-=N*(C=1-C),k.vy-=R*C)}return}return p>d+C||A<d-C||E>g+C||z<g-C}}function s(u){if(u.data)return u.r=e[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(n){var u,c=n.length,h;for(e=new Array(c),u=0;u<c;++u)h=n[u],e[h.index]=+t(h,u,n)}}return a.initialize=function(u,c){n=u,i=c,l()},a.iterations=function(u){return arguments.length?(o=+u,a):o},a.strength=function(u){return arguments.length?(r=+u,a):r},a.radius=function(u){return arguments.length?(t=typeof u=="function"?u:St(+u),l(),a):t},a}function yl(t){return t.index}function fi(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function _l(t){var n=yl,e=h,i,r=St(30),o,a,s,l,u,c=1;t==null&&(t=[]);function h(v){return 1/Math.min(s[v.source.index],s[v.target.index])}function f(v){for(var m=0,M=t.length;m<c;++m)for(var S=0,p,E,A,z,k,T,C;S<M;++S)p=t[S],E=p.source,A=p.target,z=A.x+A.vx-E.x-E.vx||wt(u),k=A.y+A.vy-E.y-E.vy||wt(u),T=Math.sqrt(z*z+k*k),T=(T-o[S])/T*v*i[S],z*=T,k*=T,A.vx-=z*(C=l[S]),A.vy-=k*C,E.vx+=z*(C=1-C),E.vy+=k*C}function d(){if(a){var v,m=a.length,M=t.length,S=new Map(a.map((E,A)=>[n(E,A,a),E])),p;for(v=0,s=new Array(m);v<M;++v)p=t[v],p.index=v,typeof p.source!="object"&&(p.source=fi(S,p.source)),typeof p.target!="object"&&(p.target=fi(S,p.target)),s[p.source.index]=(s[p.source.index]||0)+1,s[p.target.index]=(s[p.target.index]||0)+1;for(v=0,l=new Array(M);v<M;++v)p=t[v],l[v]=s[p.source.index]/(s[p.source.index]+s[p.target.index]);i=new Array(M),g(),o=new Array(M),_()}}function g(){if(a)for(var v=0,m=t.length;v<m;++v)i[v]=+e(t[v],v,t)}function _(){if(a)for(var v=0,m=t.length;v<m;++v)o[v]=+r(t[v],v,t)}return f.initialize=function(v,m){a=v,u=m,d()},f.links=function(v){return arguments.length?(t=v,d(),f):t},f.id=function(v){return arguments.length?(n=v,f):n},f.iterations=function(v){return arguments.length?(c=+v,f):c},f.strength=function(v){return arguments.length?(e=typeof v=="function"?v:St(+v),g(),f):e},f.distance=function(v){return arguments.length?(r=typeof v=="function"?v:St(+v),_(),f):r},f}const xl=1664525,wl=1013904223,hi=4294967296;function Ml(){let t=1;return()=>(t=(xl*t+wl)%hi)/hi}function El(t){return t.x}function Sl(t){return t.y}var Nl=10,Al=Math.PI*(3-Math.sqrt(5));function bl(t){var n,e=1,i=.001,r=1-Math.pow(i,1/300),o=0,a=.6,s=new Map,l=De(h),u=en("tick","end"),c=Ml();t==null&&(t=[]);function h(){f(),u.call("tick",n),e<i&&(l.stop(),u.call("end",n))}function f(_){var v,m=t.length,M;_===void 0&&(_=1);for(var S=0;S<_;++S)for(e+=(o-e)*r,s.forEach(function(p){p(e)}),v=0;v<m;++v)M=t[v],M.fx==null?M.x+=M.vx*=a:(M.x=M.fx,M.vx=0),M.fy==null?M.y+=M.vy*=a:(M.y=M.fy,M.vy=0);return n}function d(){for(var _=0,v=t.length,m;_<v;++_){if(m=t[_],m.index=_,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var M=Nl*Math.sqrt(.5+_),S=_*Al;m.x=M*Math.cos(S),m.y=M*Math.sin(S)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function g(_){return _.initialize&&_.initialize(t,c),_}return d(),n={tick:f,restart:function(){return l.restart(h),n},stop:function(){return l.stop(),n},nodes:function(_){return arguments.length?(t=_,d(),s.forEach(g),n):t},alpha:function(_){return arguments.length?(e=+_,n):e},alphaMin:function(_){return arguments.length?(i=+_,n):i},alphaDecay:function(_){return arguments.length?(r=+_,n):+r},alphaTarget:function(_){return arguments.length?(o=+_,n):o},velocityDecay:function(_){return arguments.length?(a=1-_,n):1-a},randomSource:function(_){return arguments.length?(c=_,s.forEach(g),n):c},force:function(_,v){return arguments.length>1?(v==null?s.delete(_):s.set(_,g(v)),n):s.get(_)},find:function(_,v,m){var M=0,S=t.length,p,E,A,z,k;for(m==null?m=1/0:m*=m,M=0;M<S;++M)z=t[M],p=_-z.x,E=v-z.y,A=p*p+E*E,A<m&&(k=z,m=A);return k},on:function(_,v){return arguments.length>1?(u.on(_,v),n):u.on(_)}}}function kl(){var t,n,e,i,r=St(-30),o,a=1,s=1/0,l=.81;function u(d){var g,_=t.length,v=Fe(t,El,Sl).visitAfter(h);for(i=d,g=0;g<_;++g)n=t[g],v.visit(f)}function c(){if(t){var d,g=t.length,_;for(o=new Array(g),d=0;d<g;++d)_=t[d],o[_.index]=+r(_,d,t)}}function h(d){var g=0,_,v,m=0,M,S,p;if(d.length){for(M=S=p=0;p<4;++p)(_=d[p])&&(v=Math.abs(_.value))&&(g+=_.value,m+=v,M+=v*_.x,S+=v*_.y);d.x=M/m,d.y=S/m}else{_=d,_.x=_.data.x,_.y=_.data.y;do g+=o[_.data.index];while(_=_.next)}d.value=g}function f(d,g,_,v){if(!d.value)return!0;var m=d.x-n.x,M=d.y-n.y,S=v-g,p=m*m+M*M;if(S*S/l<p)return p<s&&(m===0&&(m=wt(e),p+=m*m),M===0&&(M=wt(e),p+=M*M),p<a&&(p=Math.sqrt(a*p)),n.vx+=m*d.value*i/p,n.vy+=M*d.value*i/p),!0;if(d.length||p>=s)return;(d.data!==n||d.next)&&(m===0&&(m=wt(e),p+=m*m),M===0&&(M=wt(e),p+=M*M),p<a&&(p=Math.sqrt(a*p)));do d.data!==n&&(S=o[d.data.index]*i/p,n.vx+=m*S,n.vy+=M*S);while(d=d.next)}return u.initialize=function(d,g){t=d,e=g,c()},u.strength=function(d){return arguments.length?(r=typeof d=="function"?d:St(+d),c(),u):r},u.distanceMin=function(d){return arguments.length?(a=d*d,u):Math.sqrt(a)},u.distanceMax=function(d){return arguments.length?(s=d*d,u):Math.sqrt(s)},u.theta=function(d){return arguments.length?(l=d*d,u):Math.sqrt(l)},u}function zl(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function In(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,i=t.slice(0,e);return[i.length>1?i[0]+i.slice(2):i,+t.slice(e+1)]}function Rt(t){return t=In(Math.abs(t)),t?t[1]:NaN}function Tl(t,n){return function(e,i){for(var r=e.length,o=[],a=0,s=t[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(e.substring(r-=s,r+s)),!((l+=s+1)>i));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}}function Cl(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var $l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ln(t){if(!(n=$l.exec(t)))throw new Error("invalid format: "+t);var n;return new Xe({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Ln.prototype=Xe.prototype;function Xe(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Xe.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Il(t){t:for(var n=t.length,e=1,i=-1,r;e<n;++e)switch(t[e]){case".":i=r=e;break;case"0":i===0&&(i=e),r=e;break;default:if(!+t[e])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var Cr;function Ll(t,n){var e=In(t,n);if(!e)return t+"";var i=e[0],r=e[1],o=r-(Cr=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+In(t,Math.max(0,n+o-1))[0]}function di(t,n){var e=In(t,n);if(!e)return t+"";var i=e[0],r=e[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const pi={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:zl,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>di(t*100,n),r:di,s:Ll,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function gi(t){return t}var mi=Array.prototype.map,vi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Pl(t){var n=t.grouping===void 0||t.thousands===void 0?gi:Tl(mi.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?gi:Cl(mi.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Ln(h);var f=h.fill,d=h.align,g=h.sign,_=h.symbol,v=h.zero,m=h.width,M=h.comma,S=h.precision,p=h.trim,E=h.type;E==="n"?(M=!0,E="g"):pi[E]||(S===void 0&&(S=12),p=!0,E="g"),(v||f==="0"&&d==="=")&&(v=!0,f="0",d="=");var A=_==="$"?e:_==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",z=_==="$"?i:/[%p]/.test(E)?a:"",k=pi[E],T=/[defgprs%]/.test(E);S=S===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function C(N){var R=A,L=z,y,x,w;if(E==="c")L=k(N)+L,N="";else{N=+N;var b=N<0||1/N<0;if(N=isNaN(N)?l:k(Math.abs(N),S),p&&(N=Il(N)),b&&+N==0&&g!=="+"&&(b=!1),R=(b?g==="("?g:s:g==="-"||g==="("?"":g)+R,L=(E==="s"?vi[8+Cr/3]:"")+L+(b&&g==="("?")":""),T){for(y=-1,x=N.length;++y<x;)if(w=N.charCodeAt(y),48>w||w>57){L=(w===46?r+N.slice(y+1):N.slice(y))+L,N=N.slice(0,y);break}}}M&&!v&&(N=n(N,1/0));var $=R.length+N.length+L.length,I=$<m?new Array(m-$+1).join(f):"";switch(M&&v&&(N=n(I+N,I.length?m-L.length:1/0),I=""),d){case"<":N=R+N+L+I;break;case"=":N=R+I+N+L;break;case"^":N=I.slice(0,$=I.length>>1)+R+N+L+I.slice($);break;default:N=I+R+N+L;break}return o(N)}return C.toString=function(){return h+""},C}function c(h,f){var d=u((h=Ln(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(Rt(f)/3)))*3,_=Math.pow(10,-g),v=vi[8+g/3];return function(m){return d(_*m)+v}}return{format:u,formatPrefix:c}}var cn,$r,Ir;Rl({thousands:",",grouping:[3],currency:["$",""]});function Rl(t){return cn=Pl(t),$r=cn.format,Ir=cn.formatPrefix,cn}function Dl(t){return Math.max(0,-Rt(Math.abs(t)))}function ql(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rt(n)/3)))*3-Rt(Math.abs(t)))}function Ol(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Rt(n)-Rt(t))+1}var F=1e-6,Fl=1e-12,q=Math.PI,Q=q/2,yi=q/4,et=q*2,tt=180/q,G=q/180,X=Math.abs,Lr=Math.atan,Jt=Math.atan2,Y=Math.cos,Bl=Math.exp,Xl=Math.log,Z=Math.sin,Hl=Math.sign||function(t){return t>0?1:t<0?-1:0},zt=Math.sqrt,Yl=Math.tan;function Zl(t){return t>1?0:t<-1?q:Math.acos(t)}function tn(t){return t>1?Q:t<-1?-Q:Math.asin(t)}function it(){}function Pn(t,n){t&&xi.hasOwnProperty(t.type)&&xi[t.type](t,n)}var _i={Feature:function(t,n){Pn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,i=-1,r=e.length;++i<r;)Pn(e[i].geometry,n)}},xi={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)t=e[i],n.point(t[0],t[1],t[2])},LineString:function(t,n){ge(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)ge(e[i],n,0)},Polygon:function(t,n){wi(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)wi(e[i],n)},GeometryCollection:function(t,n){for(var e=t.geometries,i=-1,r=e.length;++i<r;)Pn(e[i],n)}};function ge(t,n,e){var i=-1,r=t.length-e,o;for(n.lineStart();++i<r;)o=t[i],n.point(o[0],o[1],o[2]);n.lineEnd()}function wi(t,n){var e=-1,i=t.length;for(n.polygonStart();++e<i;)ge(t[e],n,1);n.polygonEnd()}function Tt(t,n){t&&_i.hasOwnProperty(t.type)?_i[t.type](t,n):Pn(t,n)}function me(t){return[Jt(t[1],t[0]),tn(t[2])]}function Dt(t){var n=t[0],e=t[1],i=Y(e);return[i*Y(n),i*Z(n),Z(e)]}function fn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Rn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Jn(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function hn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function ve(t){var n=zt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function ye(t,n){function e(i,r){return i=t(i,r),n(i[0],i[1])}return t.invert&&n.invert&&(e.invert=function(i,r){return i=n.invert(i,r),i&&t.invert(i[0],i[1])}),e}function _e(t,n){return X(t)>q&&(t-=Math.round(t/et)*et),[t,n]}_e.invert=_e;function Pr(t,n,e){return(t%=et)?n||e?ye(Ei(t),Si(n,e)):Ei(t):n||e?Si(n,e):_e}function Mi(t){return function(n,e){return n+=t,X(n)>q&&(n-=Math.round(n/et)*et),[n,e]}}function Ei(t){var n=Mi(t);return n.invert=Mi(-t),n}function Si(t,n){var e=Y(t),i=Z(t),r=Y(n),o=Z(n);function a(s,l){var u=Y(l),c=Y(s)*u,h=Z(s)*u,f=Z(l),d=f*e+c*i;return[Jt(h*r-d*o,c*e-f*i),tn(d*r+h*o)]}return a.invert=function(s,l){var u=Y(l),c=Y(s)*u,h=Z(s)*u,f=Z(l),d=f*r-h*o;return[Jt(h*r+f*o,c*e+d*i),tn(d*e-c*i)]},a}function Vl(t){t=Pr(t[0]*G,t[1]*G,t.length>2?t[2]*G:0);function n(e){return e=t(e[0]*G,e[1]*G),e[0]*=tt,e[1]*=tt,e}return n.invert=function(e){return e=t.invert(e[0]*G,e[1]*G),e[0]*=tt,e[1]*=tt,e},n}function Gl(t,n,e,i,r,o){if(e){var a=Y(n),s=Z(n),l=i*e;r==null?(r=n+i*et,o=n-l/2):(r=Ni(a,r),o=Ni(a,o),(i>0?r<o:r>o)&&(r+=i*et));for(var u,c=r;i>0?c>o:c<o;c-=l)u=me([a,-s*Y(c),-s*Z(c)]),t.point(u[0],u[1])}}function Ni(t,n){n=Dt(n),n[0]-=t,ve(n);var e=Zl(-n[1]);return((-n[2]<0?-e:e)+et-F)%et}function Rr(){var t=[],n;return{point:function(e,i,r){n.push([e,i,r])},lineStart:function(){t.push(n=[])},lineEnd:it,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function En(t,n){return X(t[0]-n[0])<F&&X(t[1]-n[1])<F}function dn(t,n,e,i){this.x=t,this.z=n,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function Dr(t,n,e,i,r){var o=[],a=[],s,l;if(t.forEach(function(g){if(!((_=g.length-1)<=0)){var _,v=g[0],m=g[_],M;if(En(v,m)){if(!v[2]&&!m[2]){for(r.lineStart(),s=0;s<_;++s)r.point((v=g[s])[0],v[1]);r.lineEnd();return}m[0]+=2*F}o.push(M=new dn(v,g,null,!0)),a.push(M.o=new dn(v,null,M,!1)),o.push(M=new dn(m,g,null,!1)),a.push(M.o=new dn(m,null,M,!0))}}),!!o.length){for(a.sort(n),Ai(o),Ai(a),s=0,l=a.length;s<l;++s)a[s].e=e=!e;for(var u=o[0],c,h;;){for(var f=u,d=!0;f.v;)if((f=f.n)===u)return;c=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(s=0,l=c.length;s<l;++s)r.point((h=c[s])[0],h[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(d)for(c=f.p.z,s=c.length-1;s>=0;--s)r.point((h=c[s])[0],h[1]);else i(f.x,f.p.x,-1,r);f=f.p}f=f.o,c=f.z,d=!d}while(!f.v);r.lineEnd()}}}function Ai(t){if(n=t.length){for(var n,e=0,i=t[0],r;++e<n;)i.n=r=t[e],r.p=i,i=r;i.n=r=t[0],r.p=i}}function te(t){return X(t[0])<=q?t[0]:Hl(t[0])*((X(t[0])+q)%et-q)}function Wl(t,n){var e=te(n),i=n[1],r=Z(i),o=[Z(e),-Y(e),0],a=0,s=0,l=new Nt;r===1?i=Q+F:r===-1&&(i=-Q-F);for(var u=0,c=t.length;u<c;++u)if(f=(h=t[u]).length)for(var h,f,d=h[f-1],g=te(d),_=d[1]/2+yi,v=Z(_),m=Y(_),M=0;M<f;++M,g=p,v=A,m=z,d=S){var S=h[M],p=te(S),E=S[1]/2+yi,A=Z(E),z=Y(E),k=p-g,T=k>=0?1:-1,C=T*k,N=C>q,R=v*A;if(l.add(Jt(R*T*Z(C),m*z+R*Y(C))),a+=N?k+T*et:k,N^g>=e^p>=e){var L=Rn(Dt(d),Dt(S));ve(L);var y=Rn(o,L);ve(y);var x=(N^k>=0?-1:1)*tn(y[2]);(i>x||i===x&&(L[0]||L[1]))&&(s+=N^k>=0?1:-1)}}return(a<-F||a<F&&l<-Fl)^s&1}function qr(t,n,e,i){return function(r){var o=n(r),a=Rr(),s=n(a),l=!1,u,c,h,f={point:d,lineStart:_,lineEnd:v,polygonStart:function(){f.point=m,f.lineStart=M,f.lineEnd=S,c=[],u=[]},polygonEnd:function(){f.point=d,f.lineStart=_,f.lineEnd=v,c=er(c);var p=Wl(u,i);c.length?(l||(r.polygonStart(),l=!0),Dr(c,Ul,p,e,r)):p&&(l||(r.polygonStart(),l=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),c=u=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(p,E){t(p,E)&&r.point(p,E)}function g(p,E){o.point(p,E)}function _(){f.point=g,o.lineStart()}function v(){f.point=d,o.lineEnd()}function m(p,E){h.push([p,E]),s.point(p,E)}function M(){s.lineStart(),h=[]}function S(){m(h[0][0],h[0][1]),s.lineEnd();var p=s.clean(),E=a.result(),A,z=E.length,k,T,C;if(h.pop(),u.push(h),h=null,!!z){if(p&1){if(T=E[0],(k=T.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),A=0;A<k;++A)r.point((C=T[A])[0],C[1]);r.lineEnd()}return}z>1&&p&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(Kl))}}return f}}function Kl(t){return t.length>1}function Ul(t,n){return((t=t.x)[0]<0?t[1]-Q-F:Q-t[1])-((n=n.x)[0]<0?n[1]-Q-F:Q-n[1])}const bi=qr(function(){return!0},jl,Jl,[-q,-Q]);function jl(t){var n=NaN,e=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,a){var s=o>0?q:-q,l=X(o-n);X(l-q)<F?(t.point(n,e=(e+a)/2>0?Q:-Q),t.point(i,e),t.lineEnd(),t.lineStart(),t.point(s,e),t.point(o,e),r=0):i!==s&&l>=q&&(X(n-i)<F&&(n-=i*F),X(o-s)<F&&(o-=s*F),e=Ql(n,e,o,a),t.point(i,e),t.lineEnd(),t.lineStart(),t.point(s,e),r=0),t.point(n=o,e=a),i=s},lineEnd:function(){t.lineEnd(),n=e=NaN},clean:function(){return 2-r}}}function Ql(t,n,e,i){var r,o,a=Z(t-e);return X(a)>F?Lr((Z(n)*(o=Y(i))*Z(e)-Z(i)*(r=Y(n))*Z(t))/(r*o*a)):(n+i)/2}function Jl(t,n,e,i){var r;if(t==null)r=e*Q,i.point(-q,r),i.point(0,r),i.point(q,r),i.point(q,0),i.point(q,-r),i.point(0,-r),i.point(-q,-r),i.point(-q,0),i.point(-q,r);else if(X(t[0]-n[0])>F){var o=t[0]<n[0]?q:-q;r=e*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(n[0],n[1])}function tc(t){var n=Y(t),e=6*G,i=n>0,r=X(n)>F;function o(c,h,f,d){Gl(d,t,e,f,c,h)}function a(c,h){return Y(c)*Y(h)>n}function s(c){var h,f,d,g,_;return{lineStart:function(){g=d=!1,_=1},point:function(v,m){var M=[v,m],S,p=a(v,m),E=i?p?0:u(v,m):p?u(v+(v<0?q:-q),m):0;if(!h&&(g=d=p)&&c.lineStart(),p!==d&&(S=l(h,M),(!S||En(h,S)||En(M,S))&&(M[2]=1)),p!==d)_=0,p?(c.lineStart(),S=l(M,h),c.point(S[0],S[1])):(S=l(h,M),c.point(S[0],S[1],2),c.lineEnd()),h=S;else if(r&&h&&i^p){var A;!(E&f)&&(A=l(M,h,!0))&&(_=0,i?(c.lineStart(),c.point(A[0][0],A[0][1]),c.point(A[1][0],A[1][1]),c.lineEnd()):(c.point(A[1][0],A[1][1]),c.lineEnd(),c.lineStart(),c.point(A[0][0],A[0][1],3)))}p&&(!h||!En(h,M))&&c.point(M[0],M[1]),h=M,d=p,f=E},lineEnd:function(){d&&c.lineEnd(),h=null},clean:function(){return _|(g&&d)<<1}}}function l(c,h,f){var d=Dt(c),g=Dt(h),_=[1,0,0],v=Rn(d,g),m=fn(v,v),M=v[0],S=m-M*M;if(!S)return!f&&c;var p=n*m/S,E=-n*M/S,A=Rn(_,v),z=hn(_,p),k=hn(v,E);Jn(z,k);var T=A,C=fn(z,T),N=fn(T,T),R=C*C-N*(fn(z,z)-1);if(!(R<0)){var L=zt(R),y=hn(T,(-C-L)/N);if(Jn(y,z),y=me(y),!f)return y;var x=c[0],w=h[0],b=c[1],$=h[1],I;w<x&&(I=x,x=w,w=I);var P=w-x,D=X(P-q)<F,O=D||P<F;if(!D&&$<b&&(I=b,b=$,$=I),O?D?b+$>0^y[1]<(X(y[0]-x)<F?b:$):b<=y[1]&&y[1]<=$:P>q^(x<=y[0]&&y[0]<=w)){var V=hn(T,(-C+L)/N);return Jn(V,z),[y,me(V)]}}}function u(c,h){var f=i?t:q-t,d=0;return c<-f?d|=1:c>f&&(d|=2),h<-f?d|=4:h>f&&(d|=8),d}return qr(a,s,o,i?[0,-t]:[-q,t-q])}function nc(t,n,e,i,r,o){var a=t[0],s=t[1],l=n[0],u=n[1],c=0,h=1,f=l-a,d=u-s,g;if(g=e-a,!(!f&&g>0)){if(g/=f,f<0){if(g<c)return;g<h&&(h=g)}else if(f>0){if(g>h)return;g>c&&(c=g)}if(g=r-a,!(!f&&g<0)){if(g/=f,f<0){if(g>h)return;g>c&&(c=g)}else if(f>0){if(g<c)return;g<h&&(h=g)}if(g=i-s,!(!d&&g>0)){if(g/=d,d<0){if(g<c)return;g<h&&(h=g)}else if(d>0){if(g>h)return;g>c&&(c=g)}if(g=o-s,!(!d&&g<0)){if(g/=d,d<0){if(g>h)return;g>c&&(c=g)}else if(d>0){if(g<c)return;g<h&&(h=g)}return c>0&&(t[0]=a+c*f,t[1]=s+c*d),h<1&&(n[0]=a+h*f,n[1]=s+h*d),!0}}}}}var Ht=1e9,pn=-Ht;function ec(t,n,e,i){function r(u,c){return t<=u&&u<=e&&n<=c&&c<=i}function o(u,c,h,f){var d=0,g=0;if(u==null||(d=a(u,h))!==(g=a(c,h))||l(u,c)<0^h>0)do f.point(d===0||d===3?t:e,d>1?i:n);while((d=(d+h+4)%4)!==g);else f.point(c[0],c[1])}function a(u,c){return X(u[0]-t)<F?c>0?0:3:X(u[0]-e)<F?c>0?2:1:X(u[1]-n)<F?c>0?1:0:c>0?3:2}function s(u,c){return l(u.x,c.x)}function l(u,c){var h=a(u,1),f=a(c,1);return h!==f?h-f:h===0?c[1]-u[1]:h===1?u[0]-c[0]:h===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,h=Rr(),f,d,g,_,v,m,M,S,p,E,A,z={point:k,lineStart:R,lineEnd:L,polygonStart:C,polygonEnd:N};function k(x,w){r(x,w)&&c.point(x,w)}function T(){for(var x=0,w=0,b=d.length;w<b;++w)for(var $=d[w],I=1,P=$.length,D=$[0],O,V,H=D[0],W=D[1];I<P;++I)O=H,V=W,D=$[I],H=D[0],W=D[1],V<=i?W>i&&(H-O)*(i-V)>(W-V)*(t-O)&&++x:W<=i&&(H-O)*(i-V)<(W-V)*(t-O)&&--x;return x}function C(){c=h,f=[],d=[],A=!0}function N(){var x=T(),w=A&&x,b=(f=er(f)).length;(w||b)&&(u.polygonStart(),w&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),b&&Dr(f,s,x,o,u),u.polygonEnd()),c=u,f=d=g=null}function R(){z.point=y,d&&d.push(g=[]),E=!0,p=!1,M=S=NaN}function L(){f&&(y(_,v),m&&p&&h.rejoin(),f.push(h.result())),z.point=k,p&&c.lineEnd()}function y(x,w){var b=r(x,w);if(d&&g.push([x,w]),E)_=x,v=w,m=b,E=!1,b&&(c.lineStart(),c.point(x,w));else if(b&&p)c.point(x,w);else{var $=[M=Math.max(pn,Math.min(Ht,M)),S=Math.max(pn,Math.min(Ht,S))],I=[x=Math.max(pn,Math.min(Ht,x)),w=Math.max(pn,Math.min(Ht,w))];nc($,I,t,n,e,i)?(p||(c.lineStart(),c.point($[0],$[1])),c.point(I[0],I[1]),b||c.lineEnd(),A=!1):b&&(c.lineStart(),c.point(x,w),A=!1)}M=x,S=w,p=b}return z}}const xe=t=>t;var ne=new Nt,we=new Nt,Or,Fr,Me,Ee,xt={point:it,lineStart:it,lineEnd:it,polygonStart:function(){xt.lineStart=ic,xt.lineEnd=oc},polygonEnd:function(){xt.lineStart=xt.lineEnd=xt.point=it,ne.add(X(we)),we=new Nt},result:function(){var t=ne/2;return ne=new Nt,t}};function ic(){xt.point=rc}function rc(t,n){xt.point=Br,Or=Me=t,Fr=Ee=n}function Br(t,n){we.add(Ee*t-Me*n),Me=t,Ee=n}function oc(){Br(Or,Fr)}const ki=xt;var qt=1/0,Dn=qt,nn=-qt,qn=nn,ac={point:sc,lineStart:it,lineEnd:it,polygonStart:it,polygonEnd:it,result:function(){var t=[[qt,Dn],[nn,qn]];return nn=qn=-(Dn=qt=1/0),t}};function sc(t,n){t<qt&&(qt=t),t>nn&&(nn=t),n<Dn&&(Dn=n),n>qn&&(qn=n)}const On=ac;var Se=0,Ne=0,Yt=0,Fn=0,Bn=0,Ct=0,Ae=0,be=0,Zt=0,Xr,Hr,lt,ct,st={point:kt,lineStart:zi,lineEnd:Ti,polygonStart:function(){st.lineStart=cc,st.lineEnd=fc},polygonEnd:function(){st.point=kt,st.lineStart=zi,st.lineEnd=Ti},result:function(){var t=Zt?[Ae/Zt,be/Zt]:Ct?[Fn/Ct,Bn/Ct]:Yt?[Se/Yt,Ne/Yt]:[NaN,NaN];return Se=Ne=Yt=Fn=Bn=Ct=Ae=be=Zt=0,t}};function kt(t,n){Se+=t,Ne+=n,++Yt}function zi(){st.point=uc}function uc(t,n){st.point=lc,kt(lt=t,ct=n)}function lc(t,n){var e=t-lt,i=n-ct,r=zt(e*e+i*i);Fn+=r*(lt+t)/2,Bn+=r*(ct+n)/2,Ct+=r,kt(lt=t,ct=n)}function Ti(){st.point=kt}function cc(){st.point=hc}function fc(){Yr(Xr,Hr)}function hc(t,n){st.point=Yr,kt(Xr=lt=t,Hr=ct=n)}function Yr(t,n){var e=t-lt,i=n-ct,r=zt(e*e+i*i);Fn+=r*(lt+t)/2,Bn+=r*(ct+n)/2,Ct+=r,r=ct*t-lt*n,Ae+=r*(lt+t),be+=r*(ct+n),Zt+=r*3,kt(lt=t,ct=n)}const Ci=st;function Zr(t){this._context=t}Zr.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,et);break}}},result:it};var ke=new Nt,ee,Vr,Gr,Vt,Gt,Xn={point:it,lineStart:function(){Xn.point=dc},lineEnd:function(){ee&&Wr(Vr,Gr),Xn.point=it},polygonStart:function(){ee=!0},polygonEnd:function(){ee=null},result:function(){var t=+ke;return ke=new Nt,t}};function dc(t,n){Xn.point=Wr,Vr=Vt=t,Gr=Gt=n}function Wr(t,n){Vt-=t,Gt-=n,ke.add(zt(Vt*Vt+Gt*Gt)),Vt=t,Gt=n}const $i=Xn;let Ii,Hn,Li,Pi;class Ri{constructor(n){this._append=n==null?Kr:pc(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,e){switch(this._point){case 0:{this._append`M${n},${e}`,this._point=1;break}case 1:{this._append`L${n},${e}`;break}default:{if(this._append`M${n},${e}`,this._radius!==Li||this._append!==Hn){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Li=i,Hn=this._append,Pi=this._,this._=r}this._+=Pi;break}}}result(){const n=this._;return this._="",n.length?n:null}}function Kr(t){let n=1;this._+=t[0];for(const e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function pc(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return Kr;if(n!==Ii){const e=10**n;Ii=n,Hn=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*e)/e+r[o]}}return Hn}function Di(t,n){let e=3,i=4.5,r,o;function a(s){return s&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),Tt(s,r(o))),o.result()}return a.area=function(s){return Tt(s,r(ki)),ki.result()},a.measure=function(s){return Tt(s,r($i)),$i.result()},a.bounds=function(s){return Tt(s,r(On)),On.result()},a.centroid=function(s){return Tt(s,r(Ci)),Ci.result()},a.projection=function(s){return arguments.length?(r=s==null?(t=null,xe):(t=s).stream,a):t},a.context=function(s){return arguments.length?(o=s==null?(n=null,new Ri(e)):new Zr(n=s),typeof i!="function"&&o.pointRadius(i),a):n},a.pointRadius=function(s){return arguments.length?(i=typeof s=="function"?s:(o.pointRadius(+s),+s),a):i},a.digits=function(s){if(!arguments.length)return e;if(s==null)e=null;else{const l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);e=l}return n===null&&(o=new Ri(e)),a},a.projection(t).digits(e).context(n)}function He(t){return function(n){var e=new ze;for(var i in t)e[i]=t[i];return e.stream=n,e}}function ze(){}ze.prototype={constructor:ze,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ye(t,n,e){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),Tt(e,t.stream(On)),n(On.result()),i!=null&&t.clipExtent(i),t}function Ur(t,n,e){return Ye(t,function(i){var r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),s=+n[0][0]+(r-a*(i[1][0]+i[0][0]))/2,l=+n[0][1]+(o-a*(i[1][1]+i[0][1]))/2;t.scale(150*a).translate([s,l])},e)}function gc(t,n,e){return Ur(t,[[0,0],n],e)}function mc(t,n,e){return Ye(t,function(i){var r=+n,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,s=-o*i[0][1];t.scale(150*o).translate([a,s])},e)}function vc(t,n,e){return Ye(t,function(i){var r=+n,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],s=(r-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,s])},e)}var qi=16,yc=Y(30*G);function Oi(t,n){return+n?xc(t,n):_c(t)}function _c(t){return He({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}function xc(t,n){function e(i,r,o,a,s,l,u,c,h,f,d,g,_,v){var m=u-i,M=c-r,S=m*m+M*M;if(S>4*n&&_--){var p=a+f,E=s+d,A=l+g,z=zt(p*p+E*E+A*A),k=tn(A/=z),T=X(X(A)-1)<F||X(o-h)<F?(o+h)/2:Jt(E,p),C=t(T,k),N=C[0],R=C[1],L=N-i,y=R-r,x=M*L-m*y;(x*x/S>n||X((m*L+M*y)/S-.5)>.3||a*f+s*d+l*g<yc)&&(e(i,r,o,a,s,l,N,R,T,p/=z,E/=z,A,_,v),v.point(N,R),e(N,R,T,p,E,A,u,c,h,f,d,g,_,v))}}return function(i){var r,o,a,s,l,u,c,h,f,d,g,_,v={point:m,lineStart:M,lineEnd:p,polygonStart:function(){i.polygonStart(),v.lineStart=E},polygonEnd:function(){i.polygonEnd(),v.lineStart=M}};function m(k,T){k=t(k,T),i.point(k[0],k[1])}function M(){h=NaN,v.point=S,i.lineStart()}function S(k,T){var C=Dt([k,T]),N=t(k,T);e(h,f,c,d,g,_,h=N[0],f=N[1],c=k,d=C[0],g=C[1],_=C[2],qi,i),i.point(h,f)}function p(){v.point=m,i.lineEnd()}function E(){M(),v.point=A,v.lineEnd=z}function A(k,T){S(r=k,T),o=h,a=f,s=d,l=g,u=_,v.point=S}function z(){e(h,f,c,d,g,_,o,a,r,s,l,u,qi,i),v.lineEnd=p,p()}return v}}var wc=He({point:function(t,n){this.stream.point(t*G,n*G)}});function Mc(t){return He({point:function(n,e){var i=t(n,e);return this.stream.point(i[0],i[1])}})}function Ec(t,n,e,i,r){function o(a,s){return a*=i,s*=r,[n+t*a,e-t*s]}return o.invert=function(a,s){return[(a-n)/t*i,(e-s)/t*r]},o}function Fi(t,n,e,i,r,o){if(!o)return Ec(t,n,e,i,r);var a=Y(o),s=Z(o),l=a*t,u=s*t,c=a/t,h=s/t,f=(s*e-a*n)/t,d=(s*n+a*e)/t;function g(_,v){return _*=i,v*=r,[l*_-u*v+n,e-u*_-l*v]}return g.invert=function(_,v){return[i*(c*_-h*v+f),r*(d-h*_-c*v)]},g}function Sc(t){return Nc(function(){return t})()}function Nc(t){var n,e=150,i=480,r=250,o=0,a=0,s=0,l=0,u=0,c,h=0,f=1,d=1,g=null,_=bi,v=null,m,M,S,p=xe,E=.5,A,z,k,T,C;function N(x){return k(x[0]*G,x[1]*G)}function R(x){return x=k.invert(x[0],x[1]),x&&[x[0]*tt,x[1]*tt]}N.stream=function(x){return T&&C===x?T:T=wc(Mc(c)(_(A(p(C=x)))))},N.preclip=function(x){return arguments.length?(_=x,g=void 0,y()):_},N.postclip=function(x){return arguments.length?(p=x,v=m=M=S=null,y()):p},N.clipAngle=function(x){return arguments.length?(_=+x?tc(g=x*G):(g=null,bi),y()):g*tt},N.clipExtent=function(x){return arguments.length?(p=x==null?(v=m=M=S=null,xe):ec(v=+x[0][0],m=+x[0][1],M=+x[1][0],S=+x[1][1]),y()):v==null?null:[[v,m],[M,S]]},N.scale=function(x){return arguments.length?(e=+x,L()):e},N.translate=function(x){return arguments.length?(i=+x[0],r=+x[1],L()):[i,r]},N.center=function(x){return arguments.length?(o=x[0]%360*G,a=x[1]%360*G,L()):[o*tt,a*tt]},N.rotate=function(x){return arguments.length?(s=x[0]%360*G,l=x[1]%360*G,u=x.length>2?x[2]%360*G:0,L()):[s*tt,l*tt,u*tt]},N.angle=function(x){return arguments.length?(h=x%360*G,L()):h*tt},N.reflectX=function(x){return arguments.length?(f=x?-1:1,L()):f<0},N.reflectY=function(x){return arguments.length?(d=x?-1:1,L()):d<0},N.precision=function(x){return arguments.length?(A=Oi(z,E=x*x),y()):zt(E)},N.fitExtent=function(x,w){return Ur(N,x,w)},N.fitSize=function(x,w){return gc(N,x,w)},N.fitWidth=function(x,w){return mc(N,x,w)},N.fitHeight=function(x,w){return vc(N,x,w)};function L(){var x=Fi(e,0,0,f,d,h).apply(null,n(o,a)),w=Fi(e,i-x[0],r-x[1],f,d,h);return c=Pr(s,l,u),z=ye(n,w),k=ye(c,z),A=Oi(z,E),y()}function y(){return T=C=null,N}return function(){return n=t.apply(this,arguments),N.invert=n.invert&&R,L()}}function Ze(t,n){return[t,Xl(Yl((Q+n)/2))]}Ze.invert=function(t,n){return[t,2*Lr(Bl(n))-Q]};function Ac(){return bc(Ze).scale(961/et)}function bc(t){var n=Sc(t),e=n.center,i=n.scale,r=n.translate,o=n.clipExtent,a=null,s,l,u;n.scale=function(h){return arguments.length?(i(h),c()):i()},n.translate=function(h){return arguments.length?(r(h),c()):r()},n.center=function(h){return arguments.length?(e(h),c()):e()},n.clipExtent=function(h){return arguments.length?(h==null?a=s=l=u=null:(a=+h[0][0],s=+h[0][1],l=+h[1][0],u=+h[1][1]),c()):a==null?null:[[a,s],[l,u]]};function c(){var h=q*i(),f=n(Vl(n.rotate()).invert([0,0]));return o(a==null?[[f[0]-h,f[1]-h],[f[0]+h,f[1]+h]]:t===Ze?[[Math.max(f[0]-h,a),s],[Math.min(f[0]+h,l),u]]:[[a,Math.max(f[1]-h,s)],[l,Math.min(f[1]+h,u)]])}return c()}function kc(t){var n=0,e=t.children,i=e&&e.length;if(!i)n=1;else for(;--i>=0;)n+=e[i].value;t.value=n}function zc(){return this.eachAfter(kc)}function Tc(t,n){let e=-1;for(const i of this)t.call(n,i,++e,this);return this}function Cc(t,n){for(var e=this,i=[e],r,o,a=-1;e=i.pop();)if(t.call(n,e,++a,this),r=e.children)for(o=r.length-1;o>=0;--o)i.push(r[o]);return this}function $c(t,n){for(var e=this,i=[e],r=[],o,a,s,l=-1;e=i.pop();)if(r.push(e),o=e.children)for(a=0,s=o.length;a<s;++a)i.push(o[a]);for(;e=r.pop();)t.call(n,e,++l,this);return this}function Ic(t,n){let e=-1;for(const i of this)if(t.call(n,i,++e,this))return i}function Lc(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,i=n.children,r=i&&i.length;--r>=0;)e+=i[r].value;n.value=e})}function Pc(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function Rc(t){for(var n=this,e=Dc(n,t),i=[n];n!==e;)n=n.parent,i.push(n);for(var r=i.length;t!==e;)i.splice(r,0,t),t=t.parent;return i}function Dc(t,n){if(t===n)return t;var e=t.ancestors(),i=n.ancestors(),r=null;for(t=e.pop(),n=i.pop();t===n;)r=t,t=e.pop(),n=i.pop();return r}function qc(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function Oc(){return Array.from(this)}function Fc(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function Bc(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n}function*Xc(){var t=this,n,e=[t],i,r,o;do for(n=e.reverse(),e=[];t=n.pop();)if(yield t,i=t.children)for(r=0,o=i.length;r<o;++r)e.push(i[r]);while(e.length)}function Ve(t,n){t instanceof Map?(t=[void 0,t],n===void 0&&(n=Zc)):n===void 0&&(n=Yc);for(var e=new Yn(t),i,r=[e],o,a,s,l;i=r.pop();)if((a=n(i.data))&&(l=(a=Array.from(a)).length))for(i.children=a,s=l-1;s>=0;--s)r.push(o=a[s]=new Yn(a[s])),o.parent=i,o.depth=i.depth+1;return e.eachBefore(Gc)}function Hc(){return Ve(this).eachBefore(Vc)}function Yc(t){return t.children}function Zc(t){return Array.isArray(t)?t[1]:null}function Vc(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Gc(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function Yn(t){this.data=t,this.depth=this.height=0,this.parent=null}Yn.prototype=Ve.prototype={constructor:Yn,count:zc,each:Tc,eachAfter:$c,eachBefore:Cc,find:Ic,sum:Lc,sort:Pc,path:Rc,ancestors:qc,descendants:Oc,leaves:Fc,links:Bc,copy:Hc,[Symbol.iterator]:Xc};function Wc(t){return t==null?null:Kc(t)}function Kc(t){if(typeof t!="function")throw new Error;return t}function Bi(){return 0}function Uc(t){return function(){return t}}const jc=1664525,Qc=1013904223,Xi=4294967296;function Jc(){let t=1;return()=>(t=(jc*t+Qc)%Xi)/Xi}function tf(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function nf(t,n){let e=t.length,i,r;for(;e;)r=n()*e--|0,i=t[e],t[e]=t[r],t[r]=i;return t}function ef(t,n){for(var e=0,i=(t=nf(Array.from(t),n)).length,r=[],o,a;e<i;)o=t[e],a&&jr(a,o)?++e:(a=of(r=rf(r,o)),e=0);return a}function rf(t,n){var e,i;if(ie(n,t))return[n];for(e=0;e<t.length;++e)if(gn(n,t[e])&&ie(Wt(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(i=e+1;i<t.length;++i)if(gn(Wt(t[e],t[i]),n)&&gn(Wt(t[e],n),t[i])&&gn(Wt(t[i],n),t[e])&&ie(Qr(t[e],t[i],n),t))return[t[e],t[i],n];throw new Error}function gn(t,n){var e=t.r-n.r,i=n.x-t.x,r=n.y-t.y;return e<0||e*e<i*i+r*r}function jr(t,n){var e=t.r-n.r+Math.max(t.r,n.r,1)*1e-9,i=n.x-t.x,r=n.y-t.y;return e>0&&e*e>i*i+r*r}function ie(t,n){for(var e=0;e<n.length;++e)if(!jr(t,n[e]))return!1;return!0}function of(t){switch(t.length){case 1:return af(t[0]);case 2:return Wt(t[0],t[1]);case 3:return Qr(t[0],t[1],t[2])}}function af(t){return{x:t.x,y:t.y,r:t.r}}function Wt(t,n){var e=t.x,i=t.y,r=t.r,o=n.x,a=n.y,s=n.r,l=o-e,u=a-i,c=s-r,h=Math.sqrt(l*l+u*u);return{x:(e+o+l/h*c)/2,y:(i+a+u/h*c)/2,r:(h+r+s)/2}}function Qr(t,n,e){var i=t.x,r=t.y,o=t.r,a=n.x,s=n.y,l=n.r,u=e.x,c=e.y,h=e.r,f=i-a,d=i-u,g=r-s,_=r-c,v=l-o,m=h-o,M=i*i+r*r-o*o,S=M-a*a-s*s+l*l,p=M-u*u-c*c+h*h,E=d*g-f*_,A=(g*p-_*S)/(E*2)-i,z=(_*v-g*m)/E,k=(d*S-f*p)/(E*2)-r,T=(f*m-d*v)/E,C=z*z+T*T-1,N=2*(o+A*z+k*T),R=A*A+k*k-o*o,L=-(Math.abs(C)>1e-6?(N+Math.sqrt(N*N-4*C*R))/(2*C):R/N);return{x:i+A+z*L,y:r+k+T*L,r:L}}function Hi(t,n,e){var i=t.x-n.x,r,o,a=t.y-n.y,s,l,u=i*i+a*a;u?(o=n.r+e.r,o*=o,l=t.r+e.r,l*=l,o>l?(r=(u+l-o)/(2*u),s=Math.sqrt(Math.max(0,l/u-r*r)),e.x=t.x-r*i-s*a,e.y=t.y-r*a+s*i):(r=(u+o-l)/(2*u),s=Math.sqrt(Math.max(0,o/u-r*r)),e.x=n.x+r*i-s*a,e.y=n.y+r*a+s*i)):(e.x=n.x+e.r,e.y=n.y)}function Yi(t,n){var e=t.r+n.r-1e-6,i=n.x-t.x,r=n.y-t.y;return e>0&&e*e>i*i+r*r}function Zi(t){var n=t._,e=t.next._,i=n.r+e.r,r=(n.x*e.r+e.x*n.r)/i,o=(n.y*e.r+e.y*n.r)/i;return r*r+o*o}function mn(t){this._=t,this.next=null,this.previous=null}function sf(t,n){if(!(o=(t=tf(t)).length))return 0;var e,i,r,o,a,s,l,u,c,h,f;if(e=t[0],e.x=0,e.y=0,!(o>1))return e.r;if(i=t[1],e.x=-i.r,i.x=e.r,i.y=0,!(o>2))return e.r+i.r;Hi(i,e,r=t[2]),e=new mn(e),i=new mn(i),r=new mn(r),e.next=r.previous=i,i.next=e.previous=r,r.next=i.previous=e;t:for(l=3;l<o;++l){Hi(e._,i._,r=t[l]),r=new mn(r),u=i.next,c=e.previous,h=i._.r,f=e._.r;do if(h<=f){if(Yi(u._,r._)){i=u,e.next=i,i.previous=e,--l;continue t}h+=u._.r,u=u.next}else{if(Yi(c._,r._)){e=c,e.next=i,i.previous=e,--l;continue t}f+=c._.r,c=c.previous}while(u!==c.next);for(r.previous=e,r.next=i,e.next=i.previous=i=r,a=Zi(e);(r=r.next)!==i;)(s=Zi(r))<a&&(e=r,a=s);i=e.next}for(e=[i._],r=i;(r=r.next)!==i;)e.push(r._);for(r=ef(e,n),l=0;l<o;++l)e=t[l],e.x-=r.x,e.y-=r.y;return r.r}function uf(t){return Math.sqrt(t.value)}function lf(){var t=null,n=1,e=1,i=Bi;function r(o){const a=Jc();return o.x=n/2,o.y=e/2,t?o.eachBefore(Vi(t)).eachAfter(re(i,.5,a)).eachBefore(Gi(1)):o.eachBefore(Vi(uf)).eachAfter(re(Bi,1,a)).eachAfter(re(i,o.r/Math.min(n,e),a)).eachBefore(Gi(Math.min(n,e)/(2*o.r))),o}return r.radius=function(o){return arguments.length?(t=Wc(o),r):t},r.size=function(o){return arguments.length?(n=+o[0],e=+o[1],r):[n,e]},r.padding=function(o){return arguments.length?(i=typeof o=="function"?o:Uc(+o),r):i},r}function Vi(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function re(t,n,e){return function(i){if(r=i.children){var r,o,a=r.length,s=t(i)*n||0,l;if(s)for(o=0;o<a;++o)r[o].r+=s;if(l=sf(r,e),s)for(o=0;o<a;++o)r[o].r-=s;i.r=l+s}}}function Gi(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function Jr(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function cf(t){return function(){return t}}function ff(t){return+t}var Wi=[0,1];function ft(t){return t}function Te(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:cf(isNaN(n)?NaN:.5)}function hf(t,n){var e;return t>n&&(e=t,t=n,n=e),function(i){return Math.max(t,Math.min(n,i))}}function df(t,n,e){var i=t[0],r=t[1],o=n[0],a=n[1];return r<i?(i=Te(r,i),o=e(a,o)):(i=Te(i,r),o=e(o,a)),function(s){return o(i(s))}}function pf(t,n,e){var i=Math.min(t.length,n.length)-1,r=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<i;)r[a]=Te(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(s){var l=ho(t,s,1,i)-1;return o[l](r[l](s))}}function to(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function no(){var t=Wi,n=Wi,e=Pe,i,r,o,a=ft,s,l,u;function c(){var f=Math.min(t.length,n.length);return a!==ft&&(a=hf(t[0],t[f-1])),s=f>2?pf:df,l=u=null,h}function h(f){return f==null||isNaN(f=+f)?o:(l||(l=s(t.map(i),n,e)))(i(a(f)))}return h.invert=function(f){return a(r((u||(u=s(n,t.map(i),ot)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,ff),c()):t.slice()},h.range=function(f){return arguments.length?(n=Array.from(f),c()):n.slice()},h.rangeRound=function(f){return n=Array.from(f),e=$s,c()},h.clamp=function(f){return arguments.length?(a=f?!0:ft,c()):a!==ft},h.interpolate=function(f){return arguments.length?(e=f,c()):e},h.unknown=function(f){return arguments.length?(o=f,h):o},function(f,d){return i=f,r=d,c()}}function gf(){return no()(ft,ft)}function mf(t,n,e,i){var r=yo(t,n,e),o;switch(i=Ln(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(n));return i.precision==null&&!isNaN(o=ql(r,a))&&(i.precision=o),Ir(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=Ol(r,Math.max(Math.abs(t),Math.abs(n))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=Dl(r))&&(i.precision=o-(i.type==="%")*2);break}}return $r(i)}function eo(t){var n=t.domain;return t.ticks=function(e){var i=n();return vo(i[0],i[i.length-1],e??10)},t.tickFormat=function(e,i){var r=n();return mf(r[0],r[r.length-1],e??10,i)},t.nice=function(e){e==null&&(e=10);var i=n(),r=0,o=i.length-1,a=i[r],s=i[o],l,u,c=10;for(s<a&&(u=a,a=s,s=u,u=r,r=o,o=u);c-- >0;){if(u=ae(a,s,e),u===l)return i[r]=a,i[o]=s,n(i);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function Ge(){var t=gf();return t.copy=function(){return to(t,Ge())},Jr.apply(t,arguments),eo(t)}function Ki(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function vf(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function yf(t){return t<0?-t*t:t*t}function _f(t){var n=t(ft,ft),e=1;function i(){return e===1?t(ft,ft):e===.5?t(vf,yf):t(Ki(e),Ki(1/e))}return n.exponent=function(r){return arguments.length?(e=+r,i()):e},eo(n)}function io(){var t=_f(no());return t.copy=function(){return to(t,io()).exponent(t.exponent())},Jr.apply(t,arguments),t}function xf(){return io.apply(null,arguments).exponent(.5)}const vn=t=>()=>t;function wf(t,{sourceEvent:n,target:e,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function yt(t,n,e){this.k=t,this.x=n,this.y=e}yt.prototype={constructor:yt,scale:function(t){return t===1?this:new yt(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new yt(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Zn=new yt(1,0,0);yt.prototype;function oe(t){t.stopImmediatePropagation()}function Ft(t){t.preventDefault(),t.stopImmediatePropagation()}function Mf(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Ef(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ui(){return this.__zoom||Zn}function Sf(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Nf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Af(t,n,e){var i=t.invertX(n[0][0])-e[0][0],r=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function ro(){var t=Mf,n=Ef,e=Af,i=Sf,r=Nf,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Er,u=en("start","zoom","end"),c,h,f,d=500,g=150,_=0,v=10;function m(y){y.property("__zoom",Ui).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",C).filter(r).on("touchstart.zoom",N).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(y,x,w,b){var $=y.selection?y.selection():y;$.property("__zoom",Ui),y!==$?E(y,x,w,b):$.interrupt().each(function(){A(this,arguments).event(b).start().zoom(null,typeof x=="function"?x.apply(this,arguments):x).end()})},m.scaleBy=function(y,x,w,b){m.scaleTo(y,function(){var $=this.__zoom.k,I=typeof x=="function"?x.apply(this,arguments):x;return $*I},w,b)},m.scaleTo=function(y,x,w,b){m.transform(y,function(){var $=n.apply(this,arguments),I=this.__zoom,P=w==null?p($):typeof w=="function"?w.apply(this,arguments):w,D=I.invert(P),O=typeof x=="function"?x.apply(this,arguments):x;return e(S(M(I,O),P,D),$,a)},w,b)},m.translateBy=function(y,x,w,b){m.transform(y,function(){return e(this.__zoom.translate(typeof x=="function"?x.apply(this,arguments):x,typeof w=="function"?w.apply(this,arguments):w),n.apply(this,arguments),a)},null,b)},m.translateTo=function(y,x,w,b,$){m.transform(y,function(){var I=n.apply(this,arguments),P=this.__zoom,D=b==null?p(I):typeof b=="function"?b.apply(this,arguments):b;return e(Zn.translate(D[0],D[1]).scale(P.k).translate(typeof x=="function"?-x.apply(this,arguments):-x,typeof w=="function"?-w.apply(this,arguments):-w),I,a)},b,$)};function M(y,x){return x=Math.max(o[0],Math.min(o[1],x)),x===y.k?y:new yt(x,y.x,y.y)}function S(y,x,w){var b=x[0]-w[0]*y.k,$=x[1]-w[1]*y.k;return b===y.x&&$===y.y?y:new yt(y.k,b,$)}function p(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function E(y,x,w,b){y.on("start.zoom",function(){A(this,arguments).event(b).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(b).end()}).tween("zoom",function(){var $=this,I=arguments,P=A($,I).event(b),D=n.apply($,I),O=w==null?p(D):typeof w=="function"?w.apply($,I):w,V=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),H=$.__zoom,W=typeof x=="function"?x.apply($,I):x,pt=l(H.invert(O).concat(V/H.k),W.invert(O).concat(V/W.k));return function(rt){if(rt===1)rt=W;else{var gt=pt(rt),Kn=V/gt[2];rt=new yt(Kn,O[0]-gt[0]*Kn,O[1]-gt[1]*Kn)}P.zoom(null,rt)}})}function A(y,x,w){return!w&&y.__zooming||new z(y,x)}function z(y,x){this.that=y,this.args=x,this.active=0,this.sourceEvent=null,this.extent=n.apply(y,x),this.taps=0}z.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,x){return this.mouse&&y!=="mouse"&&(this.mouse[1]=x.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=x.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=x.invert(this.touch1[0])),this.that.__zoom=x,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var x=B(this.that).datum();u.call(y,this.that,new wf(y,{sourceEvent:this.sourceEvent,target:m,type:y,transform:this.that.__zoom,dispatch:u}),x)}};function k(y,...x){if(!t.apply(this,arguments))return;var w=A(this,x).event(y),b=this.__zoom,$=Math.max(o[0],Math.min(o[1],b.k*Math.pow(2,i.apply(this,arguments)))),I=vt(y);if(w.wheel)(w.mouse[0][0]!==I[0]||w.mouse[0][1]!==I[1])&&(w.mouse[1]=b.invert(w.mouse[0]=I)),clearTimeout(w.wheel);else{if(b.k===$)return;w.mouse=[I,b.invert(I)],Mn(this),w.start()}Ft(y),w.wheel=setTimeout(P,g),w.zoom("mouse",e(S(M(b,$),w.mouse[0],w.mouse[1]),w.extent,a));function P(){w.wheel=null,w.end()}}function T(y,...x){if(f||!t.apply(this,arguments))return;var w=y.currentTarget,b=A(this,x,!0).event(y),$=B(y.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",V,!0),I=vt(y,w),P=y.clientX,D=y.clientY;gr(y.view),oe(y),b.mouse=[I,this.__zoom.invert(I)],Mn(this),b.start();function O(H){if(Ft(H),!b.moved){var W=H.clientX-P,pt=H.clientY-D;b.moved=W*W+pt*pt>_}b.event(H).zoom("mouse",e(S(b.that.__zoom,b.mouse[0]=vt(H,w),b.mouse[1]),b.extent,a))}function V(H){$.on("mousemove.zoom mouseup.zoom",null),mr(H.view,b.moved),Ft(H),b.event(H).end()}}function C(y,...x){if(t.apply(this,arguments)){var w=this.__zoom,b=vt(y.changedTouches?y.changedTouches[0]:y,this),$=w.invert(b),I=w.k*(y.shiftKey?.5:2),P=e(S(M(w,I),b,$),n.apply(this,x),a);Ft(y),s>0?B(this).transition().duration(s).call(E,P,b,y):B(this).call(m.transform,P,b,y)}}function N(y,...x){if(t.apply(this,arguments)){var w=y.touches,b=w.length,$=A(this,x,y.changedTouches.length===b).event(y),I,P,D,O;for(oe(y),P=0;P<b;++P)D=w[P],O=vt(D,this),O=[O,this.__zoom.invert(O),D.identifier],$.touch0?!$.touch1&&$.touch0[2]!==O[2]&&($.touch1=O,$.taps=0):($.touch0=O,I=!0,$.taps=1+!!c);c&&(c=clearTimeout(c)),I&&($.taps<2&&(h=O[0],c=setTimeout(function(){c=null},d)),Mn(this),$.start())}}function R(y,...x){if(this.__zooming){var w=A(this,x).event(y),b=y.changedTouches,$=b.length,I,P,D,O;for(Ft(y),I=0;I<$;++I)P=b[I],D=vt(P,this),w.touch0&&w.touch0[2]===P.identifier?w.touch0[0]=D:w.touch1&&w.touch1[2]===P.identifier&&(w.touch1[0]=D);if(P=w.that.__zoom,w.touch1){var V=w.touch0[0],H=w.touch0[1],W=w.touch1[0],pt=w.touch1[1],rt=(rt=W[0]-V[0])*rt+(rt=W[1]-V[1])*rt,gt=(gt=pt[0]-H[0])*gt+(gt=pt[1]-H[1])*gt;P=M(P,Math.sqrt(rt/gt)),D=[(V[0]+W[0])/2,(V[1]+W[1])/2],O=[(H[0]+pt[0])/2,(H[1]+pt[1])/2]}else if(w.touch0)D=w.touch0[0],O=w.touch0[1];else return;w.zoom("touch",e(S(P,D,O),w.extent,a))}}function L(y,...x){if(this.__zooming){var w=A(this,x).event(y),b=y.changedTouches,$=b.length,I,P;for(oe(y),f&&clearTimeout(f),f=setTimeout(function(){f=null},d),I=0;I<$;++I)P=b[I],w.touch0&&w.touch0[2]===P.identifier?delete w.touch0:w.touch1&&w.touch1[2]===P.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(P=vt(P,this),Math.hypot(h[0]-P[0],h[1]-P[1])<v)){var D=B(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return m.wheelDelta=function(y){return arguments.length?(i=typeof y=="function"?y:vn(+y),m):i},m.filter=function(y){return arguments.length?(t=typeof y=="function"?y:vn(!!y),m):t},m.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:vn(!!y),m):r},m.extent=function(y){return arguments.length?(n=typeof y=="function"?y:vn([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),m):n},m.scaleExtent=function(y){return arguments.length?(o[0]=+y[0],o[1]=+y[1],m):[o[0],o[1]]},m.translateExtent=function(y){return arguments.length?(a[0][0]=+y[0][0],a[1][0]=+y[1][0],a[0][1]=+y[0][1],a[1][1]=+y[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(y){return arguments.length?(e=y,m):e},m.duration=function(y){return arguments.length?(s=+y,m):s},m.interpolate=function(y){return arguments.length?(l=y,m):l},m.on=function(){var y=u.on.apply(u,arguments);return y===u?m:y},m.clickDistance=function(y){return arguments.length?(_=(y=+y)*y,m):Math.sqrt(_)},m.tapDistance=function(y){return arguments.length?(v=+y,m):v},m}const bf="data/circle_packing_data.json",ji="circle-packing-plot",kf="circle-packing-title",zf="circle-packing-text",Qi="#f4efda",Tf="#9e2846",Cf="#000000",$f=3,If=5,Lf=100,Pf="",Rf={culture:"Division Culture",marterey:"Quartier Marterey",campagne:"Division Campagne",commerce:"Division Commerce",centre:"Division Centre",affaires:"Division Affaires",cathedrale:"Division Cathédrale"},Df="Pour vivre une expérience d'exploration historique immersive, nous vous invitons à découvrir les divisions et quartiers qui constituaient la ville. Pour ce faire, il suffit de cliquer sur les cercles correspondant à chaque quartier ou division.",qf={culture:"Dans le domaine culturel, la rue Marterey de Lausanne se distingue. En 1803, un théâtre est initié sur le côté occidental de cette rue, et sa construction s'achève en 1805, renforçant l'identité culturelle de ce secteur de la ville.",marterey:"Dans le domaine culturel, la rue Marterey de Lausanne se distingue. En 1803, un théâtre est initié sur le côté occidental de cette rue, et sa construction s'achève en 1805, renforçant l'identité culturelle de ce secteur de la ville.",campagne:"La campagne lausannoise, parsemée de hameaux charmants, offrait un cadre idyllique pour ceux cherchant à échapper à l'agitation urbaine. Cette zone était notamment prisée par les rentiers pour sa tranquillité et se situait également sur des axes stratégiques. Ce contexte attirait les familles aristocratiques qui y établissaient leurs villas suburbaines, symbolisant à la fois un lien étroit avec la nature et un certain statut social. D'autre part, les agriculteurs et vignerons, en tant que paysans, se consacraient à leurs activités agricoles et viticoles dans cette campagne luxuriante.",commerce:"Le dynamisme commercial de Lausanne était palpable dans plusieurs quartiers vibrants de la ville avec des centres actifs comme le Grand St-Jean, St-Laurent, Palud, Ale et la Montée de St-Laurent. La place Chauderon, inaugurée en 1830, servait de point de transfert pour les marchandises, tandis que la place de la Palud, avec l'Hôtel de Ville et son marché de fromages, constituait un autre pôle d'activité.",centre:"Le centre de Lausanne était marqué par des rues pittoresques et animées, comme la Montée St-François, le Chêneau de Bourg et la Rue du Pré. Toutefois, le paysage social était significativement influencé par la présence de la tannerie Mercier dans le quartier du Rôtillon. Malgré son importance économique, la tannerie était associée à des conditions sanitaires défavorables et des odeurs désagréables, ce qui a limité la présence de la bourgeoisie dans ce secteur.",affaires:"Le cœur économique de Lausanne se trouvait dans le quartier du Bourg. Ce dernier, vibrant d'activité, abritait l'Hôtel des postes, créé entre 1806 et 1808 suite à la transformation d'une partie de l'ancien manège. C'était ici que le courrier était centralisé et expédié. De plus, ce quartier jouait un rôle crucial dans le transport. En effet, la place Saint-François était le terminus des diligences en provenance ou à destination de Berne, Genève ou Paris. Le quartier du Bourg était donc un véritable pôle d'affaires, où se croisaient les flux de courriers et de voyageurs, symbolisant le dynamisme économique de Lausanne à cette époque.",cathedrale:"La cathédrale de Lausanne se dressait majestueusement comme un emblème du patrimoine de la ville. Implantée au cœur de la Cité Derrière, son architecture impressionnante dominait l'horizon, attirant l'attention et l'admiration des résidents et des visiteurs. Les quartiers pittoresques de la Cité Dessous et de la Barre enveloppaient la cathédrale dans un tissu urbain dense. En outre, la présence de l'académie dans cette division renforçait le statut de la cathédrale comme centre de l'enseignement et de l'érudition."};class Of{constructor(){J(this,"data");J(this,"width");J(this,"height");this.loadData().then(()=>{this.initDimensions(),this.initPacking()})}async loadData(){return new Promise(n=>{$n(bf).then(e=>{this.data=e,n()})})}initDimensions(){const n=document.getElementById(ji);if(n){const e=Math.min(n.clientWidth,n.clientHeight);this.width=e,this.height=e}}initPacking(){const e=(f=>lf().size([this.width,this.height]).padding($f)(Ve(f).sum(d=>d.value).sort((d,g)=>g.value-d.value)))(this.data);let i=e;const r=Ge().domain([0,2]).range([Qi,Tf]),o=xf().domain([xo(e.descendants(),f=>f.r),_o(e.descendants(),f=>f.r)]).range([If,Lf]),a=B(`#${ji}`).append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox",`-${this.width/2} -${this.height/2} ${this.width} ${this.height}`).style("display","block").style("background",r(0)).style("cursor","pointer").on("click",f=>h(f,e)),s=a.append("g").selectAll("circle").data(e.descendants().slice(1)).join("circle").attr("fill",f=>f.children?r(f.depth):Qi).attr("pointer-events",f=>f.children?null:"none").on("mouseover",function(){B(this).attr("stroke",Cf)}).on("mouseout",function(){B(this).attr("stroke",null)}).on("click",(f,d)=>i!==d&&(h(f,d),f.stopPropagation())),l=a.append("g").style("font-family","var(--default-font-family)").attr("pointer-events","none").attr("text-anchor","middle").selectAll("text").data(e.descendants()).join("text").attr("dy","0.3em").style("font-size",f=>`${o(f.r)}px`).style("fill-opacity",f=>f.parent===e?1:0).style("display",f=>f.parent===e?"inline":"none").text(f=>f.data.name);let u;const c=f=>{const d=this.width/f[2];u=f,l.attr("transform",g=>`translate(${(g.x-f[0])*d},${(g.y-f[1])*d})`),s.attr("transform",g=>`translate(${(g.x-f[0])*d},${(g.y-f[1])*d})`),s.attr("r",g=>g.r*d)};c([e.x,e.y,e.r*2]);function h(f,d){const g=document.getElementById(kf);if(g){const m=Rf[d.data.name]||Pf;g.innerHTML=m}const _=document.getElementById(zf);if(_){const m=qf[d.data.name]||Df;_.innerHTML=m}i=d;const v=a.transition().duration(f.altKey?7500:750).tween("zoom",()=>{const m=Er(u,[i.x,i.y,i.r*2]);return M=>c(m(M))});l.filter(function(m){return m.parent===i||this.style.display==="inline"}).transition(v).style("fill-opacity",m=>m.parent===i?1:0).on("start",function(m){m.parent===i&&(this.style.display="inline")}).on("end",function(m){m.parent!==i&&(this.style.display="none")})}}}const Ff="select_job",Bf="check_proportion",Xf={no_job:{min:0,max:1},administration:{min:1,max:17,color:"blue"},agricole:{min:3,max:122,color:"#00A59B"},artisanat:{min:2,max:93,color:"#6F2282"},commerce:{min:6,max:44,color:"#E84E10"},construction:{min:1,max:39,color:"#FCBB00"},rente:{min:5,max:140,color:"#143A85"},service:{min:1,max:77,color:"#00973B"}};class Hf{constructor(n,e,i=7e5,r=[6.635,46.525],o=100,a="grey"){this.map_file=n,this.locations_file=e,this.scale=i,this.center=r,this.min_zoom_dimension=o,this.default_zone_color=a,this.is_zoomed=!1,this.clicked_zone=null,this.initDimensions(),this.svg=this.init_svg(),this.layer_1=this.init_g(),this.layer_2=this.init_g(),this.projection=this.init_projection(),this.zoom=this.init_zoom();let s="no_job",l=!1;document.getElementById(Bf).addEventListener("change",h=>{l=h.target.checked,this.handleSelectJob(s,l)}),document.getElementById(Ff).addEventListener("change",h=>{s=h.target.value,this.handleSelectJob(h.target.value,l)})}handleSelectJob(n,e){console.log(n,e);const i=Xf[n],r=Ge().domain([e?0:i.min,e?1:i.max]).range(["white",i.color]);this.layer_1.selectAll(".zone").transition().duration(500).attr("fill",o=>(console.log(o.properties.jobs),!(n in o.properties.jobs)||n==="no_job"?this.default_zone_color:r(o.properties.jobs[n]/(e?o.properties.population:1))))}initDimensions(){const n=document.getElementById("map-chart");n&&(this.width=n.clientWidth,this.height=n.clientHeight)}init_svg(){return B("#map").append("svg").attr("width",this.width).attr("height",this.height)}init_projection(){return Ac().center(this.center).scale(this.scale).translate([this.svg_width/2,this.svg_height/2])}init_g(){return this.svg.append("g")}init_zoom(){const n=ro().scaleExtent([1,8]).on("zoom",({transform:e})=>{this.layer_1.attr("transform",e),this.layer_2.attr("transform",e)});return this.svg.call(n),n}get svg_width(){return this.svg.node().getBoundingClientRect().width}get svg_height(){return this.svg.node().getBoundingClientRect().height}get path_generator(){return Di().projection(this.projection)}load_data(){$n(this.map_file).then(n=>{this.layer_1.selectAll("path").data(n.features).enter().append("path").attr("class","zone").attr("id",e=>e.properties.id).attr("fill",e=>this.default_zone_color).attr("d",Di().projection(this.projection)).style("stroke","white").style("stroke-width",.2).on("mouseover",e=>{this.onMouseOverZone(e.target)}).on("mouseout",e=>{this.onMouseOutZone(e.target)}).on("click",e=>{this.is_zoomed?this.zoomOut():this.zoomOnZone(e.target),this.is_zoomed=!this.is_zoomed,this.zoom.filter(()=>!this.is_zoomed),this.is_zoomed||this.resetZone(this.clicked_zone),this.clicked_zone=this.is_zoomed?e.target:null})}),this.load_locations()}load_locations(){$n(this.locations_file).then(n=>{n=Object.entries(n),this.layer_2.selectAll("circle").data(n).enter().append("circle").attr("cx",e=>this.projection(e[1])[0]).attr("cy",e=>this.projection(e[1])[1]).attr("r",2).attr("fill","black").style("pointer-events","none"),this.layer_2.selectAll("text").data(n).enter().append("text").attr("x",e=>this.projection(e[1])[0]).attr("y",e=>this.projection(e[1])[1]).attr("dy",-3).text(e=>e[0]).style("font-size","6px").style("fill","black").style("text-anchor","middle").style("pointer-events","none").style("font-family","sans-serif")})}unload_data(){this.layer_1.selectAll("*").remove(),this.layer_2.selectAll("*").remove()}update_data(n){this.map_file=n,this.layer_1.selectAll("*").remove(),this.layer_2.selectAll("*").remove(),this.load_data()}onMouseOverZone(n){if(this.is_zoomed)return;const e=B(n).attr("fill");B(n).attr("data-old-color",e),this.fadeToColor(n,"red");const r=this.getZoneCenter(n)[0];this.addZoneTitle(n,r[0],r[1])}onMouseOutZone(n){if(this.is_zoomed)return;const e=B(n).attr("data-old-color");this.fadeToColor(n,e),this.removeZoneTitle()}fadeToColor(n,e){this.is_zoomed||B(n).transition().duration(200).attr("fill",e)}getZoneCenter(n,e,i){const o=B(n).node().getBBox();let a=[o.x+o.width/2,o.y+o.height/2];return e||(a=this.projection.invert(a)),[a,i?this.getZoneBorders(n,e):null]}getZoneBorders(n,e){const r=B(n).node().getBBox();let o=[r.x,r.y+r.height],a=[r.x+r.width,r.y+r.height],s=[r.x,r.y],l=[r.x+r.width,r.y];return e||(o=this.projection.invert(o),a=this.projection.invert(a),s=this.projection.invert(s),l=this.projection.invert(l)),[o,a,s,l]}getZoneTitle(n){let e=n;e.nodeName=="path"&&(e=B(n).data()[0]);let i=e.properties.name;return(i==null||i==""||i=="nan")&&(i=e.properties.class),i=decodeURIComponent(escape(i)),i=i.split(" ")[0],i=i.replace(",",""),i}addZoneTitle(n,e,i){let r=this.getZoneTitle(n);this.layer_2.append("text").attr("x",this.projection([e,i])[0]).attr("y",this.projection([e,i])[1]).attr("text-anchor","middle").attr("id","zone_name").text(r).attr("font-family","sans-serif").attr("font-size","10px").attr("fill","black").style("pointer-events","none")}removeZoneTitle(){B("#zone_name").remove()}zoomOnZone(n){const e=this.getZoneCenter(n,!0,!0),i=e[0],r=e[1][0],o=e[1][1],a=e[1][2];let s=Math.abs(o[0]-r[0]);s=Math.max(s,this.min_zoom_dimension);let l=Math.abs(a[1]-r[1]);l=Math.max(l,this.min_zoom_dimension);const u=Math.min(this.svg_width/s,this.svg_height/l)*.7,c=this.svg_width/2-i[0]*u,h=this.svg_height/2-i[1]*u,f=Zn.translate(c,h).scale(u);this.svg.transition().duration(750).call(this.zoom.transform,f)}zoomOut(){this.svg.transition().duration(750).call(this.zoom.transform,Zn)}resetZone(n){const e=B(n).attr("data-old-color");this.fadeToColor(n,e),this.removeZoneTitle()}}document.addEventListener("DOMContentLoaded",()=>{new Of,new Hf("data/berney_divisions.geojson","data/locations.json").load_data()});const Ji=100;document.addEventListener("DOMContentLoaded",()=>{let t;function n(s){const l=s.getBoundingClientRect(),u=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth;return l.top>=0&&l.left>=0&&l.bottom<=u+1&&l.right<=c+1}function e(s,l){const u=window.pageYOffset,c=s.getBoundingClientRect().top,h=performance.now();function f(d){const g=d-h,_=Math.min(g/l,1);window.scrollTo({top:u+c*i(_)}),g<l&&window.requestAnimationFrame(f)}window.requestAnimationFrame(f)}function i(s){return s<.5?2*s*s:-1+(4-2*s)*s}function r(s){return s.deltaY>0?"down":"up"}function o(s){s.preventDefault();const l=["title-container","p1-container","p2-container","p3-container","p4-container","p5-container","p6-container","p7-container","final-container"];let u=null;s.type==="wheel"&&(u=r(s)),s.type==="touchmove"&&(u=s.touches[0].pageY>t?"up":"down");for(let c=0;c<l.length;c++){const h=c>=1?document.getElementById(l[c-1]):null,f=document.getElementById(l[c]),d=c<l.length-1?document.getElementById(l[c+1]):null;h&&n(f)&&u==="up"&&e(h,Ji),d&&n(f)&&u==="down"&&e(d,Ji)}}document.addEventListener("wheel",o,{passive:!1}),document.addEventListener("touchmove",o,{passive:!1});const a=document.getElementById("title-container");e(a,0)});const Yf="data/networks",Zf="road_vocation_data",Vf="vocation",Gf="#network-graph",Wf="network-chart",Kf="#network-title",Uf="#network-text",jf="#979487",tr="#aaaaaa",Qf={road_vocation_data:{road:"#289e61",vocation:"#9e2846"},bipartite_division_type_metiers:{division:"#289e61",job_category:"#9e2846"},bipartite_origine_category_type_metiers:{origine_category:"#289e61",job_category:"#9e2846"},bipartite_street_type_metiers:{street:"#289e61",job_category:"#9e2846"},bipartite_rue_origines:{street:"#289e61",origine_category:"#9e2846"},bipartite_divisions_origines:{division:"#289e61",origine_category:"#9e2846"}},Jf={road_vocation_data:{title:"Vocations Voisines",text:"Ce premier graphe tisse un lien entre les vocations et les rues. Chaque métier est connecté à une rue, la taille de chaque nœud reflétant le nombre de personnes concernées. Les liens entre les rues et les métiers mettent en lumière des proximités intéressantes : par exemple, les rues de <i>Chavannes</i> et de <i>La Sallaz</i> se retrouvent proches dans notre graphe, illustrant la forte présence de paysans parmi leurs habitants, comme l'indiquent les liens avec les nœuds 'laboureur' et 'fermier'. De plus, des rues géographiquement voisines comme <i>Rue Saint François</i> et <i>Place Saint François</i> se retrouvent également proches dans notre réseau, révélant une similarité dans la composition professionnelle de leurs résidents."},bipartite_division_type_metiers:{title:"Métiers Mappés",text:"Ce graphe met en lumière les liens entre les divisions de la ville de Lausanne et les classes de métiers. Il offre une vue claire sur la répartition des professions à travers la ville. Par exemple, il est évident que la majorité des rentiers proviennent des divisions 17 et 1-2, qui correspondent respectivement à la campagne vers le sud de Lausanne et au quartier de Marterey et ses environs."},bipartite_origine_category_type_metiers:{title:"Origines Occupées",text:"Cete visualization dévoile les interactions entre les classes d'origine et les classes de vocations On observe une distribution plutôt homogène des métiers pour chaque origine. Par ailleurs, Yverdon se distingue par une plus grande concentration de constructeurs et d'artisans. Le Lavaux, région connue pour son paysage viticole et agricole, présente une majorité de personnes engagées dans l'agriculture."},bipartite_street_type_metiers:{title:"Rues Révélées",text:"Ce graphe lie les classes de métiers aux rues, offrant une perspective encore plus granulaire de la vie à Lausanne au XIX<sup>ème</sup> siècle. Certaines petites rues présentent une faible diversité de vocations, comme Vidy, Paleyres, et Petit Ouchy, où prédomine l'agriculture en périphérie de la ville."},bipartite_rue_origines:{title:"Rues Racines",text:"Cette nouvelle visualisation lie les rues de Lausanne à leurs classes d'origine, offrant une compréhension encore plus nuancée des dynamiques sociales de la ville. Chaque rue se voit attribuer un spectre d'origines, révélant la diversité et la complexité de la composition démographique de la ville. De cette manière, on peut mieux apprécier l'histoire multiculturelle de Lausanne, où chaque rue porte en elle les traces de nombreuses origines différentes, formant un patchwork unique de cultures et de traditions."},bipartite_divisions_origines:{title:"Origines Organisées",text:"Cette dernière visualisation établit un lien direct entre les divisions de la ville et les origines de ses habitants. Elle offre une vue panoramique de la diversité culturelle, illustrant comment les différentes origines ont contribué à la formation de chaque division. À travers ce graphe, nous pouvons voir comment Lausanne, même à cette époque, était un creuset de cultures, où chaque division a été façonnée par une mosaïque d'origines différentes, contribuant à l'identité unique de la ville."}},th=.1,nh=10;class eh{constructor(n=.7,e=.7,i=.1,r=7,o=40,a=1,s=8,l=5,u=5,c=5,h=-700,f=2,d=200){J(this,"svg");J(this,"gnodes");J(this,"glinks");J(this,"simulation");J(this,"data");J(this,"container");J(this,"dragActive",!1);J(this,"networkName",Vf);J(this,"linkedById");this.expNodeSizeScale=n,this.expLinkWeightScale=e,this.transparency=i,this.minNodeSize=r,this.maxNodeSize=o,this.minLinkWeight=a,this.maxLinkWeight=s,this.labelSizeAdd=l,this.nodeSizeInc=u,this.labelSizeInc=c,this.chargeStrength=h,this.collideSizeAdd=f,this.transitionDuration=d,this.initDimensions(),this.initStaticElements(),this.initEvents(),this.updatePlot(Zf)}async loadData(n){const e=`${Yf}/${n}.json`;return new Promise(i=>{$n(e).then(r=>{i(r)})})}initDimensions(){this.container=B(Gf);const n=document.getElementById(Wf);n&&(this.width=n.clientWidth,this.height=n.clientHeight)}initStaticElements(){this.svg=this.container.append("svg").attr("width",this.width).attr("height",this.height),this.glinks=this.svg.append("g").attr("class","links"),this.gnodes=this.svg.append("g").attr("class","nodes")}initEvents(){const n=document.getElementById("graph-selector");n&&n.addEventListener("change",e=>{const i=e.target.value;this.updatePlot(i)})}get_scaled_size(n,e,i,r,o){return i-e==0?(r+o)/2:r+(n-e)*(o-r)/(i-e)}isConnected(n,e){return this.linkedById[n].indexOf(e)>-1||this.linkedById[e].indexOf(n)>-1||n==e}drag(n){const e=o=>{this.dragActive=!0,o.active||n.alphaTarget(.3).restart(),o.subject.fx=o.subject.x,o.subject.fy=o.subject.y},i=o=>{o.subject.fx=o.x,o.subject.fy=o.y},r=o=>{this.dragActive=!1,o.active||n.alphaTarget(0),o.subject.fx=null,o.subject.fy=null};return ls().on("start",e).on("drag",i).on("end",r)}initData(){let n=this.data.nodes.reduce((o,a)=>Math.max(o,a.size),0),e=this.data.nodes.reduce((o,a)=>Math.min(o,a.size),1/0);n=Math.pow(n,this.expNodeSizeScale),e=Math.pow(e,this.expNodeSizeScale),this.data.nodes.forEach(o=>o.size=this.get_scaled_size(Math.pow(o.size,this.expNodeSizeScale),e,n,this.minNodeSize,this.maxNodeSize));let i=this.data.links.reduce((o,a)=>Math.max(o,a.weight),0),r=this.data.links.reduce((o,a)=>Math.min(o,a.weight),1/0);i=Math.pow(i,this.expLinkWeightScale),r=Math.pow(r,this.expLinkWeightScale),this.data.links.forEach(o=>o.weight=this.get_scaled_size(Math.pow(o.weight,this.expLinkWeightScale),r,i,this.minLinkWeight,this.maxLinkWeight)),this.linkedById={},this.data.links.forEach(o=>{this.linkedById[o.source]=[],this.linkedById[o.target]=[]}),this.data.links.forEach(o=>{this.linkedById[o.source].push(o.target),this.linkedById[o.target].push(o.source)})}createLinks(){this.glinks.attr("stroke",jf).attr("stroke-opacity",1).selectAll("line").data(this.data.links).enter().append("line").attr("stroke-width",function(n){return n.weight})}createNodes(){const n=this.gnodes.selectAll(".node").data(this.data.nodes).enter().append("g").attr("class","node");n.append("circle").attr("class","node-circle").attr("r",function(e){return e.size}).attr("fill",e=>{const i=Qf[this.networkName],r=i?i[e.type]:tr;return r||tr}).call(this.drag(this.simulation)).on("mouseover",(e,i)=>{if(this.dragActive)return;const r=i.id;this.gnodes.selectAll(".node-circle").transition().duration(this.transitionDuration).attr("fill-opacity",o=>this.isConnected(r,o.id)||o.id==r?1:this.transparency).attr("r",o=>{if(o.id==r)return o.size+this.nodeSizeInc;if(this.isConnected(r,o.id)){let a=this.data.links.find(h=>h.source.id==o.id&&h.target.id==r||h.source.id==r&&h.target.id==o.id).weight;this.linkedById[r];const s=this.data.links.filter(h=>h.source.id==r||h.target.id==r),l=s.reduce((h,f)=>Math.min(h,f.weight),1/0),u=s.reduce((h,f)=>Math.max(h,f.weight),-1/0);return this.get_scaled_size(a,l,u,this.minNodeSize,this.maxNodeSize)}return o.size}),this.glinks.selectAll("line").transition().duration(this.transitionDuration).attr("stroke-opacity",o=>o.source.id==r||o.target.id==r?1:this.transparency),this.gnodes.selectAll(".node-text").transition().duration(this.transitionDuration).attr("fill-opacity",o=>this.isConnected(r,o.id)||o.id==r?1:this.transparency).attr("font-size",o=>{if(o.id==r)return o.size+this.labelSizeInc+this.labelSizeAdd;if(this.isConnected(r,o.id)){let a=this.data.links.find(h=>h.source.id==o.id&&h.target.id==r||h.source.id==r&&h.target.id==o.id).weight;this.linkedById[r];const s=this.data.links.filter(h=>h.source.id==r||h.target.id==r),l=s.reduce((h,f)=>Math.min(h,f.weight),1/0),u=s.reduce((h,f)=>Math.max(h,f.weight),-1/0);return this.get_scaled_size(a,l,u,this.minNodeSize,this.maxNodeSize)+this.labelSizeAdd}return o.size+this.labelSizeAdd})}).on("mouseout",e=>{this.dragActive||(this.gnodes.selectAll(".node-circle").transition().duration(this.transitionDuration).attr("fill-opacity",1).attr("r",function(i){return i.size}),this.glinks.selectAll("line").transition().duration(this.transitionDuration).attr("stroke-opacity",1),this.gnodes.selectAll(".node-text").transition().duration(this.transitionDuration).attr("fill-opacity",1).attr("font-size",i=>i.size+this.labelSizeAdd))}),n.append("text").attr("class","node-text").text(function(e){return e.label}).attr("font-size",e=>e.size+this.labelSizeAdd).attr("font-family","sans-serif").attr("font-weight","bold").attr("text-anchor","middle").attr("alignment-baseline","middle").style("pointer-events","none")}initZoom(){const n=ro().scaleExtent([th,nh]).on("zoom",({transform:e})=>{this.gnodes.attr("transform",e),this.glinks.attr("transform",e)});this.svg.call(n)}initSimulation(){this.simulation=bl().force("link",_l().id(function(e){return e.id})).force("charge",kl().strength(this.chargeStrength)).force("center",Qu(this.width/2,this.height/2)).force("collide",vl().radius(e=>e.size+this.collideSizeAdd));const n=()=>{this.glinks.selectAll("line").attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),this.gnodes.selectAll(".node-circle").attr("cx",e=>e.x).attr("cy",e=>e.y),this.gnodes.selectAll(".node-text").attr("x",e=>e.x+10).attr("y",e=>e.y+4).attr("dx",-9).attr("dy",".1em")};this.simulation.nodes(this.data.nodes).on("tick",n),this.simulation.force("link").links(this.data.links)}async updatePlot(n){return new Promise(e=>{this.loadData(n).then(i=>{this.networkName=n,this.deletePlot(),this.data=i,this.initData(),this.initSimulation(),this.createLinks(),this.createNodes(),this.initZoom();const r=document.querySelector(Kf),o=document.querySelector(Uf),a=Jf[n];r&&o&&(r.innerHTML=a.title,o.innerHTML=a.text)}),e()})}deletePlot(){this.gnodes.selectAll("*").remove(),this.glinks.selectAll("*").remove()}}document.addEventListener("DOMContentLoaded",()=>{console.log("Loading networks..."),new eh,console.log("Networks loaded.")});
